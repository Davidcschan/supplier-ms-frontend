(this["webpackJsonpsupplier-ms-admin"]=this["webpackJsonpsupplier-ms-admin"]||[]).push([[0],{1092:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(34),l=t.n(c),o=(t(812),t(813),t(814),t(11)),i=t(103),u=t(420),s=t(245),m=t(105),d=t(673),p=t(1097),E=t(1208),b=t(1207),h=t(676),f=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallback:null},t=a.fallback,c=void 0===t?null:t,l=Object(r.lazy)(e);return function(e){return n.a.createElement(r.Suspense,{fallback:c},n.a.createElement(l,e))}},g=f((function(){return t.e(5).then(t.bind(null,1237))})),v=t(31),O=t(177),y=t.n(O),S=t(137),j=t(7),D=t(75),C=t(1142),P=t(114),x=t(404),I=t(43),w=t(9),N=t.n(w),k=t(97),T=t(691),F=t(403),A=t(81),W=t(328),R=t(1149),M=t(767),q=t(203),Y=t(693),L=t.n(Y),B=t(376),H=t.n(B),K=t(687),$=t(694),V=t.n($),U=t(173),_=t.n(U),G=t(695),z=t.n(G),Q=t(519),J=t.n(Q),X=t(696),Z=t.n(X),ee=t(402),ae=t.n(ee),te=t(697),re=t.n(te),ne=t(1164),ce=t(1165),le=t(1166),oe=t(30),ie=Object(D.a)((function(e){return{toolbar:{paddingRight:e.spacing(3),backgroundColor:e.palette.primary.main,transition:e.transitions.create(["background-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},menuButton:{marginLeft:"0.5em",marginRight:"0.5em"},menuButtonIconClosed:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},menuButtonIconOpen:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),{name:"RaAppBar"}),ue={color:"white"},se=function(e){e.children;var a=e.classes,t=e.className,c=(e.logo,e.logout),l=e.open,i=(e.title,e.userMenu,Object(I.a)(e,["children","classes","className","logo","logout","open","title","userMenu"])),u=Object(k.a)(),s=Object(j.e)(),m=ie({classes:a}),d=Object(W.a)((function(e){return e.breakpoints.down("xs")})),p=Object(r.useState)(null),E=Object(o.a)(p,2),b=E[0],h=E[1],f=Object(r.useState)(null),g=Object(o.a)(f,2),v=g[0],O=g[1],y=function(e){h(null)};return n.a.createElement(T.a,null,n.a.createElement(R.a,Object.assign({className:t,color:"primary"},i),n.a.createElement(M.a,{disableGutters:!0,variant:d?"regular":"dense",className:m.toolbar},n.a.createElement(q.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return s(Object(P.f)())},className:N()(m.menuButton)},n.a.createElement(ae.a,{classes:{root:l?m.menuButtonIconOpen:m.menuButtonIconClosed}})),n.a.createElement(A.a,{variant:"h6",className:m.title},u("softwareName")),n.a.createElement(oe.a,{to:"/xero",style:ue},n.a.createElement(q.a,{color:"inherit"},n.a.createElement(H.a,null))),n.a.createElement(q.a,{"aria-label":"Settings","aria-controls":"long-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){h(e.currentTarget)}},n.a.createElement(L.a,null)),n.a.createElement(K.a,{id:"simple-menu",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:y},n.a.createElement(F.a,{to:"/Product",primaryText:u("menu.item.product"),leftIcon:n.a.createElement(V.a,null),onClick:y}),n.a.createElement(F.a,{to:"/Supplier",primaryText:u("menu.item.supplier"),leftIcon:n.a.createElement(ne.a,null),onClick:y}),n.a.createElement(F.a,{to:"/Customer",primaryText:u("menu.item.customer"),leftIcon:n.a.createElement(ce.a,null),onClick:y}),n.a.createElement(F.a,{to:"/Warehouse",primaryText:u("menu.item.warehouse"),leftIcon:n.a.createElement(_.a,null),onClick:y}),n.a.createElement(F.a,{to:"/ProductCategory",primaryText:u("menu.item.productCategory"),leftIcon:n.a.createElement(z.a,null),onClick:y}),n.a.createElement(F.a,{to:"/CustomerGroup",primaryText:u("menu.item.customerGroup"),leftIcon:n.a.createElement(J.a,null),onClick:y}),n.a.createElement(F.a,{to:"/CustomerShop",primaryText:u("menu.item.customerShop"),leftIcon:n.a.createElement(Z.a,null),onClick:y}),n.a.createElement(F.a,{to:"/User",primaryText:u("menu.item.user"),leftIcon:n.a.createElement(J.a,null),onClick:y}),n.a.createElement(F.a,{to:"/UserGroup",primaryText:u("menu.item.userGroup"),leftIcon:n.a.createElement(re.a,null),onClick:y})),n.a.createElement(q.a,{"aria-label":"Warren Chan","aria-controls":"long-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){O(e.currentTarget)}},n.a.createElement(le.a,null),"\xa0",n.a.createElement(A.a,null,localStorage.getItem("token"))),n.a.createElement(K.a,{id:"user-menu",anchorEl:v,keepMounted:!0,open:Boolean(v),onClose:function(e){O(null)}},c))))},me=(t(698),Object(D.a)((function(e){return{drawerPaper:{marginTop:0,transition:e.transitions.create("height",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}})),t(86)),de=Object(me.j)((function(e){var a=e.location,t=e.history,r=Object(j.f)((function(e){return e.admin.ui.sidebarOpen})),c=a.pathname.split("/"),l=function(e){return c.length>1&&y.a.singular(c[1])===e},o=function(e){return function(){return t.push("/".concat(e))}};return r?n.a.createElement(S.Workflow,{open:!0},n.a.createElement(S.WorkflowItem.Supplier,{onClick:o("Supplier"),active:l("Supplier")}),n.a.createElement(S.WorkflowItem.PurchaseOrder,{onClick:o("PurchaseOrder"),active:l("PurchaseOrder")}),n.a.createElement(S.WorkflowItem.Shipping,{onClick:o("Shipping"),active:l("Shipping")}),n.a.createElement(S.WorkflowItem.Inventory,{onClick:o("Inventory"),active:l("Inventory")}),n.a.createElement(S.WorkflowItem.SalesOrder,{onClick:o("SalesOrder"),active:l("SalesOrder")}),n.a.createElement(S.WorkflowItem.Invoice,{onClick:o("Invoice"),active:l("Invoice")}),n.a.createElement(S.WorkflowItem.DeliveryNote,{onClick:o("DeliveryNote"),active:l("DeliveryNote")}),n.a.createElement(S.WorkflowItem.Customer,{onClick:o("Customer"),active:l("Customer")}),n.a.createElement(S.WorkflowItem.ReceivePayment,{onClick:o("ReceivePayment"),active:l("ReceivePayment")}),n.a.createElement(S.WorkflowItem.Report,{onClick:o("Report"),active:l("Report")})):null})),pe=t(44),Ee=t(35),be=t.n(Ee),he=t(1223),fe=be()((function(e){return{breadcrumb:{paddingLeft:e.spacing(4),paddingRight:e.spacing(4),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),ge=function(){var e=Object(j.f)((function(e){return e.breadcrumb})),a=fe(),t=Object(pe.a)(e),r=t.pop(),c={textDecoration:"none",color:"#666",hover:{textDecoration:"underline"}};return n.a.createElement(he.a,{"aria-label":"breadcrumb",className:a.breadcrumb},t.map((function(e){return n.a.createElement(oe.a,{key:"linkTo".concat(e.url),to:e.url,style:c},e.label)})),r&&n.a.createElement(A.a,{color:"textPrimary"},r.label))},ve=Object(D.a)((function(e){var a;return{root:{display:"flex",flexDirection:"column",zIndex:1,minHeight:"100vh",backgroundColor:e.palette.background.default,position:"relative",minWidth:"fit-content",width:"100%"},appFrame:(a={display:"flex",flexDirection:"column"},Object(v.a)(a,e.breakpoints.up("xs"),{marginTop:e.spacing(6)}),Object(v.a)(a,e.breakpoints.down("xs"),{marginTop:e.spacing(7)}),a),contentWithSidebar:{display:"flex",flexDirection:"column",flexGrow:1},content:Object(v.a)({display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0,padding:e.spacing(3),paddingTop:e.spacing(1)},e.breakpoints.down("sm"),{padding:0})}})),Oe=function(e){var a=e.children,t=e.dashboard,c=e.logout,l=(e.title,e.theme),o=ve(),i=Object(j.e)(),u=Object(j.f)((function(e){return e.admin.ui.sidebarOpen}));return Object(r.useEffect)((function(){i(Object(P.e)(!0))}),[i]),n.a.createElement(C.a,{theme:l},n.a.createElement("div",{className:o.root},n.a.createElement("div",{className:o.appFrame},n.a.createElement(se,{open:u,logout:c}),n.a.createElement("main",{className:o.contentWithSidebar},n.a.createElement(de,{logout:c,hasDashboard:!!t}),n.a.createElement(ge,null),n.a.createElement("div",{className:o.content},a)),n.a.createElement(x.a,null))))},ye=f((function(){return Promise.all([t.e(8),t.e(4)]).then(t.bind(null,1239))})),Se=f((function(){return t.e(6).then(t.bind(null,1240))})),je=f((function(){return t.e(3).then(t.bind(null,1241))})),De=t(495),Ce=t(16),Pe=t(19),xe=t(15),Ie=t.n(xe),we=t(1144),Ne=t(1145),ke=t(1146),Te=t(1147),Fe=t(1148),Ae=t(224);function We(){var e=Object(Ce.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return We=function(){return e},e}var Re=Ie()(We()),Me=be()({table:{minWidth:650}});function qe(e){var a=e.id,t=(e.labelFrom,e.onChange,Me()),r=Object(k.a)(),c=Object(Pe.b)(Re,{variables:{where:{warehouse:{id:a},label_contains:""}}}),l=c.loading,o=c.data;if(l)return n.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var i=o.inventoryItems;return n.a.createElement(De.a,{component:Ae.a},n.a.createElement(we.a,{className:t.table,"aria-label":"simple table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,r("product.label")),n.a.createElement(Te.a,{align:"right"},r("purchaseOrder.productCode")),n.a.createElement(Te.a,{align:"right"},r("purchaseOrder.productName")),n.a.createElement(Te.a,{align:"right"},r("product.expiryDate")))),n.a.createElement(Fe.a,null,i.map((function(e){return n.a.createElement(ke.a,{key:e.code},n.a.createElement(Te.a,{align:"right"},e.label),n.a.createElement(Te.a,{align:"right"},e.code),n.a.createElement(Te.a,{align:"right"},e.name),n.a.createElement(Te.a,{align:"right"},e.expiryDate))})))))}var Ye=t(1152),Le=t(273),Be=t(635),He=t(259),Ke=t.n(He),$e=t(637),Ve=t(638),Ue=t(510),_e=t(12),Ge=t(329),ze=t(1222),Qe=t(759);function Je(){var e=Object(Ce.a)(["\n  query warehouses($where: WarehouseWhereInput!) {\n    warehouses(where: $where) {\n      id\n      name\n      type\n    }\n  }\n"]);return Je=function(){return e},e}var Xe=Ie()(Je());function Ze(e){var a=e.onChange,t=e.defaultValue,r=e.className,c=e.where,l=void 0===c?{where:{type:"NORMAL"}}:c,i=Object(k.a)(),u=Object(Pe.b)(Xe,{variables:l}),s=u.loading,m=u.data,d=n.a.useState(!1),p=Object(o.a)(d,2),E=p[0],b=p[1],h=n.a.useState([]),f=Object(o.a)(h,2),g=f[0],v=f[1],O=s||E&&0===g.length;n.a.useEffect((function(){if(O&&m){var e=m.warehouses;v(e.map((function(e){return{id:e.id,name:e.name}})))}}),[O,m]),n.a.useEffect((function(){E||v([])}),[E]);return n.a.createElement(ze.a,{className:r,open:E,onOpen:function(){b(!0)},onClose:function(){b(!1)},onChange:function(e,t){var r=m.warehouses;a(r.find((function(e){return e.id===t.id})))},getOptionLabel:function(e){return e.name},options:g,loading:O,value:t&&{id:t.id,name:t.name},renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:i("product.warehouse"),variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,O?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var ea=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),aa=Ke()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(Ue.a);function ta(){var e=Object(k.a)(),a=ea(),t=Object(r.useState)(),c=Object(o.a)(t,2),l=c[0],i=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(A.a,{variant:"h5"},e("inventory.stockTransfer")),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(Be.a,{alternativeLabel:!0,connector:n.a.createElement(aa,null)},n.a.createElement($e.a,{key:e("inventory.warehouse")},n.a.createElement(Ve.a,{StepIconComponent:_.a},e("inventory.warehouse")," ",e("common.to"))))))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ze,{onChange:i,label:e("inventory.warehouse")+" "+e("common.from")})),n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ze,{onChange:i,label:e("inventory.warehouse")+" "+e("common.to")})))),l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ye.a,{className:a.card},n.a.createElement(A.a,{variant:"h6"},e("inventory.productItem")),n.a.createElement(qe,{id:l})))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},n.a.createElement(Le.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.transfer")))))))}function ra(){var e=Object(Ce.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return ra=function(){return e},e}var na=Ie()(ra()),ca=be()({table:{minWidth:650}});function la(e){var a=e.id,t=e.labelFrom,r=(e.onChange,ca()),c=Object(k.a)(),l=Object(Pe.b)(na,{variables:{where:{warehouse:{id:a},label_contains:""}}}),o=l.loading,i=l.data;if(o)return n.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var u=i.inventoryItems,s=Object.values(u.reduce((function(e,a){var t=a.name,r=a.brand,n=a.sku,c=a.expiryDay,l=a.price,o=a.unit;return e[n]||(e[n]={name:t,brand:r,sku:n,expiryDay:c,price:l,unit:o,quantity:0}),e[n].quantity++,e}),{})),m=parseInt(t,10);return s.forEach((function(e){e.labelFrom=m,e.labelTo=m+e.quantity,m=m+e.quantity+1})),n.a.createElement(De.a,{component:Ae.a},n.a.createElement(we.a,{className:r.table,"aria-label":"simple table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,c("purchaseOrder.productCode")),n.a.createElement(Te.a,{align:"right"},c("purchaseOrder.productName")),n.a.createElement(Te.a,{align:"right"},c("product.expiryDate")),n.a.createElement(Te.a,{align:"right"},c("product.quantity")),n.a.createElement(Te.a,{align:"right"},c("shipping.labelFrom")),n.a.createElement(Te.a,{align:"right"},c("shipping.labelTo")))),n.a.createElement(Fe.a,null,s.map((function(e){return n.a.createElement(ke.a,{key:e.code},n.a.createElement(Te.a,{align:"right"},e.code),n.a.createElement(Te.a,{align:"right"},e.name),n.a.createElement(Te.a,{align:"right"},e.expiryDate),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelFrom})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelTo})))})))))}var oa=t(700),ia=t.n(oa),ua=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),sa=Ke()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(Ue.a);function ma(){var e=Object(Ce.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return ma=function(){return e},e}var da=Ie()(ma()),pa=be()({table:{minWidth:650}});function Ea(e){var a=e.id,t=e.labelFrom,r=(e.onChange,pa()),c=Object(k.a)(),l=Object(Pe.b)(da,{variables:{where:{warehouse:{id:a},label_contains:""}}}),o=l.loading,i=l.data;if(o)return n.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var u=i.inventoryItems,s=Object.values(u.reduce((function(e,a){var t=a.name,r=a.brand,n=a.sku,c=a.expiryDay,l=a.price,o=a.unit;return e[n]||(e[n]={name:t,brand:r,sku:n,expiryDay:c,price:l,unit:o,quantity:0}),e[n].quantity++,e}),{})),m=parseInt(t,10);return s.forEach((function(e){e.labelFrom=m,e.labelTo=m+e.quantity,m=m+e.quantity+1})),n.a.createElement(De.a,{component:Ae.a},n.a.createElement(we.a,{className:r.table,"aria-label":"simple table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,c("purchaseOrder.productCode")),n.a.createElement(Te.a,{align:"right"},c("purchaseOrder.productName")),n.a.createElement(Te.a,{align:"right"},c("product.expiryDate")),n.a.createElement(Te.a,{align:"right"},c("product.quantity")),n.a.createElement(Te.a,{align:"right"},c("shipping.labelFrom")),n.a.createElement(Te.a,{align:"right"},c("shipping.labelTo")))),n.a.createElement(Fe.a,null,s.map((function(e){return n.a.createElement(ke.a,{key:e.code},n.a.createElement(Te.a,{align:"right"},e.code),n.a.createElement(Te.a,{align:"right"},e.name),n.a.createElement(Te.a,{align:"right"},e.expiryDate),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelFrom})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelTo})))})))))}var ba=t(701),ha=t.n(ba),fa=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),ga=Ke()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(Ue.a);var va=t(1210),Oa=t(406),ya=t.n(Oa),Sa=t(36),ja=t.n(Sa),Da=t(516),Ca=t(703),Pa=t(1216),xa=t(707),Ia=t(1169),wa=t(1209),Na=t(1211),ka=t(1173),Ta=t(1174),Fa=t(1167),Aa=t(1175),Wa=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t;e.label;return n.a.createElement(A.a,{variant:"body1"},r["".concat(a,"Chi")],n.a.createElement("br",null),r["".concat(a,"En")])};function Ra(e,a){var t=e.monthlySalesOnAverage*ja()(a).diff(ja()(),"month")*1.05;return Math.floor(t)<0?0:Math.floor(t).toFixed(1)}var Ma=function(e){var a=e.label,t=Ra(e.record,e.options.expectedSalesDate);return n.a.createElement(Fa.a,{label:a,record:{value:t},source:"value"})},qa=function(e){var a=e.label,t=e.options,r=ja()(t.expectedSalesDate).diff(ja()(),"month");return n.a.createElement(Fa.a,{label:a,record:{value:r},source:"value"})},Ya=t(1159),La=t(45),Ba=t.n(La);function Ha(e){return{type:"SET_BREADCRUMBS",payload:e}}function Ka(e){return{type:"ADD_BREADCRUMBS",payload:e}}var $a=[{url:"/",label:"Dashboard"}],Va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload;switch(t){case"SET_BREADCRUMBS":return[].concat($a,Object(pe.a)(r));case"ADD_BREADCRUMBS":return e[e.length-1].url===r.url?e:Ba()(r)?[].concat(Object(pe.a)(e),Object(pe.a)(r)):[].concat(Object(pe.a)(e),[r]);default:return e}},Ua={url:"/Inventory",label:"Inventory"};var _a=function(e){e.staticContext;var a=Object(I.a)(e,["staticContext"]),t=Object(Da.a)().permissions,c=Object(r.useState)(ja()().add(4,"month")),l=Object(o.a)(c,2),i=l[0],u=l[1];Object(me.g)(),Object(j.e)()(Ha([Ua]));var s=function(e){return n.a.createElement(Pa.a,e,n.a.createElement(xa.a,{label:"Search Product no.",source:"code_starts_with",alwaysOn:!0}))},m=function(e){var a=e.record;e.props;return"admin"===e.permissions?n.a.createElement(Ia.a,{basePath:"/Inventory/editStock",record:a}):null};return n.a.createElement(n.a.Fragment,null,n.a.createElement(wa.a,Object.assign({resource:"Product",hasCreate:!1,hasEdit:!1,hasShow:!1,hasList:!0,basePath:"/Inventory",exporter:function(e){var a=e.map((function(e){return{code:e.code,name:e.nameChi,stock:e.quantity,avg:e.monthlySalesOnAverage,incoming:e.incomingQuantity,nextShipment:ja()(i).diff(ja()(),"month"),expectedSales:Ra(e,i)}}));ya()(a,{headers:["code","name","stock","avg","incoming","nextShipment","expectedSales"]},(function(e,a){Object(Ca.a)(a,"posts")}))}},a,{filters:n.a.createElement(s,null)}),n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"Product No.",source:"id",reference:"Product",link:function(e,a){return"/".concat(a,"/").concat(e.id,"/show")}},n.a.createElement(Ta.a,{source:"code"})),n.a.createElement(ka.a,{label:"name",source:"id",reference:"Product",link:function(e,a){return"/".concat(a,"/").concat(e.id,"/show")}},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{label:"Stock",source:"quantity",sortable:!1}),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(m,{record:e,props:a,permissions:t})},sortable:!1}),n.a.createElement(Fa.a,{source:"monthlySalesOnAverage",sortable:!1}),n.a.createElement(Fa.a,{source:"outgoingQuantity",sortable:!1}),n.a.createElement(Fa.a,{source:"incomingQuantity",sortable:!1}),n.a.createElement(qa,{label:"Months till Next shipment",options:{expectedSalesDate:i},sortable:!1}),n.a.createElement(Ma,{label:"Expected Sales till next shipment",options:{expectedSalesDate:i},sortable:!1}))),n.a.createElement(Ya.a,{container:!0,justify:"flex-end",alignItems:"center"},n.a.createElement(A.a,{variant:"button"},"Expected next shipment month and default after 4 month :"," "),n.a.createElement(va.a,{style:{width:200,margin:10},inputVariant:"filled",value:i,openTo:"year",views:["year","month"],onChange:u})))},Ga=t(431),za=t(1122),Qa=t(1230),Ja=t(1178),Xa=t(1177);function Za(){var e=Object(Ce.a)(["\n  query purchaseOrders(\n    $where: PurchaseOrderWhereInput\n    $orderBy: PurchaseOrderOrderByInput!\n  ) {\n    purchaseOrders(where: $where, orderBy: $orderBy) {\n      id\n      code\n      supplier {\n        id\n        name\n      }\n      products {\n        id\n        quantity\n        price\n        totalPrice\n        product {\n          id\n          code\n          nameEn\n          nameChi\n        }\n      }\n      expectedDeliveryAt\n      totalPrice\n      state\n    }\n  }\n"]);return Za=function(){return e},e}var et=Ie()(Za());function at(e){var a=e.onChange,t=e.defaultValue,r=e.className,c=Object(k.a)(),l=Object(Pe.b)(et,{variables:{where:{state_in:["CONFIRMED","APPROVED"]},orderBy:"updatedAt_DESC"}}),i=l.loading,u=l.data,s=n.a.useState(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],E=n.a.useState([]),b=Object(o.a)(E,2),h=b[0],f=b[1],g=i||d&&0===h.length;n.a.useEffect((function(){if(g&&u){var e=u.purchaseOrders;f(e.map((function(e){return{id:e.id,name:e.code}})))}}),[g,u]),n.a.useEffect((function(){d||f([])}),[d]);return n.a.createElement(ze.a,{className:r,id:"purchase-order-autocomplete",style:{width:300},open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,t){var r=u.purchaseOrders;a(r.find((function(e){return e.id===t.id})))},getOptionLabel:function(e){return e.name},options:h,loading:g,value:t&&{id:t.id,name:t.code},renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:c("purchaseOrder.purchaseOrder"),fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,g?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var tt=function(e){if(!e||0===e.length)return"";for(var a=e.replace(/([^a-z0-9]+)/gi,""),t=(a=a.toUpperCase()).length-1;t>=0;){if("9"===a.substr(t,1))a=a.substr(0,t)+"0"+a.substr(t+1);else if("Z"===a.substr(t,1))a=a.substr(0,t)+"A"+a.substr(t+1);else{var r=String.fromCharCode(a.charCodeAt(t)+1);a=a.substr(0,t)+r+a.substr(t+1),t=0}t--}return a},rt=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)throw new Error("invoiceNumber cannot be empty");var t=e.split(/[_/:\-;\\]+/),r=t.pop(),n=e.substr(0,e.indexOf(r)),c=Object(pe.a)(Array(a)).reduce((function(e){return tt(e)}),r);return n+c};function nt(){var e=Object(Ce.a)(["\n    mutation inWarehouse($data: [InventoryItemCreateInput!]!) {\n      inWarehouse(data: $data) {\n        id\n      }\n    }\n  "]);return nt=function(){return e},e}var ct=Object(D.a)((function(e){return{autocomplete:{width:500},poAutocomplete:{width:700}}}));function lt(){var e=Object(Ce.a)(["\n  mutation Disconnect {\n    disconnect\n  }\n"]);return lt=function(){return e},e}function ot(){var e=Object(Ce.a)(["\n  query Check {\n    checking\n  }\n"]);return ot=function(){return e},e}function it(){var e=Object(Ce.a)(["\n  mutation CreateRedirect {\n    createRedirect(data: {}) {\n      id\n      redirectUrl\n    }\n  }\n"]);return it=function(){return e},e}Ie()(it()),Ie()(ot()),Ie()(lt());var ut=function(){return n.a.createElement("div",null,n.a.createElement("h1",null,"ERP-system"))};function st(){var e=Object(Ce.a)(["\n  mutation CreateAuth($data: AuthCreateInput!) {\n    createAuth(data: $data) {\n      id\n    }\n  }\n"]);return st=function(){return e},e}Ie()(st());var mt=function(e){return e.match,e.location,n.a.createElement("div",null,"Loading...")},dt=t(149),pt=t.n(dt),Et=t(197);function bt(){var e=Object(Ce.a)(["\n  mutation transfer($data: TransferWarehouse!) {\n    transferWarehouse(data: $data) {\n      id\n    }\n  }\n"]);return bt=function(){return e},e}function ht(){var e=Object(Ce.a)(["\n  mutation deleteItem($where: DeliveryItemWhereUniqueInput!) {\n    deleteDeliveryItem(where: $where) {\n      id\n    }\n  }\n"]);return ht=function(){return e},e}function ft(){var e=Object(Ce.a)(["\n  query getItem($where: InventoryItemWhereUniqueInput!) {\n    inventoryItem(where: $where) {\n      label\n      id\n      warehouse {\n        id\n      }\n    }\n  }\n"]);return ft=function(){return e},e}var gt=Ie()(ft()),vt=Ie()(ht()),Ot=Ie()(bt());var yt=[n.a.createElement(me.b,{exact:!0,path:"/Report",component:ye}),n.a.createElement(me.b,{exact:!0,path:"/Report/quarter",component:Se}),n.a.createElement(me.b,{exact:!0,path:"/Report/annual",component:je}),n.a.createElement(me.b,{exact:!0,path:"/Inventory",component:_a}),n.a.createElement(me.b,{exact:!0,path:"/Inventory/:productId",component:ta}),n.a.createElement(me.b,{exact:!0,path:"/Inventory/editStock/:productId/",component:function(e){e.staticContext;var a=Object(I.a)(e,["staticContext"]).match.params.productId,t={stock:0,purchaseOrder:null,warehouse:null,productId:a,labelFrom:null,labelTo:null,expiryDate:"-",cost:0},c=Object(r.useState)(t),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(j.e)(),m=Object(k.a)(),d=Object(Ga.a)(),E=Ie()(nt()),b=Object(Pe.a)(E),h=Object(o.a)(b,1)[0],f=function(){var e=Object(za.a)("Product",a),t=e.data,r=e.loading,c=e.error;return r?n.a.createElement(p.a,null):c?n.a.createElement("p",null,"ERROR"):n.a.createElement("div",null,"Product :",n.a.createElement("div",null,t.nameChi))},g=ct();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Qa.a,{toolbar:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){console.log(i);for(var e=[],a=i.labelFrom,t=0;t<i.stock;t++){var r={productId:i.productId,warehouse:{connect:{id:i.warehouse.id}},purchaseOrderId:i.purchaseOrder.id,expiryDate:i.expiryDate,label:a};a=rt(a),e.push(r)}e.map((function(e){return console.log(e)})),h({variables:{data:[].concat(e)}}).then((function(e){console.log("res",e),d("Save Success.")})).catch((function(e){d("Error: ".concat(e.message),"warning")}))},style:{marginTop:20}},n.a.createElement(Xa.a,null),"\xa0Save"),redirect:function(){return"/Inventory"}},n.a.createElement(Ya.a,{container:!0,style:{height:500},alignContent:"space-around",alignItems:"flex-start"},n.a.createElement(f,null),n.a.createElement(at,{onChange:function(e){u(Object(_e.a)({},i,{purchaseOrder:e}))},defaultValue:i.purchaseOrder,className:g.poAutocomplete}),n.a.createElement(Ze,{defaultValue:i.warehouse,onChange:function(e){u(Object(_e.a)({},i,{warehouse:e}))},className:g.autocomplete}),n.a.createElement(Ge.a,{label:"ExpiryDate",type:"date",value:i.expiryDate,variant:"filled",onChange:function(e){var a=e.target.value;u(Object(_e.a)({},i,{expiryDate:a}))},InputLabelProps:{shrink:!0}}),n.a.createElement(Ge.a,{label:"Stock",type:"number",InputLabelProps:{shrink:!0},value:i.stock,onChange:function(e){var a=e.target.value;u(Object(_e.a)({},i,{stock:a}))}}),n.a.createElement(Ge.a,{label:"".concat(m("product.label")," ").concat(m("common.from")),InputLabelProps:{shrink:!0},value:i.labelFrom,onChange:function(e){var a=e.target.value.toUpperCase(),t=null;a&&a.length>0&&(t=rt(a,i.stock)),u(Object(_e.a)({},i,{labelFrom:a,labelTo:t}))}}),n.a.createElement(Ge.a,{label:"".concat(m("product.label")," ").concat(m("common.to")),InputLabelProps:{shrink:!0},value:i.labelTo,onChange:function(e){var a=e.target.value.toUpperCase();u(Object(_e.a)({},i,{labelTo:a}))}}),n.a.createElement(Ge.a,{label:"Cost",type:"number",InputLabelProps:{shrink:!0},value:i.cost,onChange:function(e){var a=e.target.value;u(Object(_e.a)({},i,{cost:a}))}})),n.a.createElement(Ja.a,null,(function(e){e.formData;return s(Ha([{url:"/Inventory",label:"Inventory"},{url:"/Inventory/editStock/".concat(a),label:"Edit Stock"}])),null}))))}}),n.a.createElement(me.b,{exact:!0,path:"/Inventory/Item/:itemId",component:ta}),n.a.createElement(me.b,{exact:!0,path:"/Inventory/Labelling",component:function(){var e=Object(k.a)(),a=fa(),t=Object(r.useState)(),c=Object(o.a)(t,2),l=c[0],i=c[1],u=Object(r.useState)(),s=Object(o.a)(u,2),m=s[0],d=s[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(A.a,{variant:"h5"},e("shipping.labelling")),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(Be.a,{alternativeLabel:!0,connector:n.a.createElement(ga,null)},n.a.createElement($e.a,{key:e("shipping.shipment")},n.a.createElement(Ve.a,{StepIconComponent:ha.a},e("shipping.label"))),n.a.createElement($e.a,{key:e("shipping.warehouse")},n.a.createElement(Ve.a,{StepIconComponent:_.a},e("shipping.warehouse"))))))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ze,{onChange:i})),n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ge.a,{label:e("shipping.labelFrom"),variant:"filled",onChange:d,fullWidth:!0})))),l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ye.a,{className:a.card},n.a.createElement(A.a,{variant:"h6"},e("shipping.unlabelledItem")),n.a.createElement(Ea,{id:l,labelFrom:m})))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},n.a.createElement(Le.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.assign")," ",e("shipping.label")))))))}}),n.a.createElement(me.b,{exact:!0,path:"/Inventory/StockDispose",component:function(){var e=Object(k.a)(),a=ua(),t=Object(r.useState)(),c=Object(o.a)(t,2),l=c[0],i=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(A.a,{variant:"h5"},e("inventory.stockDispose")),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(Be.a,{alternativeLabel:!0,connector:n.a.createElement(sa,null)},n.a.createElement($e.a,{key:e("inventory.warehouse")},n.a.createElement(Ve.a,{StepIconComponent:_.a},e("inventory.warehouse")," ",e("common.from"))),n.a.createElement($e.a,{key:e("inventory.trash")},n.a.createElement(Ve.a,{StepIconComponent:ia.a},e("inventory.trash"))))))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ze,{onChange:i,label:e("inventory.warehouse")+" "+e("common.from")})))),l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em"},n.a.createElement(Ye.a,{className:a.card},n.a.createElement(A.a,{variant:"h6"},e("inventory.productItem")),n.a.createElement(la,{id:l})))),n.a.createElement(Ye.a,{className:a.card},n.a.createElement(De.a,{display:"flex"},n.a.createElement(De.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},n.a.createElement(Le.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.transfer")))))))}}),n.a.createElement(me.b,{exact:!0,path:"/Xero",component:ut}),n.a.createElement(me.b,{exact:!0,path:"/Callback",component:mt}),n.a.createElement(me.b,{exact:!0,path:"/DeliveryItem/:deliveryNoteId/delete",component:function(e){var a=Object(k.a)(),t=Object(Ga.a)(),c=Object(r.useState)(),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(Pe.a)(vt),m=Object(o.a)(s,1)[0],d=Object(Pe.a)(Ot),p=Object(o.a)(d,1)[0],E=e.location.state.record,b=Object(Pe.b)(gt,{variables:{where:{id:E.item.id}}}),h=b.loading,f=b.data,g=Object(me.g)(),v=f&&f.inventoryItem;if(console.log(E),console.log(v),h)return n.a.createElement("h1",null,"Loading...");var O=function(){var e=Object(Et.a)(pt.a.mark((function e(){return pt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({variables:{where:{id:E.id}}});case 3:return e.next=5,p({variables:{data:{toWarehouseId:i.id,inventoryItemIds:[v.id],fromWarehouseIds:[v.warehouse.id]}}}).then((function(e){console.log("res",e),t("Save Success."),g.go(-1)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t("Error: ".concat(e.t0.message),"warning");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(Ae.a,null,n.a.createElement(Ya.a,{container:!0,direction:"column",justify:"space-between",style:{height:300,padding:10}},n.a.createElement("h1",null,"Delete Deliery Item"),n.a.createElement(Ya.a,{item:!0},n.a.createElement(Ge.a,{id:"id",label:"Delivery Item",variant:"filled",defaultValue:v.label,disabled:!0})),n.a.createElement(Ya.a,{xs:4,item:!0},n.a.createElement(Ze,{onChange:u,label:a("inventory.warehouse")+" "+a("common.from"),where:{where:{name_not_in:" "}}})),n.a.createElement(Ya.a,{item:!0},n.a.createElement(Le.a,{variant:"contained",color:"primary",onClick:O},"Save"))))}})],St=t(123),jt=t(380),Dt=t(512),Ct=t(748),Pt=function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e.rawFile),r.onload=function(){return a(r.result)},r.onerror=t}))},xt=new Dt.HttpLink({uri:"http://35.232.67.13:4000/"}),It=new St.ApolloClient({link:xt,cache:new jt.InMemoryCache,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),wt=new St.ApolloClient(It),Nt=function(){var e=Object(Et.a)(pt.a.mark((function e(){var a;return pt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ct.a)({client:wt});case 3:return a=e.sent,e.abrupt("return",(function(e,t,r){if("Product"!==t||!r.data||!r.data.images||0===r.data.images.length)return a(e,t,r);if("UPDATE"===e){delete r.data.imagesIds;var n=r.data.images.filter((function(e){return e.rawFile instanceof File})),c=r.data.images.filter((function(e){return!(e.rawFile instanceof File)}));return Promise.all(n.map(Pt)).then((function(e){return e.map((function(e){return{src:e,title:"".concat(r.data.name," (").concat(r.data.code,")")}}))})).then((function(e){return a("UPDATE",t,Object(_e.a)({},r,{data:Object(_e.a)({},r.data,{images:[].concat(Object(pe.a)(c),Object(pe.a)(e))})}))}))}if("CREATE"===e){var l=r.data.images.filter((function(e){return e.rawFile instanceof File}));return Promise.all(l.map(Pt)).then((function(e){return e.map((function(e){return{src:e,title:"".concat(r.data.name," (").concat(r.data.code,")")}}))})).then((function(e){return a("CREATE",t,Object(_e.a)({},r,{data:Object(_e.a)({},r.data,{images:e})}))}))}return a(e,t,r)}));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function kt(){var e=Object(Ce.a)(["\n  query users($where: UserWhereInput) {\n    users(where: $where) {\n      id\n      name\n      password\n      permission\n      group {\n        id\n        name\n      }\n    }\n  }\n"]);return kt=function(){return e},e}var Tt=Ie()(kt()),Ft={login:function(){var e=Object(Et.a)(pt.a.mark((function e(a){var t,r,n,c;return pt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username,r=a.password,e.next=3,wt.query({query:Tt,variables:{where:{AND:[{name:t},{password:r}]}}});case 3:if(n=e.sent,c=n.data.users[0],0!==n.data.users.length){e.next=7;break}throw new Error("Login Error");case 7:return localStorage.setItem("token",c.name),localStorage.setItem("permissions",c.permission.toLowerCase()),localStorage.setItem("group",JSON.stringify({name:c.group.name,id:c.group.id})),e.abrupt("return",Promise.resolve(c));case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("permissions"),localStorage.removeItem("group"),Promise.resolve()},checkAuth:function(){return console.log("checkAuth",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){console.log("checkError",e);var a=e.status;return 401===a||403===a?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},At=t(1231),Wt=t(708),Rt=t(1232),Mt=t(1218),qt=t(1125),Yt=t(1182),Lt=t(1233),Bt=t(1183),Ht=function(){return"/Warehouse"},Kt={url:"/Warehouse",label:"Warehouse"},$t=function(e){return Object(j.e)()(Ha([Kt,{url:"/Warehouse/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Ht},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"description"}),n.a.createElement(xa.a,{source:"address"}),n.a.createElement(Rt.a,{source:"type",choices:[{id:"NORMAL",name:"Normal"},{id:"TEMPORARY",name:"Temporary"}]})))},Vt=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Ht},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"description"}),n.a.createElement(xa.a,{source:"address"}),n.a.createElement(Rt.a,{source:"type",choices:[{id:"NORMAL",name:"Normal"},{id:"TEMPORARY",name:"Temporary"}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([Kt,{url:"/Warehouse/".concat(t.id),label:"Edit: ".concat(t.name)}])),null}))))},Ut=function(e){return Object(j.e)()(Ha([Kt])),n.a.createElement(wa.a,e,n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Ta.a,{source:"description"}),n.a.createElement(Ta.a,{source:"type"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},_t=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.name:"",c=t.record?t.record.id:"";return a(Ha([Kt,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(r)}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"id"}),n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Ta.a,{source:"description"}),n.a.createElement(Ta.a,{source:"address"}),n.a.createElement(Ta.a,{source:"type"})))}))},Gt=t(1184),zt=t(1185),Qt=function(){return"/Supplier"},Jt={url:"/Supplier",label:"Supplier"},Xt=function(e){return Object(j.e)()(Ha([Jt,{url:"/Supplier/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Qt},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"email",validate:Object(Wt.b)()}),n.a.createElement(xa.a,{source:"country"}),n.a.createElement(xa.a,{source:"phone"}),n.a.createElement(xa.a,{source:"fax"}),n.a.createElement(xa.a,{multiline:!0,source:"paymentTerms"}),n.a.createElement(xa.a,{multiline:!0,source:"creditLine"})))},Zt=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Qt},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"email",validate:Object(Wt.b)()}),n.a.createElement(xa.a,{source:"country"}),n.a.createElement(xa.a,{source:"phone"}),n.a.createElement(xa.a,{source:"fax"}),n.a.createElement(xa.a,{source:"paymentTerms"}),n.a.createElement(xa.a,{source:"creditLine"}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([Jt,{url:"/Supplier/".concat(t.id),label:"Edit: ".concat(t.name)}])),null}))))},er=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.name:"",c=t.record?t.record.id:"";return a(Ha([Jt,{url:"/Supplier/".concat(c,"/show"),label:"Details: ".concat(r)}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Gt.a,{source:"email"}),n.a.createElement(Ta.a,{source:"country"}),n.a.createElement(Ta.a,{source:"phone"}),n.a.createElement(Ta.a,{source:"fax"}),n.a.createElement(Ta.a,{source:"paymentTerms"}),n.a.createElement(Ta.a,{source:"creditLine"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))},ar=function(e){return Object(j.e)()(Ha([Jt])),n.a.createElement(wa.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Gt.a,{source:"email"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},tr=t(1219),rr=t(1187),nr=t(1188),cr=(t(1189),function(){return"/ReceivePayment"}),lr={url:"/ReceivePayment",label:"Receive Payment"},or=function(e){return Object(j.e)()(Ha([lr,{url:"/ReceivePayment/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{redirect:cr},n.a.createElement(tr.a,{label:"Invoice",source:"invoiceId",reference:"Invoice",sort:{field:"createdAt",order:"DESC"}},n.a.createElement(rr.a,{optionText:"code",label:"Receive Payment No."})),n.a.createElement(rr.a,{source:"paymentMethod",validate:Object(Wt.c)(),choices:[{id:"COD",name:"Cash on Delivery"},{id:"CREDIT",name:"Credit"},{id:"DEBIT",name:"Debit"}]}),n.a.createElement(nr.a,{source:"paidAt",validate:Object(Wt.c)()})))},ir=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.id:"";return a(Ha([lr,{url:"/CustomerGroup/".concat(r,"/show"),label:"Details: ".concat("Details")}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Invoice",reference:"Invoice",source:"invoice.id"},n.a.createElement(Ta.a,{source:"code",label:"Receive Payment No."})),n.a.createElement(zt.a,{source:"paidAt"}),n.a.createElement(Ta.a,{source:"paymentMethod"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))},ur=function(e){return Object(j.e)()(Ha([lr])),n.a.createElement(wa.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(ka.a,{label:"Invoice",reference:"Invoice",source:"invoice.id"},n.a.createElement(Ta.a,{source:"code",label:"Receive Payment No."})),n.a.createElement(zt.a,{source:"paidAt"}),n.a.createElement(Ta.a,{source:"paymentMethod"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(qt.a,null)))},sr=t(1179),mr=t(1120),dr=t(1123),pr=t(1217),Er=t(720),br=t(46),hr=t(1234),fr=t(1190),gr=be()((function(e){return{label:{padding:e.spacing(1),paddingBottom:0,color:e.palette.text.hint},text:{padding:e.spacing(1),paddingTop:0,color:e.palette.text.primary}}}));var vr=function(e){var a=e.label,t=e.children,r=gr();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:r.label},n.a.createElement(A.a,{variant:"caption"},a)),n.a.createElement("div",{className:r.text},n.a.createElement(A.a,{variant:"inherit"},t)))},Or=t(436),yr=t(771),Sr=t(536),jr=t(317);var Dr=function(e){e.formProps;var a=Object(k.a)(),t=function(e,t){e.invoiceId;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},n.a.createElement(fr.a,{source:"salesOrder.id",reference:"SalesOrder",record:e,link:!1},(function(e){var a=e.referenceRecord;return n.a.createElement(rr.a,{fullWidth:!0,defaultValue:a&&a.id,disabled:!0,choices:a&&[{id:a.id,name:a.code}],source:"salesOrderId"})})))),e.salesOrderId&&function(e){return n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:e,link:!1},n.a.createElement(fr.a,{source:"shop.id",reference:"CustomerShop",record:e,link:!1},(function(e){var a=e.referenceRecord;return n.a.createElement(rr.a,{fullWidth:!0,choices:a&&[{id:a.id,name:"".concat(a.nameChi," (").concat(a.code,")")}],defaultValue:a&&a.id,disabled:!0,source:"customerId"})}))))}(e),e.customerId&&n.a.createElement(br.a,{name:"state"},(function(e){var t=e.input,r=t.value,c=(t.name,t.onChange);r||c("SENT");var l=function(e){c(e)};return n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(jr.a,{variant:"filled",fullWidth:!0},n.a.createElement(Sr.a,{id:"form-state"},a("salesOrder.state")),n.a.createElement(yr.a,{label:"form-state",onChange:function(e){return l(e.target.value)},title:"Status",defaultValue:"SENT"},[{id:"SENT",name:"SENT"},{id:"PICKED",name:"PICKED"},{id:"PACKED",name:"PACKED"},{id:"DELIVERED",name:"DELIVERED"}].map((function(e){return n.a.createElement(Or.a,{key:"DN".concat(e.id),value:e.id},e.name)})))))})),e.customerId&&function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:a("invoice.totalPrice")},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:a("invoice.state")},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},n.a.createElement(Ta.a,{source:"state"})))),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:e,link:!1},n.a.createElement(hr.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{source:"price",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))}(e))};return n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(tr.a,{label:"Select Invoice",source:"invoiceId",reference:"Invoice",resource:"DeliveryNote",validate:Object(Wt.c)(),filterToQuery:function(e){return{code_contains:e}},sort:{field:"createdAt",order:"DESC"}},n.a.createElement(rr.a,{optionText:"code",fullWidth:!0,label:"Invoice No."}))),n.a.createElement(Ja.a,{subscription:{values:!0}},(function(e){var a=e.formData;Object(I.a)(e,["formData"]);return a.invoiceId&&t(a)})))};function Cr(){var e=Object(Ce.a)(["\n  query inventoryItems($where: InventoryItemWhereInput) {\n    inventoryItems(where: $where, first: 10) {\n      id\n      label\n      expiryDate\n      product {\n        id\n        code\n        nameEn\n        nameChi\n      }\n    }\n  }\n"]);return Cr=function(){return e},e}var Pr=Ie()(Cr());function xr(e){var a=e.onChange,t=e.defaultValue,c=e.products;console.log(c.map((function(e){return e.product.id})));var l=Object(r.useState)(""),i=Object(o.a)(l,2),u=i[0],s=i[1],m=(Object(k.a)(),Object(Pe.b)(Pr,{variables:{where:{label_contains:u,productId_in:c.map((function(e){return e.product.id})),warehouse:{name_not:"OUT"}}}})),d=m.loading,p=m.data,E=n.a.useState(!1),b=Object(o.a)(E,2),h=b[0],f=b[1],g=n.a.useState([]),v=Object(o.a)(g,2),O=v[0],y=v[1],S=d||h&&0===O.length;n.a.useEffect((function(){if(S&&p){console.log("get!!!!data",p);var e=p.inventoryItems;e.filter((function(e){return c.map((function(e){return e.product.code})).includes(e.product.code)}));y(e.map((function(e){return{id:e.id,name:"(".concat(e.label," - ").concat(e.product.code,"-").concat(e.product.nameChi," ")}})))}}),[S,p]),n.a.useEffect((function(){h||y([])}),[h]);return n.a.createElement(ze.a,{id:"purchase-order-autocomplete",autoSelect:!0,autoComplete:!0,autoHighlight:!0,open:h,onOpen:function(){f(!0)},onClose:function(){f(!1)},onChange:function(e,t){var r=p.inventoryItems;t&&(a(r.find((function(e){return e.id===t.id}))),s(""))},onInputChange:function(e,a){s(a)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e){return e.id},options:O,loading:S,value:t&&{id:t.id,name:t.code},renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:"Search by label...",fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,S?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}function Ir(){var e=Object(Ce.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where, first: 20) {\n      id\n      label\n      expiryDate\n      product {\n        id\n        code\n        nameChi\n        nameEn\n      }\n      warehouse {\n        name\n      }\n    }\n  }\n"]);return Ir=function(){return e},e}function wr(){var e=Object(Ce.a)(["\n  query products($where: ProductWhereInput!) {\n    products(where: $where) {\n      id\n    }\n  }\n"]);return wr=function(){return e},e}function Nr(){var e=Object(Ce.a)(["\n  query products($where: ProductWhereInput) {\n    products(where: $where) {\n      id\n      code\n      nameChi\n      nameEn\n      inventoryItems {\n        id\n        label\n        expiryDate\n        product {\n          id\n          code\n          nameChi\n          nameEn\n        }\n        warehouse {\n          name\n        }\n      }\n    }\n  }\n"]);return Nr=function(){return e},e}Ie()(Nr());var kr=Ie()(wr()),Tr=Ie()(Ir());function Fr(e){var a=e.onChange,t=e.value,c=e.productIds,l=Object(r.useState)(""),i=Object(o.a)(l,2),s=i[0],m=i[1],d=Object(r.useState)(""),p=Object(o.a)(d,2),E=(p[0],p[1],Object(Pe.b)(kr,{variables:{where:{id_in:c,code_contains:s}},onCompleted:function(e){f({variables:{where:{productId_in:e.products.length>=1?e.products[0].id:""}}})}})),b=(E.loading,E.productData,Object(u.useLazyQuery)(Tr,{onCompleted:function(e){var a=(e?e.inventoryItems:[]).filter((function(e){return"OUT"!==e.warehouse.name})).reduce((function(e,a){return e=[].concat(Object(pe.a)(e),[{id:"".concat(a.product.id,"-").concat(a.id),name:"".concat(a.product.code,"-").concat(a.product.nameChi," (").concat(a.label||"No Label",")")}])}),[]);I(a)}})),h=Object(o.a)(b,2),f=h[0],g=h[1],v=g.loading,O=g.data,y=n.a.useState(!1),S=Object(o.a)(y,2),j=S[0],D=S[1],C=n.a.useState([]),P=Object(o.a)(C,2),x=P[0],I=P[1],w=v||j&&0===x.length;n.a.useEffect((function(){j||I([])}),[j]);return n.a.createElement(ze.a,{id:"product-autocomplete",open:j,onOpen:function(){D(!0)},onClose:function(){D(!1)},onChange:function(e,t){var r=t?t.id.split("-"):[],n=Object(o.a)(r,2),c=(n[0],n[1]),l=O.inventoryItems;l&&(a(l.find((function(e){return e.id===c}))),m(""))},onInputChange:function(e,a){m(a)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e){return e.id},options:x,loading:w,value:t,renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:"Search by product code...",fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,w?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var Ar=t(770);t(1073);function Wr(){var e=Object(Ce.a)(["\n  query invoice($where: InvoiceWhereUniqueInput!) {\n    invoice(where: $where) {\n      salesOrder {\n        id\n        products {\n          id\n          quantity\n          product {\n            id\n            code\n            nameChi\n            nameEn\n          }\n        }\n      }\n    }\n  }\n"]);return Wr=function(){return e},e}var Rr=Ie()(Wr()),Mr=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t,c=(e.label,e.onDelete);return n.a.createElement(n.a.Fragment,null,r[a]&&r[a].map((function(e){return n.a.createElement(Ar.a,{key:"chip-".concat(e.itemId),label:"".concat(e.label||"No label"),onDelete:function(){return c(e)},color:"primary"})})))},qr=function(){return n.a.createElement(br.a,{name:"items"},(function(e){var a=e.input,t=Object(k.a)(),r=a.value,c=(a.name,a.onChange);r||c([]);var l=function(e){r.map((function(e){return e.itemId})).includes(e.id)||c([].concat(Object(pe.a)(r),[{itemId:e.id,productId:e.product.id,productCode:e.product.code,productNameEn:e.product.nameEn,productNameChi:e.product.nameChi,label:e.label,expiryDate:e.expiryDate,boxNum:1}]))},o=function(e){c(r.filter((function(a){return a.itemId!==e.itemId})))};return n.a.createElement(Ja.a,{subscription:{values:!0}},(function(e){var a=e.formData;console.log("formData",a);var r=a.invoiceId,c=a.items,i=Object(Ga.a)(),u=Object(Pe.b)(Rr,{variables:{where:{id:r}}}).data,s=u?u.invoice.salesOrder.products:[];console.log("fetching date here:",s);var m=s.reduce((function(e,a){var t=a.product,r=Object(I.a)(a,["product"]);return e[t.id]=Object(_e.a)({},t,{},r),e}),{});return c.forEach((function(e){var a=e.productId;if(m[a]){var t=m[a].selected||[];m[a].selected=[].concat(Object(pe.a)(t),[e]),m[a].selectedNum=m[a].selected.length}else i("deliveryNote.noNeedThisProduct","info")})),n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:6},n.a.createElement(vr,{label:t("common.addNew")},n.a.createElement(xr,{onChange:l,placeholder:"search by label...",products:s}))),n.a.createElement(Ya.a,{item:!0,xs:6,style:{marginTop:29}},n.a.createElement(Fr,{onChange:l,placeholder:"search by product no...",productIds:Object.keys(m)})),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(Na.a,{data:m,ids:Object.keys(m),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},n.a.createElement(Ta.a,{source:"code",label:"Delivery Note No."}),n.a.createElement(Wa,{source:"name"}),n.a.createElement(Fa.a,{source:"quantity"}),n.a.createElement(Mr,{source:"selected",onDelete:o}),n.a.createElement(Fa.a,{source:"selectedNum",label:"Selected quantity"}))))}))}))},Yr=t(200),Lr=t.n(Yr),Br=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t,c=(e.label,e.onChange),l=e.maxBox,o=r[a];return n.a.createElement(jr.a,null,n.a.createElement(Sr.a,{id:"demo-simple-select-label"},"Box"),n.a.createElement(yr.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,onChange:function(e){c(e.target.value,r.itemId)}},Lr()(l+1).map((function(e){return n.a.createElement(Or.a,{key:"option-".concat(r.itemId,"-").concat(e+1),value:e+1},"Box ",e+1)}))))},Hr=function(){var e=Object(r.useState)(1),a=Object(o.a)(e,2),t=a[0],c=a[1];return n.a.createElement(br.a,{name:"items"},(function(e){var a=e.input,r=(Object(k.a)(),a.value),l=(a.name,a.onChange);console.log("value in box form",r);var o=r.reduce((function(e,a){return e[a.itemId]=a,e}),{});return n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(Na.a,{data:o,ids:Object.keys(o),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},n.a.createElement(Ta.a,{source:"productCode"}),n.a.createElement(Wa,{source:"productName"}),n.a.createElement(Fa.a,{source:"label"}),n.a.createElement(Br,{source:"boxNum",onChange:function(e,a){r.find((function(e){return e.itemId===a})).boxNum=e,l(Object(pe.a)(r)),e>t&&c(e)},maxBox:t}))))}))};var Kr=function(e){var a=e.formProps,t=Object(k.a)();return console.log(a),n.a.createElement(Ja.a,{subscription:{values:!0}},(function(e){var a=e.formData,r=(a.invoiceId,a.salesOrderId,a.customerId,a.items,a.items.reduce((function(e,a){return e[a.itemId]=a,e}),{}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:6},n.a.createElement(vr,{label:t("customer.shippingAddress")},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(Ta.a,{source:"deliverAddress"})))),n.a.createElement(vr,{label:"Attn."},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:a,link:!1},n.a.createElement(Ta.a,{source:"nameChi"}))))),n.a.createElement(vr,{label:"Tel.."},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:a,link:!1},n.a.createElement(Ta.a,{source:"mobile"}))))),n.a.createElement(vr,{label:t("customer.billingAddress")},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:a,link:!1},n.a.createElement(Ta.a,{source:"billingAddress"}))))),n.a.createElement(vr,{label:"Attn."},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:a,link:!1},n.a.createElement(Ta.a,{source:"nameChi"}))))),n.a.createElement(vr,{label:"Tel.."},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:a,link:!1},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:a,link:!1},n.a.createElement(Ta.a,{source:"mobile"})))))),n.a.createElement(Ya.a,{item:!0,xs:6},n.a.createElement(vr,{label:t("common.date")},ja()().format("YYYY-MM-DD")),n.a.createElement(vr,{label:"Ref."},n.a.createElement(ka.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:a,link:!1},n.a.createElement(Ta.a,{source:"code",label:"Delivery Note No."}))),n.a.createElement(vr,{label:t("deliveryNote.deliveryDate")},n.a.createElement(Ta.a,{source:"deliveryDate",record:a})),n.a.createElement(vr,{label:t("common.salesman")},"Jacky Lee")),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(Na.a,{data:r,ids:Object.keys(r),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},n.a.createElement(Ta.a,{source:"productCode"}),n.a.createElement(Wa,{source:"productName"}),n.a.createElement(Fa.a,{source:"label"}),n.a.createElement(zt.a,{source:"expiryDate"}),n.a.createElement(Ta.a,{label:"Box Num",source:"boxNum"})))))}))};function $r(){var e=Object(Ce.a)(["\n  query getInvoice($id: ID!) {\n    invoice(where: { id: $id }) {\n      code\n    }\n  }\n"]);return $r=function(){return e},e}var Vr=be()((function(e){return{layout:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},stepper:{padding:e.spacing(3,0,5)}}})),Ur=Ie()($r()),_r=function(e){var a=Object(sr.a)("DeliveryNote"),t=Object(o.a)(a,1)[0],c=Object(mr.a)(),l=Object(Ga.a)(),i=Object(br.f)(),u=e.basePath,s=e.redirect,m=Object(Pe.b)(Ur,{variables:{id:i.values.invoiceId}}),d=(m.loading,m.data),p=Object(r.useCallback)((function(){var e=i.values,a=e.items,r=Object(I.a)(e,["items"]);console.log(d.invoice.code),t({payload:{data:Object(_e.a)({},r,{code:"DN-".concat(d.invoice.code),items:a.map((function(e){return{productId:e.productId,itemId:e.itemId,boxNum:e.boxNum}}))})}},{onSuccess:function(e){var a=e.data;l("ra.notification.created","info",{smart_count:1}),c(s,u,a.id,a)},onFailure:function(e){return l("Error: ".concat(e.message),"warning")}})}),[t,l,c,u,i,s]);return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:p}))},Gr=function(e){var a=Object(j.e)(),t=Object(k.a)(),c=Vr(),l=(Object(me.g)(),Object(r.useState)(0)),i=Object(o.a)(l,2),u=i[0],s=i[1];a(Ha([{url:"/DeliveryNote",label:"Delivery Note"},{url:"/DeliveryNote/create",label:"Create New"}]));var m=[t("deliveryNote.selectInvoice"),t("deliveryNote.quantityCheck"),t("deliveryNote.packingBox"),t("deliveryNote.review")],d=function(){s(u+1)},p=function(){s(u-1)};return n.a.createElement(pr.a,Object.assign({},e,{render:function(e){return n.a.createElement("form",null,n.a.createElement("main",{className:c.layout},n.a.createElement(Ae.a,{className:c.paper},n.a.createElement(Be.a,{activeStep:u,className:c.stepper},m.map((function(e){return n.a.createElement($e.a,{key:e},n.a.createElement(Ve.a,null,e))}))),n.a.createElement(n.a.Fragment,null,0===u&&n.a.createElement(Dr,{formProps:e}),1===u&&n.a.createElement(qr,{formProps:e}),2===u&&n.a.createElement(Hr,{formProps:e}),3===u&&n.a.createElement(Kr,{formProps:e}),n.a.createElement(Er.a,null,n.a.createElement(De.a,{display:"flex",justifyContent:"flex-end",width:"100%"},u>0&&n.a.createElement(Le.a,{onClick:p,color:"primary"},t("common.prev")),u<m.length-1&&n.a.createElement(Le.a,{onClick:d,color:"primary"},t("common.next")),n.a.createElement(_r,{disabled:u!==m.length-1,basePath:"/DeliveryNote",redirect:"/DeliveryNote"})))))))}}))},zr=t(1224),Qr=t(1191),Jr=t(1192),Xr=t(1193),Zr=t(1194),en=t(216),an=t.n(en),tn=(t(503),t(421)),rn=t.n(tn);function nn(e){for(var a=e.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g," ").split(" "),t=0;t<a.length;t++)a[t]=a[t].charAt(0).toUpperCase()+a[t].substring(1);return a.join(" ")}var cn=function(e){return function(){var a=ja()(),t=new rn.a("EN_US"),r=[],n=new an.a("p","pt");n.page=1;var c=n.internal.pageSize.getWidth(),l=n.internal.pageSize.getHeight(),o={beforePageContent:function(){var t=n.internal.getNumberOfPages().toString();"function"===typeof n.putTotalPages&&(t+=" of {total_pages_count_string}"),n.setFontSize(23),n.setFontStyle("bold"),n.text(c-200,50,"Sales Contract"),n.setFontSize(10),n.setFontStyle("bold"),n.text(50,100,"Bill To:"),n.setFontStyle("normal"),n.text(100,100,e.salesOrder.shop.nameEn),n.text(100,115,e.salesOrder.shop.deliverAddress),n.text(100,130,""),n.text(100,145,""),n.setFontStyle("bold"),n.text(50,165,"Attn:"),n.setFontStyle("normal"),n.text(100,165,e.salesOrder.shop.customer.nameEn),n.setFontStyle("bold"),n.text(50,180,"Tel:"),n.setFontStyle("normal"),n.text(100,180,e.salesOrder.shop.phone?e.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(200,180,"Fax:"),n.setFontStyle("normal"),n.text(250,180,e.salesOrder.shop.phone?e.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(350,100,"Date:"),n.setFontStyle("normal"),n.text(410,100,a.format("DD/MMM/YYYY")),n.setFontStyle("bold"),n.text(350,115,"REF. No.:"),n.setFontStyle("normal"),n.text(410,115,e.salesOrder.code),n.setFontStyle("bold"),n.text(350,130,"Cust. ID:"),n.setFontStyle("normal"),n.text(410,130,e.salesOrder.shop.customer.code),n.setFontStyle("bold"),n.text(350,145,"Pay term:"),n.setFontStyle("normal"),n.text(410,145,""),n.setFontStyle("bold"),n.text(350,160,"Ship Date:"),n.setFontStyle("normal"),n.text(410,160,ja()(e.salesOrder.shippingDate).format("DD/MMM/YYYY")),n.setFontStyle("bold"),n.text(350,175,"Salesman:"),n.setFontStyle("normal"),n.text(410,175,""),n.setFontStyle("bold"),n.text(350,190,"Page:"),n.setFontStyle("normal"),n.text(410,190,t),n.setLineWidth(1.5),n.setDrawColor(0,0,0),n.line(50,200,c-50,200),n.line(50,220,c-50,220)},afterPageContent:function(){n.setFontSize(7),n.text(c-40,l-30,"Page - "+n.page),n.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},qty:{columnWidth:30},price:{columnWidth:40},amount:{columnWidth:50,halign:"right"}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:200,bottom:100,horizontal:50}};if(e.salesOrder.products.map((function(e,a){var t={count:a+1,no:e.product.code,des:e.product.nameEn,qty:e.quantity,price:e.price,amount:e.totalPrice};r.push(t)})),n.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"qty",header:"Qty"},{dataKey:"price",header:"Price"},{dataKey:"amount",header:"Amount"}],r,o),n.setFontSize(10),n.setFontStyle("normal"),n.text(412,n.autoTable.previous.finalY+12,"Sub-total :"),n.text(c-53-5*e.salesOrder.subtotal.toFixed(1).toString().length,n.autoTable.previous.finalY+12,e.salesOrder.subtotal.toFixed(1).toString()),n.text(376,n.autoTable.previous.finalY+27,"Discount Amount :"),n.text(c-47-5*(e.salesOrder.discountAmount.toFixed(1).toString().length+1),n.autoTable.previous.finalY+27,e.salesOrder.discountAmount.toFixed(1).toString()),n.text(400,n.autoTable.previous.finalY+47,"Grand Total :"),n.text(c-53-5*e.salesOrder.grandTotal.toFixed(1).toString().length,n.autoTable.previous.finalY+47,e.salesOrder.grandTotal.toFixed(1).toString()),e.salesOrder.grandTotal===parseInt(e.salesOrder.grandTotal,10))n.text(50,n.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+nn(t.toWords(e.salesOrder.grandTotal))+" ONLY.");else{var i=e.salesOrder.grandTotal.toFixed(1).toString().split(".");n.text(50,n.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+nn(t.toWords(parseInt(i[0])))+" And "+nn(t.toWords(parseInt(10*i[1])))+" CENTS ONLY.")}n.setFontStyle("bold"),n.text(50,n.autoTable.previous.finalY+87,"Shipterm :"),n.setFontStyle("normal"),n.text(100,n.autoTable.previous.finalY+87,"Standard Delivery"),n.setFontStyle("bold"),n.text(50,n.autoTable.previous.finalY+105,"REMARKS :"),n.setFontStyle("normal"),n.text(115,n.autoTable.previous.finalY+105,"The sales order only valid for 7 days."),n.setFontSize(8),n.text(350,n.autoTable.previous.finalY+120,"RECEIVED THE ABOVE IN GOOD CONDITIONS :"),n.line(350,n.autoTable.previous.finalY+190,c-50,n.autoTable.previous.finalY+190),n.text(350,n.autoTable.previous.finalY+200,"COMPANY CHOP & AUTHORIZED SIGNATURE :"),n.setLineWidth(1),n.setDrawColor(0,0,0),n.line(455,n.autoTable.previous.finalY,c-50,n.autoTable.previous.finalY),n.line(455,n.autoTable.previous.finalY+33,c-50,n.autoTable.previous.finalY+33),n.line(455,n.autoTable.previous.finalY+50,c-50,n.autoTable.previous.finalY+50),n.line(455,n.autoTable.previous.finalY+52,c-50,n.autoTable.previous.finalY+52),n.setLineWidth(1.5),n.setDrawColor(0,0,0),n.line(50,n.autoTable.previous.finalY+76,c-50,n.autoTable.previous.finalY+76),n.line(50,n.autoTable.previous.finalY+91,c-50,n.autoTable.previous.finalY+91),"function"===typeof n.putTotalPages&&n.putTotalPages("{total_pages_count_string}"),n.save("SalesContract.pdf")}},ln=t(70),on=t.n(ln),un=function(e){var a=e.deliveryNote;return function(){var e=ja()(),t=[],r=new an.a("p","pt");r.page=1;var n=r.internal.pageSize.getWidth(),c=r.internal.pageSize.getHeight(),l={beforePageContent:function(){var t=r.internal.getNumberOfPages().toString();"function"===typeof r.putTotalPages&&(t+=" of {total_pages_count_string}"),r.setFontSize(23),r.setFontStyle("bold"),r.text(n-250,50,"DELIVERY NOTE"),r.setFontSize(10),r.setFontStyle("bold"),r.text(50,80,"Ship To:"),r.setFontStyle("normal"),r.text(100,80,a.salesOrder.shop.nameEn),r.text(100,95,a.salesOrder.shop.deliverAddress),r.text(100,110,""),r.text(100,125,""),r.setFontStyle("bold"),r.text(50,145,"Attn:"),r.setFontStyle("normal"),r.text(100,145,a.salesOrder.shop.customer.nameEn),r.setFontStyle("bold"),r.text(50,160,"Tel:"),r.setFontStyle("normal"),r.text(100,160,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(200,160,"Fax:"),r.setFontStyle("normal"),r.text(250,160,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(50,180,"Bill To:"),r.setFontStyle("normal"),r.text(100,180,a.salesOrder.shop.nameEn),r.text(100,195,a.salesOrder.shop.deliverAddress),r.text(100,210,""),r.text(100,225,""),r.setFontStyle("bold"),r.text(50,245,"Attn:"),r.setFontStyle("normal"),r.text(100,245,a.salesOrder.shop.customer.nameEn),r.setFontStyle("bold"),r.text(50,260,"Tel:"),r.setFontStyle("normal"),r.text(100,260,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(200,260,"Fax:"),r.setFontStyle("normal"),r.text(250,260,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(350,100,"Date:"),r.setFontStyle("normal"),r.text(410,100,e.format("DD/MMM/YYYY")),r.setFontStyle("bold"),r.text(350,115,"REF. No.:"),r.setFontStyle("normal"),r.text(410,115,a.code),r.setFontStyle("bold"),r.text(350,130,"Cust. ID:"),r.setFontStyle("normal"),r.text(410,130,a.salesOrder.shop.customer.code),r.setFontStyle("bold"),r.text(350,145,"Pay term:"),r.setFontStyle("normal"),r.text(410,145,""),r.setFontStyle("bold"),r.text(350,160,"Ship Date:"),r.setFontStyle("normal"),r.text(410,160,ja()(a.invoice.shipmentDate).format("DD/MMM/YYYY")),r.setFontStyle("bold"),r.text(350,175,"Salesman:"),r.setFontStyle("normal"),r.text(410,175,""),r.setFontStyle("bold"),r.text(350,190,"Page:"),r.setFontStyle("normal"),r.text(410,190,t),r.setLineWidth(1.5),r.setDrawColor(0,0,0),r.line(50,270,n-50,270),r.line(50,290,n-50,290)},afterPageContent:function(){r.setFontSize(7),r.text(n-40,c-30,"Page - "+r.page),r.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},exDate:{columnWidth:80},qty:{columnWidth:40}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:270,bottom:100,horizontal:50}},o=on.a.groupBy(a.items,"product.code");Object.values(o).map((function(a){var t=a.reduce((function(a,t){var r=ja()(a.item.expiryDate),n=ja()(t.item.expiryDate);return Math.abs(n-e)<Math.abs(r-e)?t:a}));return t.qty=a.length,t})).map((function(e,a){var r={count:a+1,no:e.product.code,des:e.product.nameEn,qty:e.qty,exDate:ja()(e.item.expiryDate).format("DD/MMM/YYYY")};t.push(r)})),console.log("data_json",t),r.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"exDate",header:"Expiry Date"},{dataKey:"qty",header:"Qty"}],t,l),r.setFontSize(10),r.setFontStyle("normal"),r.setFontSize(8),r.text(350,r.autoTable.previous.finalY+40,"RECEIVED THE ABOVE IN GOOD CONDITIONS :"),r.line(350,r.autoTable.previous.finalY+110,n-50,r.autoTable.previous.finalY+110),r.text(350,r.autoTable.previous.finalY+120,"COMPANY CHOP & AUTHORIZED SIGNATURE :"),r.setLineWidth(1.5),r.setDrawColor(0,0,0),r.line(50,r.autoTable.previous.finalY+6,n-50,r.autoTable.previous.finalY+6),r.line(50,r.autoTable.previous.finalY+21,n-50,r.autoTable.previous.finalY+21),"function"===typeof r.putTotalPages&&r.putTotalPages("{total_pages_count_string}"),r.save("Delivery Note.pdf")}};function sn(){var e=Object(Ce.a)(["\n  query deliveryNote($where: DeliveryNoteWhereUniqueInput!) {\n    deliveryNote(where: $where) {\n      id\n      code\n      invoice {\n        shipmentDate\n      }\n      items {\n        product {\n          code\n          nameEn\n        }\n        item {\n          expiryDate\n        }\n      }\n      salesOrder {\n        shop {\n          phone\n          deliverAddress\n          nameEn\n          customer {\n            code\n            nameEn\n          }\n        }\n      }\n    }\n  }\n"]);return sn=function(){return e},e}var mn=Ie()(sn()),dn=function(e){e.permissions;var a=Object(I.a)(e,["permissions"]),t=Object(j.e)(),r=Object(k.a)(),c=Object(me.g)();console.log("DeliveryNote Show",a);var l=function(e){return function(){console.log("record: ",e),c.push("/DeliveryItem/".concat(e.id,"/edit"),{record:e})}},o=function(e){return function(){console.log("record: ",e),c.push("/DeliveryItem/".concat(e.id,"/delete"),{record:e})}},i=Object(Pe.b)(mn,{variables:{where:{id:a.id}}}),u=i.loading,s=i.data;s&&console.log("res",s.deliveryNote.salesOrder.state);var m=!0;return s&&(m=s&&"PAID"===s.deliveryNote.salesOrder.state),n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:4},n.a.createElement(A.a,{variant:"h6"},r("common.information"),"\xa0",m?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var e=a.id;c.push("/DeliveryNote/".concat(e,"/edit"))}},n.a.createElement(Qr.a,null),"\xa0",r("common.edit")),m?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:un(s),disabled:u},n.a.createElement(Jr.a,null),"\xa0",r("common.print"))),n.a.createElement(Yt.a,Object.assign({title:"Delivery Note Details"},a),(function(e){e.record&&e.record.code;var a=e.record?e.record.id:"";return t(Ha([{url:"/DeliveryNote",label:"Delivery Note"},{url:"/DeliveryNote/".concat(a,"/show"),label:"Details"}])),n.a.createElement(Lt.a,e,n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{label:"Delivery No.",source:"code"}),n.a.createElement(ka.a,{label:"Shipment Date",reference:"Invoice",source:"invoice.id"},n.a.createElement(zt.a,{source:"shipmentDate"})),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Customer"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(fr.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id",link:!1},(function(e){var a=e.referenceRecord;Object(I.a)(e,["referenceRecord"]);return n.a.createElement(ka.a,{resource:"Customer",basePath:"/Customer",source:"shop.id",reference:"CustomerShop",record:a||{},link:"show"},n.a.createElement(ka.a,{resource:"Customer",basePath:"/Customer",source:"customer.id",reference:"Customer",record:a||{},link:"show"},n.a.createElement(Ta.a,{source:"nameChi"})))}))))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Sales Order"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Sales Order No.",reference:"SalesOrder",source:"salesOrder.id",link:"show"},n.a.createElement(Ta.a,{source:"code"}))))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Invoice"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Invoice No.",reference:"Invoice",source:"invoice.id",link:"show"},n.a.createElement(Ta.a,{source:"code"})))))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:5,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Products"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(fr.a,{label:"Products",reference:"SalesOrder",source:"salesOrder.id",link:!1},(function(e){var a=e.referenceRecord;Object(I.a)(e,["referenceRecord"]);return n.a.createElement(hr.a,{basePath:"/SalesOrder",resource:"SalesOrderItem",reference:"SalesOrderItem",source:"productsIds",record:a||{},addLabel:!1},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product",link:function(e,a){return"/Product/".concat(e.product.id,"/show")}},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Ta.a,{source:"quantity"})))})))))),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(A.a,{variant:"h6"},"Packing",m?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var e=a.id;console.log("deliveryNote id : ",e),c.push("/DeliveryItem/create",{record:{DeliveryNote:{id:e}}})}},n.a.createElement(Xr.a,null),"\xa0",r("common.create"))),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(zr.a,{reference:"DeliveryItem",target:"deliveryNote",addLabel:!1},n.a.createElement(Na.a,null,n.a.createElement(Ta.a,{label:"Box Num",source:"boxNum"}),n.a.createElement(ka.a,{label:"Label",source:"item.id",reference:"InventoryItem",link:!1},n.a.createElement(Ta.a,{source:"label"})),n.a.createElement(ka.a,{label:"ExpiryDate",source:"item.id",reference:"InventoryItem",link:!1},n.a.createElement(zt.a,{source:"expiryDate"})),n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(Le.a,{color:"primary",size:"small",onClick:l(e),disabled:m},n.a.createElement(Qr.a,null),"\xa0",r("common.edit"))}}),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(Le.a,{color:"primary",size:"small",onClick:o(e),disabled:m},n.a.createElement(Zr.a,null),"\xa0",r("common.delete"))}}))))))};function pn(){var e=Object(Ce.a)(["\n  query customers($where: CustomerWhereInput) {\n    customers(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      wholesalePlan\n    }\n  }\n"]);return pn=function(){return e},e}var En=Ie()(pn());function bn(e){var a=e.onChange,t=e.value,c=Object(k.a)(),l=Object(Pe.b)(En,{variables:{state:"APPROVED"}}),i=l.loading,u=l.data,s=Object(r.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(r.useEffect)((function(){d||f([])}),[d]);var E=Object(r.useState)([]),b=Object(o.a)(E,2),h=b[0],f=b[1],g=i||d&&0===h.length;Object(r.useEffect)((function(){g&&u&&f(u.customers.map((function(e){return{id:e.id,name:e.nameChi}})))}),[g,u]);var v=Object(r.useState)(t),O=Object(o.a)(v,2),y=O[0],S=O[1];Object(r.useEffect)((function(){t&&S({id:t.id,name:t.nameChi})}),[t]);return n.a.createElement(ze.a,{id:"purchase-order-autocomplete",open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,t){S(t),a(u.customers.find((function(e){return e.id===t.id})))},getOptionSelected:function(e,a){return e.id===a},getOptionLabel:function(e){return e.name},options:h,loading:g,value:y,renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:c("customer.customer"),fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,g?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var hn=function(){return"/DeliveryNote"},fn={url:"/DeliveryNote",label:"DeliveryNote"},gn=function(e){console.log(e);var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{redirect:hn},n.a.createElement(tr.a,{label:"Invoice",source:"invoice.id",reference:"Invoice"},n.a.createElement(rr.a,{optionText:"code",label:"Invoice No."})),n.a.createElement(ka.a,{label:"Sales Order",reference:"Invoice",source:"invoice.id"},n.a.createElement(ka.a,{reference:"SalesOrder",source:"salesOrder.id"},n.a.createElement(Ta.a,{source:"code",label:"Sales Order No."}))),n.a.createElement(ka.a,{label:"CustomerShop",reference:"SalesOrder",source:"salesOrder.id"},n.a.createElement(ka.a,{reference:"CustomerShop",source:"shop.id",link:function(e,a){return"/CustomerShop/".concat(e.shop.id,"/show")}},n.a.createElement(Wa,{source:"name"}))),n.a.createElement(ka.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id"},n.a.createElement(ka.a,{source:"shop.id",reference:"CustomerShop"},n.a.createElement(ka.a,{source:"customer.id",reference:"Customer",link:function(e,a){return"/Customer/".concat(e.customer.id,"/show")}},n.a.createElement(Wa,{source:"name"})))),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([fn,{url:"/DeliveryNote/".concat(t.id),label:"Edit: ".concat(t.name)}])),null}))))},vn=function(e){var a=e.record,t=e.props,r=(e.permissions,Object(za.a)("SalesOrder",a.salesOrder.id)),c=r.data,l=(r.loaded,!0);return c&&(l="PAID"===c.state),l?null:n.a.createElement("div",null,n.a.createElement(Ia.a,{basePath:t.basePath,record:a}),n.a.createElement(qt.a,{basePath:t.basePath,record:a,resource:t.resource}))},On=function(e){return Object(j.e)()(Ha([fn])),console.log(e),n.a.createElement(wa.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code"}),n.a.createElement(ka.a,{label:"Sales Order",reference:"SalesOrder",source:"salesOrder.id",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Sales Order No."})),n.a.createElement(ka.a,{label:"Invoice",reference:"Invoice",source:"invoice.id",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Invoice No."})),n.a.createElement(ka.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id"},n.a.createElement(ka.a,{source:"shop.id",reference:"CustomerShop"},n.a.createElement(ka.a,{source:"customer.id",reference:"Customer",link:function(e,a){return"/Customer/".concat(e.customer.id,"/show")}},n.a.createElement(Wa,{source:"name"})))),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Aa.a,{render:function(a){return n.a.createElement(vn,{record:a,props:e})}})))},yn=t(1214);function Sn(){var e=Object(Ce.a)(["\n    mutation updateDeliveryNote($data: DeliveryNoteUpdateInput!, $where: DeliveryNoteWhereUniqueInput!) {\n        updateDeliveryNote(data: $data, where: $where) {\n        id\n      }\n    }\n  "]);return Sn=function(){return e},e}var jn=Ie()(Sn()),Dn=function(e){var a=Object(Ga.a)(),t=Object(Pe.a)(jn),c=Object(o.a)(t,1)[0],l=Object(j.e)(),i=Object(me.g)(),u=Object(me.h)().state.record,s=Object(r.useState)(),m=Object(o.a)(s,2),d=m[0],p=m[1],E=function(e){return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:function(){c({variables:{where:{id:u.deliveryNote.id},data:{items:{update:{where:{id:u.id},data:{itemId:d.itemId,productId:d.id,boxNum:d.boxNum}}}}}}).then((function(e){console.log("res",e),a("Save Success."),f()})).catch((function(e){a("Error: ".concat(e.message),"warning")}))}}))},b=function(e){return n.a.createElement(Er.a,e,n.a.createElement(E,{label:"common.save",submitOnEnter:!1,variant:"text"}))},h=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)},f=function(){return i.go(-1)},g=function(e){d.itemId=e.id};return n.a.createElement(Mt.a,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Qa.a,{variant:"standard",redirect:f,toolbar:n.a.createElement(b,null)},n.a.createElement(tr.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},n.a.createElement(yn.a,{disabled:!0,optionText:n.a.createElement(h,null),label:"DeliveryNote",inputText:function(e){return function(){return p(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,a){return!0},options:{style:{width:500}}})),d&&function(){var e={id:d.id,product:{id:d.id,code:d.code}};return n.a.createElement(Ya.a,{container:!0,direction:"column",style:{width:280}},n.a.createElement(vr,{label:"Select lable"},n.a.createElement(xr,{onChange:g,placeholder:"Label",products:[e]})))}(),n.a.createElement(vr,{label:"BoxNum"},n.a.createElement(Ge.a,{type:"number",onChange:function(e){d.boxNum=parseInt(e.target.value)},placeholder:"BoxNumber"})),n.a.createElement(Ja.a,null,(function(e){var a=e.formData;return l(Ka({url:"/DeliveryItem/".concat(a.id),label:"Edit"})),null}))))},Cn=t(1195);function Pn(){var e=Object(Ce.a)(["\n    mutation createDeliveryItem($data: DeliveryItemCreateInput!) {\n        createDeliveryItem(data: $data) {\n        id\n      }\n    }\n  "]);return Pn=function(){return e},e}var xn=Ie()(Pn()),In=function(e){var a=Object(Pe.a)(xn),t=Object(o.a)(a,1)[0],c=Object(sr.a)("DeliveryItem"),l=Object(o.a)(c,1)[0],i=Object(me.g)(),u=Object(Ga.a)(),s=Object(br.f)(),m=function(){return i.go(-1)},d=Object(r.useCallback)((function(){if(s.valid){var e=s.values,a=e.product,r=e.boxNum,n=e.DeliveryNote,c=e.itemId;e.label,Object(I.a)(e,["product","boxNum","DeliveryNote","itemId","label"]);t({variables:{data:{deliveryNote:{connect:{id:n.id}},productId:a.id,itemId:c,boxNum:r}}}).then((function(e){console.log("res",e),u("Save Success."),m()})).catch((function(e){u("Error: ".concat(e.message),"warning")}))}}),[s.valid,s.values,l,u,m]);return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:d}))},wn=function(e){return n.a.createElement(Er.a,e,n.a.createElement(In,{label:"common.save",submitOnEnter:!1,variant:"text"}))};function Nn(e){var a=Object(r.useState)(),t=Object(o.a)(a,2),c=t[0],l=t[1];Object(j.e)()(Ka({url:"/DeliveryItem/create",label:"Add New Delivery Item"}));var i=function(e){return function(a){e.itemId=a.id,e.label=a.label}},u=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)};return n.a.createElement(At.a,e,n.a.createElement(Qa.a,{toolbar:n.a.createElement(wn,null),variant:"standard"},n.a.createElement(tr.a,{label:"DeliveryNote",source:"DeliveryNote.id",reference:"DeliveryNote"},n.a.createElement(rr.a,{disabled:!0,optionText:"id",label:"DeliveryNote No."})),n.a.createElement(tr.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},n.a.createElement(yn.a,{optionText:n.a.createElement(u,null),label:"DeliveryNote",inputText:function(e){return function(){return l(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,a){return!0},options:{style:{width:500}}})),c&&n.a.createElement(Ja.a,null,(function(e){var a=e.formData;Object(I.a)(e,["formData"]),a.quantity=c.quantity,a.price=c.cost;var t={id:c.id,quantity:c.quantity,product:{id:c.id,code:c.code}};return n.a.createElement(Ya.a,{container:!0,direction:"column",style:{width:280}},n.a.createElement(vr,{label:"Select lable"},n.a.createElement(xr,{onChange:i(a),placeholder:"Label",products:[t]})),n.a.createElement(Cn.a,{source:"boxNum",label:"boxNum"}))}))))}function kn(){var e=Object(Ce.a)(["\n  query salesOrders($where: SalesOrderWhereInput) {\n    salesOrders(where: $where, orderBy: updatedAt_DESC) {\n      id\n      code\n      shop {\n        id\n        code\n        nameEn\n        nameChi\n        deliveryDay\n        customer {\n          id\n          nameEn\n          nameChi\n        }\n      }\n      products {\n        id\n        quantity\n        price\n        totalPrice\n        product {\n          code\n          nameEn\n          nameChi\n        }\n      }\n      grandTotal\n      state\n    }\n  }\n"]);return kn=function(){return e},e}var Tn=Ie()(kn());function Fn(e){var a=e.onChange,t=e.defaultValue,r=e.where,c=void 0===r?{}:r,l=Object(k.a)();console.log("where",c);var i=Object(Pe.b)(Tn,c),u=i.loading,s=i.data,m=n.a.useState(!1),d=Object(o.a)(m,2),p=d[0],E=d[1],b=n.a.useState([]),h=Object(o.a)(b,2),f=h[0],g=h[1],v=u||p&&0===f.length;n.a.useEffect((function(){if(v&&s){var e=s.salesOrders;g(e.filter((function(e){return!!e})).map((function(e){return{id:e.id,name:e.code}})))}}),[v,s]),n.a.useEffect((function(){p||g([])}),[p]);return n.a.createElement(ze.a,{id:"sales-order-autocomplete",style:{width:300},open:p,onOpen:function(){E(!0)},onClose:function(){E(!1)},onChange:function(e,t){var r=s.salesOrders;a(r.filter((function(e){return!!e})).find((function(e){return e.id===t.id})))},getOptionLabel:function(e){return e.name},options:f,loading:v,value:t&&{id:t.id,name:t.code},renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:l("salesOrder.salesOrder"),fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,v?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var An=function(e){var a=e.formData,t=e.setFormData,r=Object(k.a)();return n.a.createElement(Ya.a,{container:!0},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(Fn,{where:{variables:{where:{state:"CONFIRMED"}}},onChange:function(e){t(Object(_e.a)({},a,{salesOrderCode:e.code,salesOrderId:e.id,totalPrice:e.grandTotal,contactPerson:e.contactPerson,customerShop:e.shop,salesOrder:e}))},defaultValue:a.salesOrder})),a.salesOrder&&function(){var e=a.salesOrder,t=e.products;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:"Shop"},e.shop.code),n.a.createElement(vr,{label:r("salesOrder.customer")},e.shop.customer.nameChi)),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("salesOrder.totalPrice")},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}}))),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("salesOrder.state")},e.state)),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(we.a,{"aria-label":"simple table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,r("product.code")),n.a.createElement(Te.a,null,r("product.name")),n.a.createElement(Te.a,{align:"right"},r("shipping.quantityCheck")),n.a.createElement(Te.a,{align:"right"},r("shipping.status")),n.a.createElement(Te.a,{align:"right"},r("invoice.totalPrice")))),n.a.createElement(Fe.a,null,t.map((function(e,a){return n.a.createElement(ke.a,{key:e.id},n.a.createElement(Te.a,null,e.product.code),n.a.createElement(Te.a,{component:"th",scope:"row"},n.a.createElement(Wa,{source:"name",record:e.product})),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))}))))))}())};var Wn=function(e){var a=e.formData,t=Object(k.a)(),r=a.salesOrder;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{variant:"h6",gutterBottom:!0},t("invoice.invoice")),n.a.createElement(Ya.a,{container:!0},n.a.createElement(Ya.a,{item:!0,xs:12,sm:4},n.a.createElement(vr,{label:t("invoice.code")},a.code)),n.a.createElement(Ya.a,{item:!0,xs:12,sm:4},n.a.createElement(vr,{label:t("invoice.customer")},n.a.createElement(Wa,{source:"name",record:r.shop.customer}))),n.a.createElement(Ya.a,{item:!0,xs:12,sm:4},n.a.createElement(vr,{label:"Shop"},n.a.createElement(Wa,{source:"name",record:r.shop}))),n.a.createElement(Ya.a,{item:!0,xs:12,sm:4},n.a.createElement(vr,{label:t("invoice.state")},a.state)),n.a.createElement(Ya.a,{item:!0,xs:12,sm:4},n.a.createElement(vr,{label:t("invoice.salesOrderCode")},a.salesOrderCode)),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(we.a,{"aria-label":"spanning table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,{align:"center",colSpan:3},"Details"),n.a.createElement(Te.a,{align:"right"},"Price")),n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,"Description"),n.a.createElement(Te.a,{align:"right"},"Qty."),n.a.createElement(Te.a,{align:"right"},"Unit"),n.a.createElement(Te.a,{align:"right"},"Total/(HKD)"))),n.a.createElement(Fe.a,null,r.products&&r.products.map((function(e){return n.a.createElement(ke.a,{key:e.id},n.a.createElement(Te.a,null,n.a.createElement(Wa,{source:"name",record:e.product})),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))})),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{colSpan:3},"Total"),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"totalPrice",record:a,options:{style:"currency",currency:"HKD"}}))))))))};var Rn=function(e){var a,t=e.formData,c=e.setFormData,l=Object(k.a)(),o=Object(Da.a)(),i=(o.loaded,o.permissions),u=ja()(),s=t.salesOrder.shop.deliveryDay;if(!["admin"].includes(i)){(a=new Date).getHours()>=16&&(u=ja()().add(1,"day").set("hour",9),a.setDate(a.getDate()+1));var m=s.filter((function(e){return u.day()<=e}));if(0==m.length){var d=s.map((function(e){return e+6+1}));u=ja()().day(d[0])}else u=ja()().day(m[0])}return Object(r.useEffect)((function(){c(Object(_e.a)({},t,{shipmentDate:u.toISOString()}))}),u),console.log(t.shipmentDate),n.a.createElement("form",{noValidate:!0},n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(va.a,{minDate:a,format:"ddd DD MMM YYYY",views:["year","month","date"],inputVariant:"filled",fullWidth:!0,value:t.shipmentDate?t.shipmentDate:u,label:l("invoice.shipmentDate"),onChange:function(e){return c(Object(_e.a)({},t,{shipmentDate:e.toISOString()}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:t.code,label:l("invoice.code"),onChange:function(e){return c(Object(_e.a)({},t,{code:e.target.value}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(jr.a,{variant:"filled",fullWidth:!0},n.a.createElement(Sr.a,{id:"form-state"},l("invoice.state")),n.a.createElement(yr.a,{labelId:"state",label:"form-state",value:t.state||"APPROVED",onChange:function(e){return c(Object(_e.a)({},t,{state:e.target.value}))}},[{id:"DRAFT",name:l("common.draft")},{id:"APPROVED",name:l("common.approved")},{id:"CONFIRMED",name:l("common.confirmed")},{id:"DELETED",name:l("common.deleted")}].map((function(e){return n.a.createElement(Or.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})))))))};function Mn(){var e=Object(Ce.a)(["\n  mutation createInvoice($data: InvoiceCreateInput!) {\n    createInvoice(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Mn=function(){return e},e}function qn(){var e=Object(Ce.a)(["\n  query getLastInvoice {\n    invoices(orderBy: createdAt_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return qn=function(){return e},e}var Yn=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),Ln=Ie()(qn()),Bn=Ie()(Mn()),Hn=function(){var e=Object(j.e)(),a=Object(k.a)(),t=Yn(),c=Object(me.g)(),l=Object(Pe.a)(Bn),i=Object(o.a)(l,1)[0],u=Object(r.useState)(0),s=Object(o.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)({code:"IV001",salesOrderCode:"",salesOrderId:"",salesOrder:null,contactPerson:"",totalPrice:0,state:"CONFIRMED"}),E=Object(o.a)(p,2),b=E[0],h=E[1];e(Ha([{url:"/Invoice",label:"Invoice"},{url:"/Invoice/create",label:"Create New"}]));var f=Object(Pe.b)(Ln).data;Object(r.useEffect)((function(){if(f&&f.invoices.length>0&&"IV001"===b.code){var e=f.invoices[0];h(Object(_e.a)({},b,{code:rt(e.code)}))}}),[f,b]);var g=[a("invoice.selectSalesOrder"),a("invoice.invoiceDetails"),a("invoice.review")],v=Object(Ga.a)();return n.a.createElement("main",{className:t.layout},n.a.createElement(Ae.a,{className:t.paper},n.a.createElement(Be.a,{activeStep:m,className:t.stepper},g.map((function(e){return n.a.createElement($e.a,{key:e},n.a.createElement(Ve.a,null,e))}))),n.a.createElement(n.a.Fragment,null,0===m&&n.a.createElement(An,{formData:b,setFormData:h}),1===m&&n.a.createElement(Rn,{formData:b,setFormData:h}),2===m&&n.a.createElement(Wn,{formData:b}),n.a.createElement("div",{className:t.buttons},m>0&&n.a.createElement(Le.a,{onClick:function(){d(m-1)},color:"primary"},a("common.prev")),m<g.length-1&&n.a.createElement(Le.a,{onClick:function(){""===b.salesOrderId||""===b.code?v("Error : Please fill all field.","warning"):d(m+1)},color:"primary"},a("common.next")),m===g.length-1&&n.a.createElement(Le.a,{onClick:function(){var e={code:b.code,salesOrderId:b.salesOrderId,totalPrice:b.totalPrice,shipmentDate:b.shipmentDate,state:b.state,paymentStatus:"UNPAID"};i({variables:{data:e}}).then((function(){c.push("/Invoice")})).catch((function(e){v("Error: ".concat(e.message),"warning")}))},color:"primary"},a("common.confirm"))))))},Kn=function(e){return function(){var a=e.invoice;console.log("invoice",a);var t=ja()(),r=new rn.a("EN_US"),n=[],c=new an.a("p","pt");c.page=1;var l=c.internal.pageSize.getWidth(),o=c.internal.pageSize.getHeight(),i={beforePageContent:function(){var e=c.internal.getNumberOfPages().toString();"function"===typeof c.putTotalPages&&(e+=" of {total_pages_count_string}"),c.setFontSize(23),c.setFontStyle("bold"),c.text(l-150,50,"INVOICE"),c.setFontSize(10),c.setFontStyle("bold"),c.text(50,100,"Bill To:"),c.setFontStyle("normal"),c.text(100,100,a.salesOrder.shop.nameEn),c.text(100,115,a.salesOrder.shop.deliverAddress),c.text(100,130,""),c.text(100,145,""),c.setFontStyle("bold"),c.text(50,165,"Attn:"),c.setFontStyle("normal"),c.text(100,165,a.salesOrder.shop.customer.nameEn),c.setFontStyle("bold"),c.text(50,180,"Tel:"),c.setFontStyle("normal"),c.text(100,180,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),c.setFontStyle("bold"),c.text(200,180,"Fax:"),c.setFontStyle("normal"),c.text(250,180,a.salesOrder.shop.phone?a.salesOrder.shop.phone.toString():""),c.setFontStyle("bold"),c.text(350,100,"Date:"),c.setFontStyle("normal"),c.text(410,100,t.format("DD/MMM/YYYY")),c.setFontStyle("bold"),c.text(350,115,"REF. No.:"),c.setFontStyle("normal"),c.text(410,115,a.code),c.setFontStyle("bold"),c.text(350,130,"Cust. ID:"),c.setFontStyle("normal"),c.text(410,130,a.salesOrder.shop.customer.code),c.setFontStyle("bold"),c.text(350,145,"Pay term:"),c.setFontStyle("normal"),c.text(410,145,""),c.setFontStyle("bold"),c.text(350,160,"Ship Date:"),c.setFontStyle("normal"),c.text(410,160,ja()(a.shipmentDate).format("DD/MMM/YYYY")),c.setFontStyle("bold"),c.text(350,175,"Salesman:"),c.setFontStyle("normal"),c.text(410,175,""),c.setFontStyle("bold"),c.text(350,190,"Page:"),c.setFontStyle("normal"),c.text(410,190,e),c.setLineWidth(1.5),c.setDrawColor(0,0,0),c.line(50,200,l-50,200),c.line(50,220,l-50,220)},afterPageContent:function(){c.setFontSize(7),c.text(l-40,o-30,"Page - "+c.page),c.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},qty:{columnWidth:30},price:{columnWidth:40},amount:{columnWidth:50,halign:"right"}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:200,bottom:100,horizontal:50}};if(a.salesOrder.products.map((function(e,a){var t={count:a+1,no:e.product.code,des:e.product.nameEn,qty:e.quantity,price:e.price,amount:e.totalPrice};n.push(t)})),c.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"qty",header:"Qty"},{dataKey:"price",header:"Price"},{dataKey:"amount",header:"Amount"}],n,i),c.setFontSize(10),c.setFontStyle("normal"),c.text(412,c.autoTable.previous.finalY+12,"Sub-total :"),c.text(l-53-5*a.salesOrder.subtotal.toFixed(1).toString().length,c.autoTable.previous.finalY+12,a.salesOrder.subtotal.toFixed(1).toString()),c.text(376,c.autoTable.previous.finalY+27,"Discount Amount :"),c.text(l-47-5*(a.salesOrder.discountAmount.toFixed(1).toString().length+1),c.autoTable.previous.finalY+27,a.salesOrder.discountAmount.toFixed(1).toString()),c.text(400,c.autoTable.previous.finalY+47,"Grand Total :"),c.text(l-53-5*a.salesOrder.grandTotal.toFixed(1).toString().length,c.autoTable.previous.finalY+47,a.salesOrder.grandTotal.toFixed(1).toString()),a.salesOrder.grandTotal===parseInt(a.salesOrder.grandTotal,10))c.text(50,c.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+nn(r.toWords(a.salesOrder.grandTotal))+" ONLY.");else{var u=a.salesOrder.grandTotal.toFixed(1).toString().split(".");c.text(50,c.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+nn(r.toWords(parseInt(u[0])))+" And "+nn(r.toWords(parseInt(10*u[1])))+" CENTS ONLY.")}c.setFontStyle("bold"),c.text(50,c.autoTable.previous.finalY+87,"Shipterm :"),c.setFontStyle("normal"),c.text(100,c.autoTable.previous.finalY+87,"Standard Delivery"),c.setLineWidth(1),c.setDrawColor(0,0,0),c.line(455,c.autoTable.previous.finalY,l-50,c.autoTable.previous.finalY),c.line(455,c.autoTable.previous.finalY+33,l-50,c.autoTable.previous.finalY+33),c.line(455,c.autoTable.previous.finalY+50,l-50,c.autoTable.previous.finalY+50),c.line(455,c.autoTable.previous.finalY+52,l-50,c.autoTable.previous.finalY+52),c.setLineWidth(1.5),c.setDrawColor(0,0,0),c.line(50,c.autoTable.previous.finalY+76,l-50,c.autoTable.previous.finalY+76),c.line(50,c.autoTable.previous.finalY+91,l-50,c.autoTable.previous.finalY+91),c.setFillColor(255,255,255),c.rect(90,c.autoTable.previous.finalY+110,430,150,"FD"),c.setFontStyle("bold"),c.text(280,c.autoTable.previous.finalY+128,"REMARK"),c.setLineWidth(1),c.line(100,c.autoTable.previous.finalY+134,510,c.autoTable.previous.finalY+134),c.line(100,c.autoTable.previous.finalY+248,510,c.autoTable.previous.finalY+248),c.text(100,c.autoTable.previous.finalY+145,"Payment Method: Cheque or Bank-In"),c.text(100,c.autoTable.previous.finalY+157,"Account Name: Petgo Trading Limited"),c.text(100,c.autoTable.previous.finalY+169,"Account No.: 741-149611-838"),c.text(100,c.autoTable.previous.finalY+181,"Bank Name: HSBC Hong Kong Bank Code: 004"),c.text(100,c.autoTable.previous.finalY+193,"SWIFT: HSBCHKHHHKH"),c.text(100,c.autoTable.previous.finalY+205,"*For Cheques, please write your Invoice No. on the back of the cheque."),c.text(100,c.autoTable.previous.finalY+217,"*For Bank-In, please provide the Bank-In Slip to Petgo Trading Limited."),c.text(100,c.autoTable.previous.finalY+229,"Cash"),c.text(100,c.autoTable.previous.finalY+241,"Cash On Delivery."),"function"===typeof c.putTotalPages&&c.putTotalPages("{total_pages_count_string}"),c.save("InvoiceGen.pdf")}};function $n(){var e=Object(Ce.a)(["\n  query invoice($where: InvoiceWhereUniqueInput!) {\n    invoice(where: $where) {\n      id\n      code\n      salesOrder {\n        id\n        code\n        title\n        remark\n        discountAmount\n        grandTotal\n        subtotal\n        state\n        userId\n        shop {\n          nameEn\n          deliverAddress\n          phone\n          customer {\n            id\n            code\n            nameEn\n          }\n        }\n        products {\n          id\n          totalPrice\n          product {\n            nameEn\n            id\n            code\n          }\n          price\n          quantity\n        }\n        createdAt\n        updatedAt\n      }\n      userId\n      state\n      paymentStatus\n      totalPrice\n      title\n      remark\n      shipmentDate\n      createdAt\n      updatedAt\n      paidAt\n    }\n  }\n"]);return $n=function(){return e},e}var Vn=Ie()($n()),Un=function(e){var a=Object(j.e)(),t=Object(k.a)(),r=Object(me.g)(),c=Object(Pe.b)(Vn,{variables:{where:{id:e.id}}}),l=c.loading,o=c.data,i=o&&o.invoice.code,u=o&&o.invoice.id,s=!0;return o&&(s="PAID"===o.invoice.salesOrder.state),a(Ha([{url:"/Invoice",label:"Invoice"},{url:"/Invoice/".concat(u,"/show"),label:i}])),n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:9},n.a.createElement(A.a,{variant:"h6"},"Basic Information\xa0",s?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var a=e.basePath,t=e.id;r.push("".concat(a,"/").concat(t,"/edit"))}},n.a.createElement(Qr.a,null),"\xa0",t("common.edit")),n.a.createElement(Le.a,{color:"primary",size:"small",onClick:Kn(o),disabled:l},n.a.createElement(Jr.a,null),"\xa0",t("common.print"))),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null),x:!0},e),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"code",label:"Invoice No."}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Total Price"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Shipment Date"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(zt.a,{source:"shipmentDate"})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Sales Order"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Sales Order",reference:"SalesOrder",source:"salesOrder.id",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Sales Order No."})))))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:12,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Items"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(ka.a,{label:"Products",reference:"SalesOrder",source:"salesOrder.id"},n.a.createElement(hr.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{source:"price",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))))},_n=function(){return"/Invoice"},Gn={url:"/Invoice",label:"Invoice"},zn=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{redirect:_n},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Invoice No."}),n.a.createElement(nr.a,{source:"shipmentDate"}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([Gn,{url:"/Invoice/".concat(t.id),label:"Edit: ".concat(t.code)}])),null}))))},Qn=function(e){var a=e.record,t=e.props,r=(e.permissions,Object(za.a)("SalesOrder",a.salesOrder.id)),c=r.data,l=(r.loaded,!0);return c&&(l="PAID"===c.state),l?null:n.a.createElement("div",null,n.a.createElement(Ia.a,{basePath:t.basePath,record:a}),n.a.createElement(qt.a,{basePath:t.basePath,record:a,resource:t.resource}))},Jn=function(e){return Object(j.e)()(Ha([Gn])),n.a.createElement(wa.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code",label:"Invoice No."}),n.a.createElement(zt.a,{source:"shipmentDate"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Aa.a,{render:function(a){return n.a.createElement(Qn,{record:a,props:e})}})))},Xn=t(1197),Zn=t(1229);var ec=function(e){var a=e.onSort,t=Object(k.a)(),c=Object(r.useState)("id"),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(r.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],E=function(e){return function(){e===i?p(!d):(u(e),p(!1)),a("".concat(i,"_").concat(d?"DESC":"ASC"))}};return n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null),n.a.createElement(Te.a,null,n.a.createElement(Zn.a,{active:"code"===i,direction:d?"desc":"asc",onClick:E("code")},t("product.code"))),n.a.createElement(Te.a,null,n.a.createElement(Zn.a,{active:"nameEn"===i,direction:d?"desc":"asc",onClick:E("nameEn")},t("product.name"))),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Zn.a,{active:"quantity"===i,direction:d?"desc":"asc",onClick:E("quantity")},t("inventory.stock")))))},ac=t(1162),tc=t(1228),rc=t(47),nc=t(528),cc=t.n(nc),lc=t(530),oc=t.n(lc),ic=t(529),uc=t.n(ic),sc=t(527),mc=t.n(sc),dc=Object(D.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));var pc=function(e){var a=dc(),t=Object(rc.a)(),r=e.count,c=e.page,l=e.rowsPerPage,o=e.onChangePage;return n.a.createElement("div",{className:a.root},n.a.createElement(q.a,{onClick:function(e){o(e,0)},disabled:0===c,"aria-label":"first page"},"rtl"===t.direction?n.a.createElement(mc.a,null):n.a.createElement(cc.a,null)),n.a.createElement(q.a,{onClick:function(e){o(e,c-1)},disabled:0===c,"aria-label":"previous page"},"rtl"===t.direction?n.a.createElement(uc.a,null):n.a.createElement(oc.a,null)),n.a.createElement(q.a,{onClick:function(e){o(e,c+1)},disabled:c>=Math.ceil(r/l)-1,"aria-label":"next page"},"rtl"===t.direction?n.a.createElement(oc.a,null):n.a.createElement(uc.a,null)),n.a.createElement(q.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(r/l)-1))},disabled:c>=Math.ceil(r/l)-1,"aria-label":"last page"},"rtl"===t.direction?n.a.createElement(cc.a,null):n.a.createElement(mc.a,null)))};var Ec=function(e){var a=e.totalRows,t=e.page,r=e.rowsPerPage,c=e.setPage,l=e.setRowsPerPage;return n.a.createElement(ac.a,null,n.a.createElement(ke.a,null,n.a.createElement(tc.a,{rowsPerPageOptions:[10,25,50],colSpan:4,count:a,rowsPerPage:r,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,a){c(a)},onChangeRowsPerPage:function(e){l(parseInt(e.target.value,10)),c(0)},ActionsComponent:pc})))},bc=t(764),hc=t(1196),fc=t(1156);function gc(){var e=Object(Ce.a)(["\n  query getCategories {\n    productCategories {\n      id\n      nameEn\n      nameChi\n    }\n  }\n"]);return gc=function(){return e},e}var vc=Ie()(gc()),Oc=Object(D.a)((function(e){return{toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},title:{flex:1},input:{marginLeft:e.spacing(1)},iconButton:{padding:10},divider:{height:28,margin:4},chips:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}));var yc=function(e){var a=e.where,t=e.setWhere,c=Object(k.a)(),l=Oc(),i=Object(r.useState)(""),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(null),p=Object(o.a)(d,2),E=p[0],b=p[1],h=Object(r.useState)(null),f=Object(o.a)(h,2),g=(f[0],f[1],Object(r.useState)([])),v=Object(o.a)(g,2),O=v[0],y=v[1],S=Object(r.useState)([]),j=Object(o.a)(S,2),D=j[0],C=j[1],P=Object(Pe.b)(vc).data,x=P?P.productCategories:[];return Object(r.useEffect)((function(){a.code_starts_with&&b(a.code_starts_with)}),[a]),Object(r.useEffect)((function(){var e={};E&&(e.code_starts_with=E),t(e)}),[E,O,D,t]),n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a,{className:l.toolbar},n.a.createElement(A.a,{className:l.title,variant:"h6",id:"tableTitle"},c("salesOrder.selectProducts")),n.a.createElement(fc.a,{className:l.divider,orientation:"vertical"}),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b(s),m("")}},n.a.createElement(bc.a,{className:l.input,value:s,onChange:function(e){m(e.target.value)},placeholder:"".concat(c("common.search")," ").concat(c("salesOrder.productCode")),inputProps:{"aria-label":"".concat(c("common.search")," ").concat(c("salesOrder.productCode"))}}),n.a.createElement(q.a,{type:"submit",className:l.iconButton,"aria-label":"search"},n.a.createElement(hc.a,null)))),n.a.createElement("div",{className:l.chips},E&&n.a.createElement(Ar.a,{label:E,onDelete:function(){b(null)}}),D.map((function(e){return n.a.createElement(Ar.a,{key:"product.".concat(e),label:c("product.".concat(e)),onDelete:(a=e,function(){D.includes(a)?(D.splice(D.indexOf(a),1),C(Object(pe.a)(D))):C([].concat(Object(pe.a)(D),[a]))})});var a})),O.map((function(e){return n.a.createElement(Ar.a,{key:"product.".concat(e),label:x.find((function(a){return a.id===e})).nameEn,onDelete:(a=e,function(){O.includes(a)?(O.splice(O.indexOf(a),1),y(Object(pe.a)(O))):y([].concat(Object(pe.a)(O),[a]))})});var a}))))},Sc=t(1100),jc=t(1105),Dc=t(1103),Cc=t(1102),Pc=t(1151);var xc=function(e){var a=e.onSubmit,t=e.onCancel,c=e.product,l=e.open,i=e.customer,u=Object(k.a)(),s=Object(r.useState)(l),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(r.useEffect)((function(){p(l)}),[l]);var E=Object(r.useState)({product:c}),b=Object(o.a)(E,2),h=b[0],f=b[1],g=[h.wholeSalePrice1,h.wholeSalePrice2,h.wholeSalePrice3,h.wholeSalePrice4,h.wholeSalePrice5];if(c&&c.discount&&g.length>0)if(c.discount.includes("%")){var v=parseFloat(c.discount)/100;g=g.map((function(e){return e*v}))}else if(c.discount.includes("HKD")){var O=parseFloat(c.discount.replace("HKD",""));g=g.map((function(e){return e-O}))}Object(r.useEffect)((function(){if(c&&i){var e=[c.wholeSalePrice1,c.wholeSalePrice2,c.wholeSalePrice3,c.wholeSalePrice4,c.wholeSalePrice5];if(c&&c.discount&&e.length>0)if(c.discount.includes("%")){var a=1-parseFloat(c.discount)/100;e=e.map((function(e){return e*a}))}else if(c.discount.includes("HKD")){var t=parseFloat(c.discount.replace("HKD",""));e=e.map((function(e){return e-t}))}f(Object(_e.a)({},c,{quantity:parseInt(c.minOrderQuantity,10),price:parseFloat(e[i.wholesalePlan-1])}))}}),[c]);var y=Object(r.useState)(i.wholesalePlan),S=Object(o.a)(y,2),j=S[0],D=S[1],C=function(){t(),p(!1)},P=function(e,a){return function(){D(a+1),f(Object(_e.a)({},h,{price:e}))}};return n.a.createElement(Sc.a,{open:d,onClose:C,"aria-labelledby":"form-dialog-title"},n.a.createElement(jc.a,{id:"form-dialog-title"},u("salesOrder.editSalesOrder")),n.a.createElement(Dc.a,null,n.a.createElement("form",{noValidate:!0},n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12},c&&c.code),n.a.createElement(Ya.a,{item:!0,xs:12},c&&c.nameChi),n.a.createElement(Ya.a,{item:!0,xs:12},c&&c.nameEn),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(Ge.a,{error:c&&h.quantity>c.quantity,helperText:c&&h.quantity>c.quantity?"Over Order":"",id:"quantity",label:u("product.quantity"),type:"number",InputLabelProps:{shrink:!0},variant:c&&h.quantity>c.quantity?"outlined":"filled",value:h.quantity,onChange:function(e){return f(Object(_e.a)({},h,{quantity:parseInt(e.currentTarget.value,10)}))}})),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(Ge.a,{id:"price",label:u("product.price"),type:"number",InputLabelProps:{shrink:!0},variant:"filled",value:h.price,onChange:function(e){return f(Object(_e.a)({},h,{price:e.currentTarget.value}))}}),n.a.createElement(Pc.a,null,g.map((function(e,a){return n.a.createElement(Le.a,{onClick:P(e,a),color:j==a+1?"secondary":void 0,variant:"contained"},u("product.wholeSalePrice"),a+1)}))))))),n.a.createElement(Cc.a,null,n.a.createElement(Le.a,{onClick:C,color:"primary"},u("common.cancel")),n.a.createElement(Le.a,{onClick:function(){f(Object(_e.a)({},h,{price:parseFloat(h.price).toFixed(2)})),a(h),C()},color:"primary",disabled:c&&h.quantity&&h.quantity>c.quantity},u("common.save"))))};function Ic(){var e=Object(Ce.a)(["\n  query getProducts(\n    $where: ProductWhereInput\n    $orderBy: ProductOrderByInput\n    $first: Int\n    $skip: Int\n  ) {\n    productsConnection(\n      where: $where\n      orderBy: $orderBy\n      skip: $skip\n      first: $first\n    ) {\n      edges {\n        node {\n          id\n          code\n          nameChi\n          nameEn\n          minOrderQuantity\n          minStockLevel\n          quantity\n          discount\n          cost\n          wholeSalePrice1\n          wholeSalePrice2\n          wholeSalePrice3\n          wholeSalePrice4\n          wholeSalePrice5\n        }\n      }\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return Ic=function(){return e},e}var wc=Ie()(Ic()),Nc=Object(D.a)((function(e){return{root:{width:"100%"},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},paper:{width:"100%",marginBottom:e.spacing(2)},table:{},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},image:{width:60,height:60},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}));var kc=function(e){var a=e.selected,t=e.onSelected,c=e.customer,l=Nc(),i=Object(r.useState)({}),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(0),p=Object(o.a)(d,2),E=p[0],b=p[1],h=Object(r.useState)("id_ASC"),f=Object(o.a)(h,2),g=f[0],v=f[1],O=Object(r.useState)(10),y=Object(o.a)(O,2),S=y[0],j=y[1],D=Object(r.useState)(null),C=Object(o.a)(D,2),P=C[0],x=C[1],I=Object(Pe.b)(wc,{variables:{where:s,orderBy:g,first:S,skip:E*S}}),w=I.loading,N=I.error,k=I.data;if(N)return n.a.createElement("div",null,"Error");if(!k&&w)return n.a.createElement("div",null,"loading...");var T=k.productsConnection.edges.map((function(e){return e.node})),F=k.productsConnection.aggregate.count,W=S-Math.min(S,F-E*S),R=a.map((function(e){return e.id})),M=function(e,a){t(e,a)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(yc,{where:s,setWhere:m}),n.a.createElement(we.a,{className:l.table,"aria-label":"custom pagination table"},n.a.createElement(ec,{onSort:v}),n.a.createElement(Fe.a,null,T.map((function(e){return n.a.createElement(ke.a,{key:e.id},n.a.createElement(Te.a,null,n.a.createElement(q.a,{onClick:(a=e,function(){var e=!R.includes(a.id);e?x(a):M(a,e)})},R.includes(e.id)?n.a.createElement(Xn.a,null):n.a.createElement(Xr.a,null))),n.a.createElement(Te.a,null,e.code),n.a.createElement(Te.a,{component:"th",scope:"row"},n.a.createElement(Ya.a,{container:!0,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0,xs:!0},n.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},e.nameChi),n.a.createElement(A.a,{variant:"body2",gutterBottom:!0},e.nameEn)))),n.a.createElement(Te.a,{align:"right"},parseInt(e.quantity,10)));var a})),W>0&&n.a.createElement(ke.a,{style:{height:53*W}},n.a.createElement(Te.a,{colSpan:6}))),n.a.createElement(Ec,{totalRows:F,rowsPerPage:S,page:E,setPage:b,setRowsPerPage:j})),n.a.createElement(xc,{product:P,open:!!P,onSubmit:function(e){M(e,!0),x(null)},onCancel:function(){x(null)},customer:c}))};function Tc(){var e=Object(Ce.a)(["\n  query customer($where: CustomerWhereUniqueInput!) {\n    customer(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      shops {\n        id\n        code\n        nameChi\n        nameEn\n      }\n    }\n  }\n"]);return Tc=function(){return e},e}Ie()(Tc());function Fc(){var e=Object(Ce.a)(["\n  query customer($where: CustomerWhereUniqueInput!) {\n    customer(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      shops {\n        id\n        code\n        nameChi\n        nameEn\n      }\n    }\n  }\n"]);return Fc=function(){return e},e}var Ac=Ie()(Fc());var Wc=function(e){var a=e.formData,t=e.setFormData,c=Object(k.a)(),l=Object(r.useState)(),i=Object(o.a)(l,2),u=i[0],s=i[1],m=Object(Pe.b)(Ac,{variables:{where:{id:a.customer&&a.customer.id}}}),d=m.loading,p=m.data;return Object(r.useEffect)((function(){p&&(s(p.customer.shops),console.log(p))})),n.a.createElement("form",{noValidate:!0},n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(bn,{variant:"filled",fullWidth:!0,value:a.customer,label:c("salesOrder.code"),onChange:function(e){t(Object(_e.a)({},a,{customer:e}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(ze.a,{id:"customer-shops",options:u,getOptionLabel:function(e){return e.nameEn},renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:"CustomerShop",fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,d?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},onChange:function(e,r){console.log(r),t(Object(_e.a)({},a,{customerShop:r}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:a.code,label:c("salesOrder.code"),onChange:function(e){return t(Object(_e.a)({},a,{code:e.target.value}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(jr.a,{variant:"filled",fullWidth:!0},n.a.createElement(Sr.a,{id:"form-state"},c("salesOrder.state")),n.a.createElement(yr.a,{labelId:"state",label:"form-state",value:a.state||"RECEIVED",onChange:function(e){return t(Object(_e.a)({},a,{state:e.target.value}))},disabled:!0},[{id:"RECEIVED",name:c("common.received")}].map((function(e){return n.a.createElement(Or.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})))))))},Rc=be()((function(e){return{label:{fontWeight:"bold",textAlign:"right",paddingRight:e.spacing(2)}}}));var Mc=function(e){var a=e.formData,t=Object(k.a)(),r=Rc();console.log("formdata: ",a);var c=a.products.reduce((function(e,a){return e+a.price*a.quantity}),0).toFixed(2);return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{variant:"h6",gutterBottom:!0},t("salesOrder.salesOrderDetails")),n.a.createElement(Ya.a,{container:!0},n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:r.label},t("salesOrder.code"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.code)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:r.label},t("salesOrder.customer"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.customer.nameChi)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:r.label},t("salesOrder.expectedDeliveryAt"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},ja()(a.expectedDeliveryAt).format("YYYY-MM-DD")+"(YYYY-MM-DD)")),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:r.label},"CustomerShop")),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.customerShop.nameEn)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:r.label},t("salesOrder.state"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.state)),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(we.a,{"aria-label":"spanning table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,{align:"center",colSpan:4},"Details"),n.a.createElement(Te.a,{align:"right"},"Price")),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{align:"right"},"Product no."),n.a.createElement(Te.a,null,"Description"),n.a.createElement(Te.a,{align:"right"},"Qty."),n.a.createElement(Te.a,{align:"right"},"Unit"),n.a.createElement(Te.a,{align:"right"},"Total/(HK$)"))),n.a.createElement(Fe.a,null,a.products&&a.products.map((function(e){var a=(e.quantity*e.price).toFixed(2);return n.a.createElement(ke.a,{key:e.id},n.a.createElement(Te.a,{align:"center"},e.code),n.a.createElement(Te.a,null,n.a.createElement(Wa,{source:"name",record:e})),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"subTotal",record:{subTotal:a},options:{style:"currency",currency:"HKD"}})))})),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{colSpan:4},"Total"),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"grandTotal",record:{grandTotal:c},options:{style:"currency",currency:"HKD"}}))))))))},qc=t(1150),Yc=t(1198);function Lc(){var e=Object(Ce.a)(["\n  query getFirstCustomer {\n    customers(first: 1) {\n      code\n      id\n      nameEn\n      nameChi\n      wholesalePlan\n    }\n  }\n"]);return Lc=function(){return e},e}function Bc(){var e=Object(Ce.a)(["\n  query getLastSalesOrder {\n    salesOrders(orderBy: createdAt_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return Bc=function(){return e},e}function Hc(){var e=Object(Ce.a)(["\n  mutation createSalesOrder($data: SalesOrderCreateInput!) {\n    createSalesOrder(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Hc=function(){return e},e}var Kc=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),$c=Ie()(Hc()),Vc=Ie()(Bc()),Uc=Ie()(Lc()),_c=function(){var e=Object(j.e)(),a=Object(k.a)(),t=Kc(),c=Object(me.g)(),l=Object(Ga.a)(),i=Object(Pe.a)($c),u=Object(o.a)(i,1)[0],s=Object(r.useState)(0),m=Object(o.a)(s,2),d=m[0],p=m[1],E=Object(r.useState)({code:"",customer:null,products:[],state:"RECEIVED",customerShop:null}),b=Object(o.a)(E,2),h=b[0],f=b[1];e(Ha([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/create",label:"Create New"}]));var g=Object(Pe.b)(Vc),v=g.loading,O=g.data;Object(r.useEffect)((function(){if(O&&O.salesOrders.length>0&&""===h.code){var e=O.salesOrders[0];f(Object(_e.a)({},h,{code:rt(e.code)}))}}),[O,h]);var y=Object(Pe.b)(Uc),S=y.loading,D=y.data;if(Object(r.useEffect)((function(){if(D&&D.customers.length>0&&!h.customer){var e=D.customers[0];f(Object(_e.a)({},h,{customer:e}))}}),[D,h]),v||S)return"<div>Loading...</div>";var C=[a("salesOrder.salesOrderDetails"),a("salesOrder.selectProducts"),a("salesOrder.review")];return n.a.createElement("main",{className:t.layout},n.a.createElement(Ae.a,{className:t.paper},n.a.createElement(A.a,{component:"h1",variant:"h4",align:"center"},a("salesOrder.createSalesOrder"),n.a.createElement(qc.a,{style:{float:"right"},badgeContent:h.products.length,color:"primary"},n.a.createElement(Yc.a,null))),n.a.createElement(Be.a,{activeStep:d,className:t.stepper},C.map((function(e){return n.a.createElement($e.a,{key:e},n.a.createElement(Ve.a,null,e))}))),n.a.createElement(n.a.Fragment,null,0===d&&n.a.createElement(Wc,{formData:h,setFormData:f}),1===d&&n.a.createElement(kc,{selected:h.products,onSelected:function(e,a){var t=h.products.map((function(e){return e.id}));a?t.includes(e.id)||f(Object(_e.a)({},h,{products:[].concat(Object(pe.a)(h.products),[e])})):t.includes(e.id)&&(h.products.splice(t.indexOf(e.id),1),f(Object(_e.a)({},h,{products:h.products})))},customer:h.customer}),2===d&&n.a.createElement(Mc,{formData:h}),n.a.createElement("div",{className:t.buttons},d>0&&n.a.createElement(Le.a,{onClick:function(){p(d-1)},color:"primary"},a("common.prev")),d<2&&n.a.createElement(Le.a,{onClick:function(){p(d+1)},color:"primary"},a("common.next")),2===d&&n.a.createElement(Le.a,{onClick:function(){var e=h.products.reduce((function(e,a){return e+parseFloat(a.price)*a.quantity}),0),a=h.products.reduce((function(e,a){if(!a.discount)return e+parseFloat(a.price)*a.quantity;if(a.discount.includes("%")){var t=1-parseFloat(a.discount)/100;return e+parseFloat(a.price)/t*a.quantity}if(a.discount.includes("HKD")){var r=parseFloat(a.discount.replace("HKD",""));return e+(parseFloat(a.price)+r)*a.quantity}}),0),t={code:h.code,grandTotal:e,subtotal:a,discountAmount:a-e,state:h.state,shopId:h.customerShop.id,products:{create:h.products.map((function(e){return{productId:e.id,quantity:parseInt(e.quantity,10),price:parseFloat(e.price),totalPrice:parseFloat(e.quantity)*parseFloat(e.price)}}))}};u({variables:{data:t}}).then((function(){c.push("/SalesOrder")})).catch((function(e){l("Error: ".concat(e.message),"warning")}))},color:"primary"},a("common.confirm"))))))};function Gc(){var e=Object(Ce.a)(["\n  query salesOrder($where: SalesOrderWhereUniqueInput!) {\n    salesOrder(where: $where) {\n      id\n      code\n      subtotal\n      grandTotal\n      discountAmount\n      state\n      shippingDate\n      shop {\n        phone\n        nameEn\n        deliverAddress\n        customer {\n          code\n          billingAddress\n          mobile\n          nameEn\n          paymentMethod\n          wholesalePlan\n        }\n      }\n      products {\n        id\n        totalPrice\n        product {\n          nameEn\n          id\n          code\n        }\n        price\n        quantity\n      }\n    }\n  }\n"]);return Gc=function(){return e},e}var zc=Ie()(Gc()),Qc=function(e){e.permissions;var a=Object(I.a)(e,["permissions"]),t=Object(j.e)(),r=Object(k.a)(),c=Object(me.g)();console.log("SalesOrder Show",a);var l,o=Object(Pe.b)(zc,{variables:{where:{id:a.id}}}),i=o.loading,u=o.data;return l=u&&"PAID"===u.salesOrder.state,n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:9},n.a.createElement(A.a,{variant:"h6"},r("common.information"),"\xa0",l?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var e=a.id;c.push("/SalesOrder/".concat(e,"/edit"))}},n.a.createElement(Qr.a,null),"\xa0",r("common.edit")),l?null:n.a.createElement(Le.a,{color:"primary",size:"small",onClick:cn(u),disabled:i},n.a.createElement(Jr.a,null),"\xa0",r("common.print"))),n.a.createElement(Yt.a,Object.assign({title:"Sales Order Details"},a),(function(e){var a=e.record?e.record.code:"",r=e.record?e.record.id:"";return t(Ha([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/".concat(r,"/show"),label:"Details: ".concat(a)}])),n.a.createElement(Lt.a,e,n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Customer",source:"shop.id",reference:"CustomerShop"},n.a.createElement(ka.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,a){return"/Customer/".concat(e.customer.id,"/show")}},n.a.createElement(Wa,{source:"name"}))),n.a.createElement(ka.a,{label:"Wholesale plan",source:"shop.id",reference:"CustomerShop",link:!1},n.a.createElement(ka.a,{label:"Customer",source:"customer.id",reference:"Customer",link:!1},n.a.createElement(Ta.a,{source:"wholesalePlan"}))),n.a.createElement(ka.a,{label:"Shop",source:"shop.id",reference:"CustomerShop",link:"show"},n.a.createElement(Ta.a,{source:"code"})),n.a.createElement(Ta.a,{source:"code",label:"Sales Order No."}),n.a.createElement(Ta.a,{source:"shippingDate",label:"Sales Order Shipping Date"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Status"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"state",addLabel:!1,label:r("common.status")})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Subtotal Price"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"subtotal",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Discount Amount"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"discountAmount",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Grand Total Price"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"grandTotal",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Invoice"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Invoice No.",reference:"Invoice",source:"invoice.id",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Invoice No."})))))),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(A.a,{variant:"h6"},r("salesOrder.products"),"\xa0"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},a),n.a.createElement(hr.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},n.a.createElement(Na.a,a,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{source:"price",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))},Jc=t(1181),Xc=function(){return"/SalesOrder"},Zc=function(e){var a=e.record,t=Object(Jc.a)("SalesOrder",a.id),c=Object(o.a)(t,1)[0],l=Object(me.g)(),i=function(){return l.go(-1)},u=Object(Ga.a)(),s=Object(br.f)(),m=Object(r.useCallback)((function(){if(s.valid){var e=s.values,t=(e.customer,Object(I.a)(e,["customer"]));c({payload:{data:Object(_e.a)({},t),previousData:a}},{undoable:!0,onSuccess:function(e){e.data;u("ra.notification.updated","info",{smart_count:1},!0),i()}})}}),[s.valid,s.values,a,u,i,c]);return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:m}))},el=function(e){return n.a.createElement(Er.a,e,n.a.createElement(Zc,{label:"common.save",submitOnEnter:!1,variant:"text"}))},al=function(e){var a=Object(j.e)(),t=Object(k.a)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{toolbar:n.a.createElement(el,null),redirect:Xc},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Sales Order No."}),n.a.createElement(rr.a,{source:"state",choices:[{id:"RECEIVED",name:t("common.received")},{id:"CONFIRMED",name:t("common.confirmed")},{id:"PACKED",name:t("common.packed")},{id:"SHIPPED",name:t("common.shipped")},{id:"DELIVERED",name:t("common.delivered")},{id:"PAID",name:t("common.paid")},{id:"DELETED",name:t("common.deleted")}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/".concat(t.id),label:"Edit: ".concat(t.code)}])),null}))))},tl=function(e){var a=e.record,t=e.props;e.permissions;return"PAID"!==a.state?n.a.createElement(Ia.a,{basePath:t.basePath,record:a}):null},rl=function(e){var a=e.record,t=e.props;e.permissions;return"PAID"!==a.state?n.a.createElement(qt.a,{basePath:t.basePath,record:a,resource:t.resource}):null},nl=function(e){var a=e.permissions,t=Object(I.a)(e,["permissions"]);return console.log(t),Object(j.e)()(Ha([{url:"/SalesOrder",label:"Sales Order"}])),n.a.createElement(wa.a,Object.assign({},t,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code",label:"Sales Order No."}),n.a.createElement(ka.a,{label:"Customer",source:"shop.id",reference:"CustomerShop"},n.a.createElement(ka.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,a){return"/Customer/".concat(e.customer.id,"/show")}},n.a.createElement(Wa,{source:"name"}))),n.a.createElement(ka.a,{label:"Shop",source:"shop.id",reference:"CustomerShop",link:"show"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{label:"Grand total price",source:"grandTotal",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"state"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(tl,{record:e,props:t,permissions:a})}}),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(rl,{record:e,props:t,permissions:a})}})))};function cl(){var e=Object(Ce.a)(["\n  query suppliers($where: SupplierWhereInput) {\n    suppliers(where: $where) {\n      id\n      name\n      creditLine\n    }\n  }\n"]);return cl=function(){return e},e}var ll=Ie()(cl());function ol(e){var a=e.onChange,t=e.value,c=Object(k.a)(),l=Object(Pe.b)(ll,{variables:{state:"APPROVED"}}),i=l.loading,u=l.data,s=Object(r.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(r.useEffect)((function(){d||f([])}),[d]);var E=Object(r.useState)([]),b=Object(o.a)(E,2),h=b[0],f=b[1],g=i||d&&0===h.length;Object(r.useEffect)((function(){g&&u&&f(u.suppliers.map((function(e){return{id:e.id,name:e.name,creditLine:e.creditLine}})))}),[g,u]);var v=Object(r.useState)(t),O=Object(o.a)(v,2),y=O[0],S=O[1];Object(r.useEffect)((function(){S(t)}),[t]);return n.a.createElement(ze.a,{id:"purchase-order-autocomplete",open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,t){console.log("value: ",t),S(t),a(t)},getOptionSelected:function(e,a){return e.id===a},getOptionLabel:function(e){return e.name},options:h,loading:g,value:y,renderInput:function(e){return n.a.createElement(Ge.a,Object.assign({},e,{label:c("supplier.supplier"),fullWidth:!0,variant:"filled",InputProps:Object(_e.a)({},e.InputProps,{endAdornment:n.a.createElement(n.a.Fragment,null,g?n.a.createElement(Qe.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var il=["SHIPPED","ARRIVED","RECEIVED","DELETED"];var ul=function(e){var a=e.formData,t=e.setFormData,r=e.permissions,c=Object(k.a)();return n.a.createElement("form",{noValidate:!0},n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(ol,{variant:"filled",fullWidth:!0,value:a.supplier,label:c("purchaseOrder.code"),onChange:function(e){return t(Object(_e.a)({},a,{supplier:e}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:a.code,label:c("purchaseOrder.code"),onChange:function(e){return t(Object(_e.a)({},a,{code:e.target.value}))}})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(va.a,{inputVariant:"filled",fullWidth:!0,value:a.expectedDeliveryAt,label:c("purchaseOrder.expectedDeliveryAt"),onChange:function(e){return t(Object(_e.a)({},a,{expectedDeliveryAt:e.toDate()}))},format:"YYYY/MM/DD"})),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(jr.a,{variant:"filled",fullWidth:!0},n.a.createElement(Sr.a,{id:"form-state"},c("purchaseOrder.state")),n.a.createElement(yr.a,{disabled:il.includes(a.state),labelId:"state",label:"form-state",value:a.state||"APPROVED",onChange:function(e){return t(Object(_e.a)({},a,{state:e.target.value}))}},[{id:"DRAFT",name:c("common.draft")},{id:"PENDING",name:c("common.pending")}].map((function(e){return n.a.createElement(Or.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})),"admin"===r&&n.a.createElement(Or.a,{key:"POSelectAPPROVED",value:"APPROVED"}," ",c("common.approved")))))))},sl=t(1161);function ml(){var e=Object(Ce.a)(["\n  query getPo($where: PurchaseOrderWhereInput!) {\n    purchaseOrders(where: $where) {\n      totalPrice\n    }\n  }\n"]);return ml=function(){return e},e}var dl=Ie()(ml()),pl=be()((function(e){return{label:{fontWeight:"bold",textAlign:"right",paddingRight:e.spacing(2)}}}));var El=function(e){var a=e.formData,t=e.setFormData,c=ja()().add(1,"month").format("YYYY-MM-DD").toString(),l=ja()().format("YYYY-MM-DD").toString(),i=Object(Pe.b)(dl,{variables:{where:{createdAt_gt:"".concat(l.substring(0,7)),createdAt_lt:"".concat(c.substring(0,7)),supplierId:a.supplier.id}}}),u=i.loading,s=i.data,m=n.a.useState(5),d=Object(o.a)(m,2),p=d[0],E=d[1],b=n.a.useState(0),h=Object(o.a)(b,2),f=h[0],g=h[1],v=Object(k.a)(),O=pl(),y=0,S=a.products.reduce((function(e,a){return e+a.price*a.quantity}),0);return Object(r.useEffect)((function(){if(u&&console.log("loadingPO"),s){console.log("supplierPO:",s);var e=parseInt(a.supplier.creditLine);y=s.purchaseOrders.reduce((function(e,a){return e-a.totalPrice}),e),y-=S,console.log("supplierLine",y),t(Object(_e.a)({},a,{canCredit:y>=0,supplierLine:y}))}s||console.log("error loading supplierPO",s)}),[s,u]),n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{variant:"h6",gutterBottom:!0},v("purchaseOrder.purchaseOrderDetails")),n.a.createElement(Ya.a,{container:!0},n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.code"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.code)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.supplier"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.supplier.name)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:O.label},"line")),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.supplier.creditLine)),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.expectedDeliveryAt"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},ja()(a.expectedDeliveryAt).format("YYYY-MM-DD"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.state"))),n.a.createElement(Ya.a,{item:!0,xs:6,sm:3},n.a.createElement(A.a,{gutterBottom:!0},a.state)),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(sl.a,{component:Ae.a},n.a.createElement(we.a,{"aria-label":"spanning table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,{align:"center",colSpan:3},"Details"),n.a.createElement(Te.a,{align:"right"},"Price")),n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,"Desc"),n.a.createElement(Te.a,{align:"right"},"Price"),n.a.createElement(Te.a,{align:"right"},"Qty."),n.a.createElement(Te.a,{align:"right"},"Total"))),n.a.createElement(Fe.a,null,a.products&&a.products.slice(f*p,f*p+p).map((function(e){return n.a.createElement(ke.a,{key:e.id},n.a.createElement(Te.a,null,n.a.createElement(Wa,{source:"name",record:e})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))})),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{colSpan:3},"Total"),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"grandTotal",record:{grandTotal:S},options:{style:"currency",currency:"HKD"}}))),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{colSpan:3},"Supplier Credit Line"),n.a.createElement(Te.a,{align:"right"},n.a.createElement("div",null,n.a.createElement(Fa.a,{source:"supplierLine",record:Object(_e.a)({},a),options:{style:"currency",currency:"HKD"}}),a.canCredit?null:n.a.createElement("h1",{style:{color:"red"}}," Over Credit "))))))),n.a.createElement(tc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:a.products.length,rowsPerPage:p,page:f,onChangePage:function(e,a){g(a)},onChangeRowsPerPage:function(e){E(parseInt(e.target.value,10)),g(0)}}))))},bl=t(729),hl=t.n(bl),fl=t(730),gl=t.n(fl);function vl(){var e=Object(Ce.a)(["\n  query {\n    products {\n      id\n      code\n      nameChi\n      nameEn\n      minOrderQuantity\n      quantity\n      minStockLevel\n      cost\n      wholeSalePrice1\n      wholeSalePrice2\n      wholeSalePrice3\n      wholeSalePrice4\n      wholeSalePrice5\n    }\n  }\n"]);return vl=function(){return e},e}var Ol=Ie()(vl()),yl=function(e){var a=e.formData,t=e.setFormData,r=Object(Ga.a)(),c=Object(D.a)({table:{minWidth:650}}),l=Object(Pe.b)(Ol).data,i=function(){var e=Object(Et.a)(pt.a.mark((function e(n){var c,o;return pt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.shift(),c=l.products.reduce((function(e,a){return e[a.code]=a,e}),{}),o=n.filter((function(e){var a=e[1]&&""!==e[1]&&e[1].replace(/-/g,"");return""!==e[0]&&""!==e[1]&&c[a]})).map((function(e){var a,t=e[1].replace(/-/g,"");a=!0===e[3].includes("/")?parseInt(e[0])*parseInt(e[3].split("/"[0])):e[0];var r=parseFloat(c[t].cost);return Object(_e.a)({},c[t],{quantity:a,price:r,totalPrice:a*r})})),r("Imported ".concat(o.length," Products")),t(Object(_e.a)({},a,{products:o}))}catch(i){r("Error: ".concat(i,"."),"warning")}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),u=c(),s=n.a.useState(5),m=Object(o.a)(s,2),d=m[0],p=m[1],E=n.a.useState(0),b=Object(o.a)(E,2),h=b[0],f=b[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(hl.a,{onFileLoaded:function(e){return i(e)},label:"Select .csv file  "}),n.a.createElement("a",{href:gl.a,target:"_blank"},"Template"),a.products&&a.products.length>0&&n.a.createElement(Ae.a,null,n.a.createElement(sl.a,{component:Ae.a},n.a.createElement(we.a,{className:u.table,size:"small","aria-label":"a dense table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,{align:"right"},"Product no."),n.a.createElement(Te.a,{align:"right"},"Name"),n.a.createElement(Te.a,{align:"right"},"Cost"),n.a.createElement(Te.a,{align:"right"},"Quantity"),n.a.createElement(Te.a,{align:"right"},"Subtotal"))),n.a.createElement(Fe.a,null,a.products.slice(h*d,h*d+d).map((function(e){return n.a.createElement(ke.a,{key:e.item},n.a.createElement(Te.a,{align:"right"},e.code),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Wa,{source:"name",record:e})),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),n.a.createElement(Te.a,{align:"right"},e.quantity),n.a.createElement(Te.a,{align:"right"},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))}))))),n.a.createElement(tc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:a.products.length,rowsPerPage:d,page:h,onChangePage:function(e,a){f(a)},onChangeRowsPerPage:function(e){p(parseInt(e.target.value,10)),f(0)}})))};function Sl(){var e=Object(Ce.a)(["\n  query getFirstSupplier {\n    suppliers(first: 1) {\n      id\n      name\n      creditLine\n    }\n  }\n"]);return Sl=function(){return e},e}function jl(){var e=Object(Ce.a)(["\n  query getLastPurchaseOrder {\n    purchaseOrders(orderBy: code_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return jl=function(){return e},e}function Dl(){var e=Object(Ce.a)(["\n  mutation createPurchaseOrder($data: PurchaseOrderCreateInput!) {\n    createPurchaseOrder(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Dl=function(){return e},e}var Cl=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),Pl=Ie()(Dl()),xl=Ie()(jl()),Il=Ie()(Sl()),wl=function(e){var a,t=e.permissions,c=(Object(I.a)(e,["permissions"]),Object(j.e)()),l=Object(k.a)(),i=Cl(),u=Object(me.g)(),s=Object(Pe.a)(Pl),m=Object(o.a)(s,1)[0],d=Object(r.useState)(0),p=Object(o.a)(d,2),E=p[0],b=p[1],h={code:"",supplier:null,expectedDeliveryAt:ja()().add(4,"month").toDate(),products:[],state:"PENDING"},f=Object(r.useState)(h),g=Object(o.a)(f,2),v=g[0],O=g[1];c(Ha([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/create",label:"Create New"}]));var y=Object(Pe.b)(xl),S=y.loading,D=y.data;Object(r.useEffect)((function(){if(D&&D.purchaseOrders.length>0&&""===v.code){var e=D.purchaseOrders[0];O(Object(_e.a)({},v,{code:rt(e.code)}))}}),[D,v]);var C=Object(Pe.b)(Il),P=C.loading,x=C.data;if(Object(r.useEffect)((function(){if(x&&x.suppliers.length>0&&!v.supplier){var e=x.suppliers[0];O(Object(_e.a)({},v,{supplier:e}))}}),[x,v]),S||P)return"<div>Loading...</div>";var w=[l("purchaseOrder.selectProducts"),l("purchaseOrder.purchaseOrderDetails"),l("purchaseOrder.review")];return a=0==E&&0==v.products.length,n.a.createElement("main",{className:i.layout},n.a.createElement(Ae.a,{className:i.paper},n.a.createElement(A.a,{component:"h1",variant:"h4",align:"center"},l("purchaseOrder.createPurchaseOrder"),n.a.createElement(qc.a,{style:{float:"right"},badgeContent:v.products.length,color:"primary"},n.a.createElement(Yc.a,null))),n.a.createElement(Be.a,{activeStep:E,className:i.stepper},w.map((function(e){return n.a.createElement($e.a,{key:e},n.a.createElement(Ve.a,null,e))}))),n.a.createElement(n.a.Fragment,null,0===E&&n.a.createElement(yl,{formData:v,setFormData:O}),1===E&&n.a.createElement(ul,{permissions:t,formData:v,setFormData:O}),2===E&&n.a.createElement(El,{formData:v,setFormData:O}),n.a.createElement("div",{className:i.buttons},E>0&&n.a.createElement(Le.a,{onClick:function(){b(E-1)},color:"primary"},l("common.prev")),E<2&&n.a.createElement(Le.a,{onClick:function(){b(E+1)},color:"primary",disabled:a},l("common.next")),2===E&&n.a.createElement(Le.a,{onClick:function(){var e={code:v.code,supplierId:v.supplier.id,expectedDeliveryAt:ja()(v.expectedDeliveryAt).toISOString(),totalPrice:v.products.reduce((function(e,a){return e+parseFloat(a.quantity)*parseFloat(a.price)}),0),state:v.state,products:{create:v.products.map((function(e){return{productId:e.id,quantity:parseInt(e.quantity,10),price:parseFloat(e.price),totalPrice:parseFloat(e.quantity)*parseFloat(e.price)}}))}};m({variables:{data:e}}).then((function(){u.push("/PurchaseOrder")}))},color:"primary",disabled:1!=v.canCredit},l("common.save"))))))},Nl=function(e){var a=Object(r.useState)("ARRIVED"),t=Object(o.a)(a,2),c=t[0],l=t[1],i=Object(j.e)(),u=Object(k.a)(),s=Object(me.g)(),m=function(e){return function(){console.log("record",e)}};return n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:9},n.a.createElement(A.a,{variant:"h6"},u("common.information"),"\xa0",n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var a=e.id;s.push("/PurchaseOrder/".concat(a,"/edit"))},disabled:c&&"ARRIVED"===c},n.a.createElement(Qr.a,null),"\xa0",u("common.edit"))),n.a.createElement(Yt.a,Object.assign({title:"Purchase Order Details",actions:n.a.createElement(n.a.Fragment,null)},e),(function(e){var a=e.record?e.record.code:"",t=e.record?e.record.id:"";return i(Ha([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/".concat(t,"/show"),label:"Details: ".concat(a)}])),n.a.createElement(Lt.a,e,n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Supplier",source:"supplier.id",reference:"Supplier",link:!1},n.a.createElement(Ta.a,{source:"name"})),n.a.createElement(Ta.a,{source:"code",label:"Supplier No."}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Status"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Aa.a,{addLabel:!1,render:function(e){return function(e){return console.log("record: ",e),l(e.state),e.state}(e)}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Cost"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"totalPrice",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Expected Delivery Date"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(zt.a,{addLabel:!1,source:"expectedDeliveryAt"}))))),n.a.createElement(Ya.a,{item:!0,xs:12},n.a.createElement(A.a,{variant:"h6"},u("purchaseOrder.products"),"\xa0",n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var a=e.id;s.push("/PurchaseOrderItem/create",{record:{purchaseOrder:{id:a}}})},disabled:c&&"ARRIVED"===c},n.a.createElement(Xr.a,null),"\xa0",u("common.create"))),n.a.createElement(Yt.a,Object.assign({title:"Products",actions:n.a.createElement(n.a.Fragment,null)},e),(function(e){if(!e.record)return null;var a=e.record?e.record.id:"";return n.a.createElement(wa.a,{resource:"PurchaseOrderItem",hasCreate:!1,hasEdit:!1,hasShow:!1,hasList:!0,exporter:!1,basePath:"/PurchaseOrderItem",filter:{purchaseOrder:{id:a}}},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Fa.a,{source:"price",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Aa.a,{render:function(e){return n.a.createElement(Le.a,{color:"primary",size:"small",disabled:c&&"ARRIVED"==c,onClick:m(e)},n.a.createElement(Qr.a,null),"\xa0",u("common.edit"))}})))}))))},kl=function(e){var a=Object(j.e)(),t=Object(k.a)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard"},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Purchase Order No."}),n.a.createElement(nr.a,{source:"expectedDeliveryAt"}),n.a.createElement(rr.a,{source:"state",label:"Status",choices:[{id:"DRAFT",name:t("common.draft")},{id:"PENDING",name:t("common.pending")},{id:"CONFIRMED",name:t("common.confirmed")}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/".concat(t.id),label:"Edit: ".concat(t.code)}])),null}))))},Tl=function(e){return Object(j.e)()(Ha([{url:"/PurchaseOrder",label:"Purchase Order"}])),n.a.createElement(wa.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code",label:"Purchase Order No."}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),n.a.createElement(zt.a,{source:"expectedDeliveryAt"}),n.a.createElement(Ta.a,{source:"state",label:"Status"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(qt.a,null)))},Fl=t(731),Al=t(1104);var Wl=function(e){var a=e.formData,t=e.setFormData,r=Object(k.a)();return n.a.createElement(Ya.a,{container:!0},n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(at,{onChange:function(e){e.products.forEach((function(e){e.exactQuantity=0,e.totalPrice=0})),t(Object(_e.a)({},a,{purchaseOrder:e}))},defaultValue:a.purchaseOrder})),a.purchaseOrder&&function(){var e=a.purchaseOrder,t=ja()(e.expectedDeliveryAt);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("purchaseOrder.supplier")},e.supplier.name)),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("purchaseOrder.expectedDeliveryAt")},t.format("YYYY-MM-DD")," ")),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("purchaseOrder.state")},e.state)),n.a.createElement(Ya.a,{item:!0,xs:12,sm:6},n.a.createElement(vr,{label:r("purchaseOrder.totalPrice")},n.a.createElement(Fa.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}}))))}())},Rl=t(1199),Ml=t(1200),ql=t(732),Yl=t.n(ql),Ll=t(733),Bl=t.n(Ll),Hl=t(1154),Kl=Object(D.a)({root:{"& > *":{borderBottom:"unset"}}}),$l=function(e){var a=e.row,t=e.onRowClick,r=e.onRemoveChecked,c=n.a.useState(!1),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Kl(),m=a.product,d=a.checked,p=a.quantity,E=a.id,b=d?d.reduce((function(e,a){return e+=parseInt(a.exactQuantity,10)}),0):0;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ke.a,{hover:!0,className:s.root,onClick:function(){return u(!i)}},n.a.createElement(Te.a,null,n.a.createElement(q.a,{"aria-label":"expand row",size:"small",onClick:function(){return u(!i)}},i?n.a.createElement(Rl.a,null):n.a.createElement(Ml.a,null))),n.a.createElement(Te.a,null,n.a.createElement(Ta.a,{source:"code",record:m})),n.a.createElement(Te.a,{component:"th"},n.a.createElement(Wa,{source:"name",record:m})),n.a.createElement(Te.a,{align:"right"},p),n.a.createElement(Te.a,{align:"right"},b),n.a.createElement(Te.a,{align:"right"},n.a.createElement(q.a,{onClick:function(){t&&t(a)}},p===b?n.a.createElement(Yl.a,{color:"secondary"}):n.a.createElement(Bl.a,{color:"primary"})))),n.a.createElement(ke.a,null,n.a.createElement(Te.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},n.a.createElement(Hl.a,{in:i,timeout:"auto",unmountOnExit:!0},n.a.createElement(De.a,{margin:1},n.a.createElement(A.a,{variant:"h6",gutterBottom:!0,component:"div"},"Details"),n.a.createElement(we.a,{size:"small","aria-label":"purchases"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null,"Warehouse"),n.a.createElement(Te.a,null,"Expiry Date"),n.a.createElement(Te.a,null,"Quantity"),n.a.createElement(Te.a,null,"Labels"),n.a.createElement(Te.a,{align:"right"}))),n.a.createElement(Fe.a,null,d&&d.map((function(e,t){return n.a.createElement(ke.a,{key:"checked-".concat(E,"-").concat(t)},n.a.createElement(Te.a,null,n.a.createElement(ka.a,{source:"warehouseId",record:e,reference:"Warehouse",basePath:"/Warehouse"},n.a.createElement(Ta.a,{source:"name"}))),n.a.createElement(Te.a,null,n.a.createElement(zt.a,{source:"expiryDate",record:e})),n.a.createElement(Te.a,null,n.a.createElement(Fa.a,{source:"exactQuantity",record:e})),n.a.createElement(Te.a,{align:"right"},e.labelFrom," - ",e.labelTo),n.a.createElement(Te.a,null,n.a.createElement(Le.a,{variant:"outlined",size:"small",onClick:(c=t,function(){r&&r(c,a)}),color:"secondary"},n.a.createElement(Xn.a,null),n.a.createElement(A.a,{variant:"body1"},"Remove"))));var c})))))))))},Vl=function(e){var a=e.products,t=e.filterItemId,r=e.onRowClick,c=e.onRemoveChecked,l=Object(k.a)(),i=n.a.useState(25),u=Object(o.a)(i,2),s=u[0],m=u[1],d=n.a.useState(0),p=Object(o.a)(d,2),E=p[0],b=p[1],h=t?[a.find((function(e){return e.id===t}))]:a;return n.a.createElement(n.a.Fragment,null,n.a.createElement(sl.a,{component:Ae.a},n.a.createElement(we.a,{"aria-label":"simple table"},n.a.createElement(Ne.a,null,n.a.createElement(ke.a,null,n.a.createElement(Te.a,null),n.a.createElement(Te.a,null,l("product.code")),n.a.createElement(Te.a,null,l("product.name")),n.a.createElement(Te.a,{align:"right"},l("product.quantity")),n.a.createElement(Te.a,{align:"right"},l("shipping.quantityCheck")),n.a.createElement(Te.a,{align:"right"},l("shipping.status")))),n.a.createElement(Fe.a,null,h.slice(E*s,E*s+s).map((function(e){return n.a.createElement($l,{row:e,key:e.id,onRowClick:r,onRemoveChecked:c})}))))),n.a.createElement(tc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:a.length,rowsPerPage:s,page:E,onChangePage:function(e,a){b(a)},onChangeRowsPerPage:function(e){m(parseInt(e.target.value,10)),b(0)}}))};var Ul=function(e){var a=e.formData,t=Object(k.a)(),r=a.purchaseOrder.products;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{variant:"h6",gutterBottom:!0},t("menu.item.shipping")),n.a.createElement(Vl,{products:r}))};var _l=function(e){var a=e.input,t=e.backendData;console.log("backend Data: ",t),console.log("input: ",a);var r=[];t.forEach((function(e,t){var n=e.labelFrom,c=e.labelTo;r[t]={labelFrom:!1,labelTo:!1},a.labelFrom>c&&(r[t].labelFrom=!0),a.labelTo>c&&(r[t].labelTo=!0),console.log({labelFrom:n,labelTo:c}),console.log(r[t])}));var n=r.find((function(e){var a=e.labelFrom,t=e.labelTo;return!0===a&&!0===t}));return console.log("res: --",n),void 0==n};function Gl(){var e=Object(Ce.a)(["\n  query queryShippingItems {\n    shippingItems {\n      labelFrom\n      labelTo\n    }\n  }\n"]);return Gl=function(){return e},e}var zl=Ie()(Gl()),Ql=function(e){var a=e.formData,t=e.setFormData,c=Object(Ga.a)(),l=Object(r.useState)(""),i=l.defaultLabel,u=(l.setDefaultLabel,a.purchaseOrder),s=u.products,m=Object(Pe.b)(zl),d=(m.loading,m.data),p=Object(r.useState)([]),E=Object(o.a)(p,2),b=E[0],h=E[1];Object(r.useEffect)((function(){console.log("call useUffect: ",d),d&&(h(d.shippingItems),console.log("fetching data.....",d.shippingItems),console.log("inside",b))}),[d]);var f=s.map((function(e){return{id:e.id,name:e.product.code+" - "+e.product.nameChi}}));return n.a.createElement(br.b,{onSubmit:function(e,r){var n=s.find((function(a){return a.id===e.itemId}));if(n){n.checked||(n.checked=[]);var l=e.labelFrom?rt(e.labelFrom,parseInt(e.exactQuantity,10)-1):"",o=_l({input:{labelFrom:e.labelFrom,labelTo:l},backendData:b});console.log("checking",o),n.checked.push(Object(_e.a)({},e,{labelTo:l})),t(Object(_e.a)({},a,{purchaseOrder:Object(_e.a)({},u,{products:s})})),setTimeout((function(){return r.reset({warehouseId:e.warehouseId,expiryDate:e.expiryDate,labelFrom:e.labelFrom?rt(l):""})}))}else c("Please select product first","error")},render:function(e){var r=e.handleSubmit,c=e.values,l=e.form,o=e.submitting,m=e.pristine,d=c.quantity,p=c.labelFrom;d&&p&&console.log(d,p);var E=function(e){l.change("itemId",e.id)},b=function(e,r){s.find((function(e){return e.id===r.id})).checked.splice(e,1),t(Object(_e.a)({},a,{purchaseOrder:Object(_e.a)({},u,{products:s})}))};return n.a.createElement("form",{onSubmit:r},n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,style:{flexGrow:1}},n.a.createElement(yn.a,{source:"itemId",fullWidth:!0,choices:f,validate:Object(Wt.c)()})),n.a.createElement(Ya.a,{item:!0},n.a.createElement(tr.a,{label:"Warehouse",source:"warehouseId",reference:"Warehouse",filterToQuery:function(){return{type:"NORMAL"}}},n.a.createElement(rr.a,{optionText:"name",validate:Object(Wt.c)()}))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(nr.a,{source:"expiryDate",validate:Object(Wt.c)()})),n.a.createElement(Ya.a,{item:!0},n.a.createElement(Cn.a,{source:"exactQuantity",label:"Quantity",validate:Object(Wt.c)()})),n.a.createElement(Ya.a,{item:!0},n.a.createElement(xa.a,{source:"labelFrom",defaultValue:i})),n.a.createElement(Ya.a,{item:!0},n.a.createElement(Ja.a,null,(function(e){var a=e.formData,t=(Object(I.a)(e,["formData"]),a.exactQuantity),r=a.labelFrom;if(t&&r)return n.a.createElement(A.a,{variant:"body1"},rt(r,parseInt(t-1,10)))}))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(Le.a,{type:"submit",color:"primary",variant:"contained",disabled:o},n.a.createElement(Xr.a,null),"Add Record"),n.a.createElement(Le.a,{type:"button",onClick:l.reset,disabled:o||m},"Reset"))),n.a.createElement(Ja.a,null,(function(e){var a=e.formData;Object(I.a)(e,["formData"]);return n.a.createElement(Vl,{products:s,filterItemId:a.itemId,onRowClick:E,onRemoveChecked:b})})))}})};var Jl=function(e){var a=e.formData,t=e.setFormData;return e.setCheckSuccess,n.a.createElement(De.a,{p:1},n.a.createElement(Ql,{setFormData:t,formData:a}))};function Xl(){var e=Object(Ce.a)(["\n  mutation createShipping($data: ShippingCreateInput!) {\n    createShipping(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Xl=function(){return e},e}var Zl=be()((function(e){return{layout:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),eo=Ie()(Xl()),ao=function(){var e=Object(j.e)(),a=Object(k.a)(),t=Zl(),c=Object(me.g)(),l=Object(Ga.a)(),i=Object(Pe.a)(eo),u=Object(o.a)(i,1)[0],s=Object(r.useState)(0),m=Object(o.a)(s,2),d=m[0],p=m[1],E=Object(r.useState)(!1),b=Object(o.a)(E,2),h=(b[0],b[1]),f=n.a.useState(!1),g=Object(o.a)(f,2),v=g[0],O=g[1],y=Object(r.useState)({purchaseOrder:null,checkedProducts:{},totalPrice:0}),S=Object(o.a)(y,2),D=S[0],C=S[1];e(Ha([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/create",label:"Create New"}]));var P=[a("shipping.selectPurchaseOrder"),a("shipping.quantityCheck"),a("shipping.review")],x=function(){O(!0)},I=function(e){return function(){e?(O(!1),p(d+1)):O(!1)}};return n.a.createElement("main",{className:t.layout},n.a.createElement(Ae.a,{className:t.paper},n.a.createElement(Be.a,{activeStep:d,className:t.stepper},P.map((function(e){return n.a.createElement($e.a,{key:e},n.a.createElement(Ve.a,null,e))}))),n.a.createElement(Sc.a,{open:v,onClose:I,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(jc.a,{id:"alert-dialog-title"},"Warning!!"),n.a.createElement(Dc.a,null,n.a.createElement(Al.a,{id:"alert-dialog-description"},"Some product's quantity not match! Continue?")),n.a.createElement(Cc.a,null,n.a.createElement(Le.a,{onClick:I(!1),color:"primary"},"No"),n.a.createElement(Le.a,{onClick:I(!0),color:"primary",autoFocus:!0},"Yes"))),n.a.createElement(n.a.Fragment,null,0===d&&n.a.createElement(Wl,{formData:D,setFormData:C}),1===d&&n.a.createElement(Jl,{setCheckSuccess:h,formData:D,setFormData:C}),2===d&&n.a.createElement(Ul,{formData:D}),n.a.createElement("div",{className:t.buttons},d>0&&n.a.createElement(Le.a,{onClick:function(){p(d-1)},color:"primary"},a("common.prev")),d<2&&n.a.createElement(Le.a,{onClick:function(){1!==d||function(){var e,a=D.purchaseOrder.products,t=Object(Fl.a)(a);try{for(t.s();!(e=t.n()).done;){var r=e.value;if((parseInt(r.quantity,10)||0)!==(r.checked?r.checked.reduce((function(e,a){return e+=parseInt(a.exactQuantity,10)}),0):0))return!1}}catch(n){t.e(n)}finally{t.f()}return!0}()?p(d+1):x()},color:"primary"},a("common.next")),2===d&&n.a.createElement(Le.a,{onClick:function(){var e=D.purchaseOrder,a=D.totalPrice;u({variables:{data:{code:"SP-".concat(e.code),purchaseOrderId:e.id,deliveryAt:ja()().toISOString(),totalPrice:a,products:{create:e.products.reduce((function(e,a){var t=a.checked;if(!t||0===t.length)return e;var r=parseInt(a.quantity,10)||0,n=t.map((function(e){return{productId:a.product.id,warehouseId:e.warehouseId,labelFrom:e.labelFrom,labelTo:e.labelTo,expiryDate:"-"===e.expiryDate?null:e.expiryDate,expectedQuantity:r,quantity:parseInt(e.exactQuantity,10)||0,price:a.price,totalPrice:r*a.price}}));return[].concat(Object(pe.a)(e),Object(pe.a)(n))}),[])}}}}).then((function(){c.push("/Shipping")})).catch((function(e){l("Error: ".concat(e.message),"warning")}))},color:"primary"},a("common.confirm"))))))},to=function(e){var a=Object(j.e)();return n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:9},n.a.createElement(A.a,{variant:"h6"},"Shipping no.\xa0"),n.a.createElement(Yt.a,Object.assign({title:"Purchase Order Details",actions:n.a.createElement(n.a.Fragment,null)},e),(function(e){var t=e.record?e.record.code:"",r=e.record?e.record.id:"";return a(Ha([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/".concat(r,"/show"),label:"Details: ".concat(t)}])),n.a.createElement(Lt.a,e,n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"code",label:"Shipping No."}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Total Price"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Delivery Date"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(zt.a,{source:"deliveryAt"})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Purchase Order"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Purchase Order",reference:"PurchaseOrder",source:"purchaseOrder.id",link:"show"},n.a.createElement(Ta.a,{source:"code",label:"Purchase Order No."})),n.a.createElement(ka.a,{label:"Purchase Order",reference:"PurchaseOrder",source:"purchaseOrder.id",link:"show"},n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:12,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Items"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(hr.a,{label:"Items",reference:"ShippingItem",source:"productsIds"},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"#",source:"product.id",reference:"Product"},n.a.createElement(Ta.a,{source:"code",label:"Product No."})),n.a.createElement(ka.a,{label:"Product Name",source:"product.id",reference:"Product"},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Ta.a,{source:"labelFrom"}),n.a.createElement(Ta.a,{source:"labelTo"}),n.a.createElement(zt.a,{source:"expiryDate"}),n.a.createElement(Fa.a,{source:"price",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Fa.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))))},ro=function(e){var a=Object(j.e)();return console.log("Edit props",e),n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard"},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Shipping No."}),n.a.createElement(nr.a,{source:"expectedDeliveryAt"}),n.a.createElement(rr.a,{source:"state",choices:[{id:"DRAFT",name:"DRAFT"},{id:"APPROVED",name:"APPROVED"},{id:"CONFIRMED",name:"CONFIRMED"}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/".concat(t.id),label:"Edit: ".concat(t.code)}])),null}))))},no=function(e){return Object(j.e)()(Ha([{url:"/Shipping",label:"Shipping"}])),n.a.createElement(wa.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETE"},sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code",label:"Shipping No."}),n.a.createElement(zt.a,{source:"deliveryAt"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(qt.a,null)))},co=t(1212),lo=t(1203),oo=t(1225),io=t(1204),uo=t(1201),so=t(1202),mo=function(e){var a=Object(j.e)(),t=Object(k.a)(),r=Object(me.g)();return n.a.createElement(Ya.a,{container:!0,spacing:2},n.a.createElement(Ya.a,{item:!0,xs:6},n.a.createElement(A.a,{variant:"h6"},"Basic Information\xa0",n.a.createElement(Le.a,{color:"primary",size:"small",onClick:function(){var a=e.basePath,t=e.id;r.push("".concat(a,"/").concat(t,"/edit"))}},n.a.createElement(Qr.a,null),"\xa0",t("common.edit"))),n.a.createElement(Yt.a,Object.assign({title:"Product Details",actions:n.a.createElement(n.a.Fragment,null)},e),(function(e){var t=e.record?e.record.code:"",r=e.record?e.record.id:"";return a(Ha([{url:"/Product",label:"Product"},{url:"/Product/".concat(r,"/show"),label:"Details: ".concat(t)}])),n.a.createElement(Lt.a,e,n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"code",label:"Product No."}),n.a.createElement(Ta.a,{source:"nameEn"}),n.a.createElement(Ta.a,{source:"nameChi"}),n.a.createElement(Ta.a,{source:"discount"}),n.a.createElement(Ta.a,{source:"shortDescription"}),n.a.createElement(Ta.a,{source:"longDescription"}),n.a.createElement(Ta.a,{source:"sku"}),n.a.createElement(Ta.a,{source:"upc"}),n.a.createElement(Ta.a,{source:"minOrderQuantity"}),n.a.createElement(Ta.a,{source:"minStockLevel"}),n.a.createElement(zt.a,{source:"onlineDate"}),n.a.createElement(zt.a,{source:"offlineDate"}),n.a.createElement(hr.a,{label:"Categories",reference:"ProductCategory",source:"categoriesIds"},n.a.createElement(uo.a,null,n.a.createElement(so.a,{source:"nameChi"})))))}))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Cost"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"cost",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Wholesales Prices"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"wholeSalePrice1",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"wholeSalePrice2",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"wholeSalePrice3",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"wholeSalePrice4",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"wholeSalePrice5",options:{style:"currency",currency:"HKD"}})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Retails Prices"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Fa.a,{source:"retailPrice1",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"retailPrice2",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"retailPrice3",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"retailPrice4",options:{style:"currency",currency:"HKD"}}),n.a.createElement(Fa.a,{source:"retailPrice5",options:{style:"currency",currency:"HKD"}}))))),n.a.createElement(Ya.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Total Stock"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"quantity",addLabel:!1})))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Warehouse Summary"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(hr.a,{reference:"WarehouseSummary",source:"warehouseSummariesIds"},n.a.createElement(Na.a,null,n.a.createElement(ka.a,{label:"Warehouse",source:"warehouse.id",reference:"Warehouse"},n.a.createElement(Ta.a,{source:"name"})),n.a.createElement(Ta.a,{source:"quantity"})))))),n.a.createElement(Ya.a,{item:!0},n.a.createElement(A.a,{variant:"h6"},"Expiry Date Summary"),n.a.createElement(Lt.b,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Bt.a,null,n.a.createElement(hr.a,{reference:"ExpiryDateSummary",source:"expiryDateSummariesIds"},n.a.createElement(Na.a,null,n.a.createElement(zt.a,{source:"expiryDate"}),n.a.createElement(Ta.a,{source:"quantity"}))))))))},po=function(){return"/Product"},Eo={url:"/Product",label:"Product"},bo=function(e){return Object(j.e)()(Ha([Eo,{url:"/Product/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:po},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Product No."}),n.a.createElement(xa.a,{source:"brandEn",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"brandChi",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(Cn.a,{source:"package",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"discount"}),n.a.createElement(xa.a,{source:"weight",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"shortDescription"}),n.a.createElement(xa.a,{source:"longDescription"}),n.a.createElement(co.a,{source:"images",accept:"image/*",multiple:!0},n.a.createElement(lo.a,{source:"src",title:"title"})),n.a.createElement(xa.a,{source:"sku"}),n.a.createElement(xa.a,{source:"upc",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"cost",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice1",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice2",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice3",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice4",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice5",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"retailPrice1",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"retailPrice2",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"retailPrice3",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"retailPrice4",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"retailPrice5",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"minOrderQuantity",defaultValue:10}),n.a.createElement(Cn.a,{source:"minStockLevel",defaultValue:0}),n.a.createElement(nr.a,{source:"onlineDate"}),n.a.createElement(nr.a,{source:"offlineDate"})))},ho=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:po},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Product No."}),n.a.createElement(xa.a,{source:"brandEn",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"brandChi",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)(),fullWidth:!0}),n.a.createElement(Cn.a,{source:"package",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"discount"}),n.a.createElement(xa.a,{source:"weight",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"shortDescription"}),n.a.createElement(xa.a,{source:"longDescription"}),n.a.createElement(co.a,{source:"images",accept:"image/*",multiple:!0},n.a.createElement(lo.a,{source:"src",title:"title"})),n.a.createElement(xa.a,{source:"sku"}),n.a.createElement(xa.a,{source:"upc"}),n.a.createElement(Cn.a,{source:"cost",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice1",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice2",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice3",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice4",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"wholeSalePrice5",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"minOrderQuantity"}),n.a.createElement(Cn.a,{source:"minStockLevel"}),n.a.createElement(nr.a,{source:"onlineDate"}),n.a.createElement(nr.a,{source:"offlineDate"}),n.a.createElement(oo.a,{label:"Category",source:"categoriesIds",reference:"ProductCategory"},n.a.createElement(io.a,{optionText:"nameEn"})),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([Eo,{url:"/Product/".concat(t.id),label:"Edit: ".concat(t.code)}])),null}))))},fo=function(e){return Object(j.e)()(Ha([Eo])),n.a.createElement(wa.a,e,n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code",label:"Product No."}),n.a.createElement(Wa,{source:"name"}),n.a.createElement(hr.a,{label:"Categories",reference:"ProductCategory",source:"categoriesIds"},n.a.createElement(uo.a,null,n.a.createElement(so.a,{source:"nameChi"}))),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},go=function(){return"/Customer"},vo={url:"/Customer",label:"Customer"},Oo=function(e){return Object(j.e)()(Ha([vo,{url:"/Customer/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:go},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Customer No."}),n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"mobile",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"email",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"district"}),n.a.createElement(xa.a,{source:"billingAddress"}),n.a.createElement(xa.a,{source:"salesman"}),n.a.createElement(xa.a,{source:"website"}),n.a.createElement(xa.a,{source:"remark",multiline:!0}),n.a.createElement(tr.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},n.a.createElement(rr.a,{optionText:"name",validate:Object(Wt.c)()})),n.a.createElement(rr.a,{source:"wholesalePlan",validate:Object(Wt.c)(),choices:[{id:1,name:"Plan 1"},{id:2,name:"Plan 2"},{id:3,name:"Plan 3"},{id:4,name:"Plan 4"},{id:5,name:"Plan 5"}]}),n.a.createElement(rr.a,{source:"paymentMethod",validate:Object(Wt.c)(),choices:[{id:"credit",name:"Credit"},{id:"debit",name:"Debit"},{id:"c.o.d",name:"C.O.D"}]})))},yo=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:go},n.a.createElement(xa.a,{source:"code",validate:Object(Wt.c)(),label:"Customer No."}),n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"mobile"}),n.a.createElement(xa.a,{source:"email",validate:Object(Wt.b)()}),n.a.createElement(xa.a,{source:"district"}),n.a.createElement(xa.a,{source:"billingAddress"}),n.a.createElement(xa.a,{source:"salesman"}),n.a.createElement(xa.a,{source:"website"}),n.a.createElement(xa.a,{source:"remark",multiline:!0}),n.a.createElement(tr.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},n.a.createElement(rr.a,{optionText:"name",validate:Object(Wt.c)()})),n.a.createElement(rr.a,{source:"wholesalePlan",validate:Object(Wt.c)(),choices:[{id:1,name:"Plan 1"},{id:2,name:"Plan 2"},{id:3,name:"Plan 3"},{id:4,name:"Plan 4"},{id:5,name:"Plan 5"}]}),n.a.createElement(rr.a,{source:"paymentMethod",validate:Object(Wt.c)(),choices:[{id:"CREDIT",name:"Credit"},{id:"DEBIT",name:"Debit"},{id:"COD",name:"C.O.D"}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([vo,{url:"/Customer/".concat(t.id),label:"Edit: ".concat(t.nameEn)}])),null}))))};var So=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){console.log("controllerProps: ",t);var r=t.record?t.record.nameEn:"",c=t.record?t.record.id:"";return a(Ha([vo,{url:"/Customer/".concat(c,"/show"),label:"Details: ".concat(r)}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"code"}),n.a.createElement(Ta.a,{source:"nameEn"}),n.a.createElement(Ta.a,{source:"nameChi"}),n.a.createElement(Ta.a,{source:"wholesalePlan"}),n.a.createElement(Ta.a,{source:"mobile"}),n.a.createElement(Gt.a,{source:"email"}),n.a.createElement(Ta.a,{source:"district"}),n.a.createElement(Ta.a,{source:"billingAddress"}),n.a.createElement(Ta.a,{source:"salesman"}),n.a.createElement(Ta.a,{source:"website"}),n.a.createElement(Ta.a,{source:"remark"}),n.a.createElement(ka.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},n.a.createElement(Ta.a,{source:"name"})),n.a.createElement(Ta.a,{source:"paymentMethod"}),n.a.createElement(hr.a,{label:"Shops",reference:"CustomerShop",source:"shopsIds"},n.a.createElement(uo.a,null,n.a.createElement(ka.a,{source:"id",reference:"CustomerShop",link:function(e,a){return"/CustomerShop/".concat(e.id,"/show")}},n.a.createElement(Ta.a,{source:"nameChi"})))),n.a.createElement(hr.a,{label:"Customer Coupons",reference:"CustomerCoupon",source:"couponsIds",filter:{state_not_in:"EMPTY"}},n.a.createElement(Na.a,null,n.a.createElement(Ta.a,{source:"code"}),n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Ta.a,{source:"discount"}),n.a.createElement(Ta.a,{source:"state"}),n.a.createElement(Ta.a,{source:"quantity"}),n.a.createElement(Ta.a,{source:"type"}))),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"})))}))},jo=function(e){return Object(j.e)()(Ha([vo])),n.a.createElement(wa.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"code"}),n.a.createElement(Wa,{source:"name"}),n.a.createElement(ka.a,{label:"Group",source:"group.id",reference:"CustomerGroup",link:"show"},n.a.createElement(Ta.a,{source:"name"})),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},Do=t(1205),Co=function(){return"/User"},Po={url:"/User",label:"User"},xo=function(e){var a=Object(j.e)(),t=Object(Da.a)(),r=(t.loaded,t.permissions),c=JSON.parse(localStorage.getItem("group"));return a(Ha([Po,{url:"/User/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Co},n.a.createElement(xa.a,{source:"name"}),n.a.createElement(Do.a,{source:"password"}),n.a.createElement(tr.a,{label:"Company Group",source:"group.id",reference:"UserGroup",filter:"superadmin"===r?{}:{id:c.id}},n.a.createElement(rr.a,{source:"name"})),n.a.createElement(rr.a,{source:"permission",choices:"superadmin"===r?[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"},{id:"SUPERADMIN",name:"SUPERADMIN"}]:[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"}]})))},Io=function(e){var a=Object(j.e)(),t=JSON.parse(localStorage.getItem("group")),r=Object(Da.a)(),c=(r.loaded,r.permissions);return a(Ha([Po,{url:"/User/edit",label:"User Edit"}])),n.a.createElement(Mt.a,e,"admin"===c||"superadmin"===c?n.a.createElement(Qa.a,{variant:"standard",redirect:Co},n.a.createElement(xa.a,{source:"name"}),"superadmin"===c?n.a.createElement(Do.a,{source:"password"}):null,n.a.createElement(tr.a,{label:"Company Group",source:"group.id",reference:"UserGroup",filter:"superadmin"===c?{}:{id:t.id}},n.a.createElement(rr.a,{source:"name"})),n.a.createElement(rr.a,{source:"permission",choices:"superadmin"===c?[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"},{id:"SUPERADMIN",name:"SUPERADMIN"}]:[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"}]})):n.a.createElement("h1",null,"No Permission"))},wo=function(e){var a=Object(j.e)(),t=Object(Da.a)(),r=(t.loaded,t.permissions);return n.a.createElement(Yt.a,e,(function(t){var c=t.record?t.record.id:"";return a(Ha([Po,{url:"/User/".concat(c,"/show"),label:"Details"}])),n.a.createElement(Lt.a,Object.assign({},e,t,{hasEdit:"superadmin"===r||"admin"===r}),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Ta.a,{source:"permission"}),"superadmin"===r?n.a.createElement(Ta.a,{source:"password"}):null,n.a.createElement(ka.a,{label:"company Group",source:"group.id",reference:"UserGroup",link:"show"},n.a.createElement(Ta.a,{source:"name"}))))}))},No=function(e){var a=Object(j.e)(),t=Object(Da.a)(),r=(t.loaded,t.permissions),c=JSON.parse(localStorage.getItem("group"));return console.log("group",c),console.log("permissions",r),a(Ha([Po])),n.a.createElement(wa.a,Object.assign({},e,{hasCreate:"admin"===r||"superadmin"===r,sort:{field:"createdAt",order:"DESC"},filterDefaultValues:"superadmin"===r?{}:{permission_not:"SUPERADMIN",group:{id:c.id}}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(ka.a,{label:"company group",source:"group.id",reference:"UserGroup",link:"show"},n.a.createElement(so.a,{source:"name"})),n.a.createElement(Ta.a,{source:"permission"}),"admin"===r||"superadmin"===r?n.a.createElement(Ia.a,null):null,"superadmin"===r?n.a.createElement(qt.a,null):null))},ko=function(){return"/UserGroup"},To={url:"/UserGroup",label:"UserGroup"},Fo=function(e){return Object(j.e)()(Ha([To,{url:"/UserGroup/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:ko},n.a.createElement(xa.a,{source:"name"})))},Ao=function(e){var a=Object(j.e)(),t=Object(Da.a)();t.loaded,t.permissions;return a(Ha([To,{url:"/UserGroup/edit",label:"UserGroup Edit"}])),n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:ko},n.a.createElement(xa.a,{source:"name"})))},Wo=function(e){var a=Object(j.e)(),t=Object(Da.a)(),r=(t.loaded,t.permissions);return n.a.createElement(Yt.a,e,(function(t){var c=t.record?t.record.id:"";return a(Ha([To,{url:"/UserGroup/".concat(c,"/show"),label:"Details"}])),n.a.createElement(Lt.a,Object.assign({},e,t,{hasEdit:"admin"===r||"superadmin"===r}),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"name"})))}))},Ro=function(e){var a=Object(j.e)(),t=Object(Da.a)(),r=(t.loaded,t.permissions),c=JSON.parse(localStorage.getItem("group"));return console.log("group",c.id),console.log("permissions",r),a(Ha([To])),n.a.createElement(wa.a,Object.assign({},e,{hasCreate:"superadmin"===r,sort:{field:"name",order:"DESC"},filterDefaultValues:"superadmin"===r?null:{id:c.id}}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"name"}),"admin"===r||"superadmin"===r?n.a.createElement(Ia.a,null):null,"superadmin"===r?n.a.createElement(qt.a,null):null))},Mo=function(){return"/CustomerGroup"},qo={url:"/CustomerGroup",label:"CustomerGroup"},Yo=function(e){return Object(j.e)()(Ha([qo,{url:"/CustomerGroup/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Mo},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()})))},Lo=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Mo},n.a.createElement(xa.a,{source:"name",validate:Object(Wt.c)()}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([qo,{url:"/CustomerGroup/".concat(t.id),label:"Edit: ".concat(t.name)}])),null}))))},Bo=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.name:"",c=t.record?t.record.id:"";return a(Ha([qo,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(r)}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"name"})))}))},Ho=function(e){return Object(j.e)()(Ha([qo])),n.a.createElement(wa.a,e,n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"name"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},Ko=t(1235);function $o(){var e=Object(Ce.a)(["\n  query customers($where: CustomerWhereInput) {\n    customers(where: $where) {\n      id\n    }\n  }\n"]);return $o=function(){return e},e}var Vo=function(){return"/CustomerShop"},Uo={url:"/CustomerShop",label:"CustomerShop"},_o=function(e){return"".concat(e.code," ").concat(e.nameChi)},Go=Ie()($o()),zo=function(e){var a=Object(Pe.b)(Go,{}),t=(a.loading,a.data);return console.log("data",t&&t),Object(j.e)()(Ha([Uo,{url:"/CustomerShop/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Vo},n.a.createElement(tr.a,{label:"Customer",source:"customer.id",reference:"Customer",perPage:t&&t.customers.length},n.a.createElement(rr.a,{optionText:_o,validate:Object(Wt.c)()})),n.a.createElement(xa.a,{label:"Shop No.",source:"code",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameEn"}),n.a.createElement(xa.a,{source:"phone"}),n.a.createElement(xa.a,{source:"deliverAddress",validate:Object(Wt.c)()}),n.a.createElement(Ko.a,{source:"deliveryDay",choices:[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}]})))},Qo=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard"},n.a.createElement(xa.a,{source:"nameChi"}),n.a.createElement(xa.a,{source:"nameEn"}),n.a.createElement(xa.a,{source:"phone"}),n.a.createElement(xa.a,{source:"deliveryAddress"}),n.a.createElement(Ko.a,{source:"deliveryDay",choices:[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}]}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([Uo,{url:"/CustomerShop/".concat(t.id),label:"Edit: ".concat(t.name)}])),null}))))};var Jo=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.id:"";return a(Ha([Uo,{url:"/CustomerShop/".concat(r,"/show"),label:"Details"}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(ka.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,a){return"/Customer/".concat(e.customer.id,"/show")}},n.a.createElement(Wa,{source:"name"})),n.a.createElement(Ta.a,{label:"Shop No.",source:"code"}),n.a.createElement(Ta.a,{source:"nameChi"}),n.a.createElement(Ta.a,{source:"nameEn"}),n.a.createElement(Ta.a,{source:"phone"}),n.a.createElement(Ta.a,{source:"deliverAddress"}),n.a.createElement(Aa.a,{label:"Delivery Day",source:"deliveryDay",render:function(e){return e.deliveryDay.map((function(a,t){return"".concat(function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(a)).concat(t===e.deliveryDay.length-1?".":",")}))}})))}))},Xo=function(e){return Object(j.e)()(Ha([Uo])),n.a.createElement(wa.a,Object.assign({},e,{title:"Customer Shop"}),n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{label:"Shop No.",source:"code"}),n.a.createElement(Ta.a,{source:"nameChi"}),n.a.createElement(Ta.a,{source:"deliverAddress"}),n.a.createElement(zt.a,{source:"createdAt"}),n.a.createElement(zt.a,{source:"updatedAt"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},Zo=function(){return"/ProductCategory"},ei={url:"/ProductCategory",label:"Product Category"},ai=function(e){return Object(j.e)()(Ha([ei,{url:"/ProductCategory/create",label:"Create New"}])),n.a.createElement(At.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Zo},n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"detail",multiline:!0})))},ti=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:Zo},n.a.createElement(xa.a,{source:"nameEn",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"nameChi",validate:Object(Wt.c)()}),n.a.createElement(xa.a,{source:"detail",multiline:!0}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ha([ei,{url:"/ProductCategory/".concat(t.id),label:"Edit: ".concat(t.nameEn)}])),null}))))},ri=function(e){var a=Object(j.e)();return n.a.createElement(Yt.a,e,(function(t){var r=t.record?t.record.nameEn:"",c=t.record?t.record.id:"";return a(Ha([ei,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(r)}])),n.a.createElement(Lt.a,Object.assign({},e,t),n.a.createElement(Bt.a,null,n.a.createElement(Ta.a,{source:"nameEn"}),n.a.createElement(Ta.a,{source:"nameChi"})))}))},ni=function(e){return Object(j.e)()(Ha([ei])),n.a.createElement(wa.a,e,n.a.createElement(Na.a,{rowClick:"show"},n.a.createElement(Ta.a,{source:"nameEn"}),n.a.createElement(Ta.a,{source:"nameChi"}),n.a.createElement(Ia.a,null),n.a.createElement(qt.a,null)))},ci=t(424),li=t(423),oi=t(738),ii=t.n(oi),ui={softwareName:"Ambrossoft Supplier Management System",menu:{item:{home:"Dashboard",replenish:"Replenish",sale:"Sale",settings:"Settings",reports:"Reports",supplier:"Supplier",purchaseOrder:"Purchase Order",shipment:"Shipment",deliveryNote:"Delivery Note",warehouse:"Warehouse",inventory:"Inventory",salesOrder:"Sales Order",invoice:"Invoice",customer:"Customer",customerGroup:"Customer Group",customerShop:"Customer Shop",user:"User",userGroup:"UserGroup",product:"Product",productCategory:"Product Category",salesShipping:"Sales Shipping",receivePayment:"Receive Payment",monthly:"Monthly",quarterly:"Quarterly",annual:"Annual",warehousing:"Warehousing",labelling:"Labelling",shipping:"Shipping",packing:"Packing",stockCheck:"Stock Check",stockTransfer:"Stock Transfer",stockDispose:"Stock Dispose",noNeedThisProduct:"You don't need this item"}},dashboard:{supplier:"Supplier",purchaseOrder:"Purchase Order",shipment:"Shipment",delivery:"Delivery",warehouse:"Warehouse",inventory:"Inventory",salesOrder:"Sales Order",invoice:"Invoice",customer:"Customer",customerGroup:"Customer Group",product:"Product",productCategory:"Product Category",salesShipping:"Sales Shipping",receivePayment:"Receive Payment"},product:{code:"Product No.",product:"Product",cost:"Cost",price:"Price",quantity:"Quantity",expiryDate:"Expiry Date",label:"Label",name:"Name",warehouse:"Warehouse",wholeSalePrice:"Whole Sale Price",minOrderQuantity:"Min. Order Qty.",expiredIn6Months:"Expired In 6 Months"},supplier:{supplier:"Supplier",replenish:"Replenish Now!"},purchaseOrder:{selectProducts:"Select Products",purchaseOrder:"Purchase Order",code:"Purchase Order No.",createPurchaseOrder:"Create Purchase Order",editPurchaseOrder:"Edit Purchase Order",title:"Purchase Order",drafts:"Drafts",waitingShipment:"Waiting Shipment",completed:"Completed",basicInfo:"Basic Info",products:"Products",productCode:"Product Code",productName:"Product Name",expectedDeliveryAt:"Expected Delivery Date",supplier:"Supplier",state:"Status",review:"Review",purchaseOrderDetails:"Purchase Order Details",totalPrice:"Total Price"},salesOrder:{selectProducts:"Select Products",salesOrder:"Sales Order",code:"Sales Order No.",contactPerson:"Contact Person",createSalesOrder:"Create Sales Order",editSalesOrder:"Edit Sales Order",title:"Sales Order",drafts:"Drafts",waitingShipment:"Waiting Shipment",completed:"Completed",basicInfo:"Basic Info",products:"Products",productCode:"Product Code",productName:"Product Name",expectedDeliveryAt:"Delivery Date",supplier:"Supplier",state:"Status",review:"Review",salesOrderDetails:"Sales Order Details",customer:"Customer",totalPrice:"Total Price"},shipping:{warehousing:"Warehousing",productList:"Product List",shipment:"Shipment",shippingDelivery:"Shipping Delivery",warehouse:"Warehouse",needToUpdatePO:"Quantity not match?",clickHere:"Update Purchase Order",products:"Products",labelling:"Labelling",unlabelledItem:"Unlabelled Item",labelFrom:"Label From",labelTo:"Label To",selectPurchaseOrder:"Select Purchase Order",quantityCheck:"Quantity Check",review:"Review",selectWarehouse:"Select Warehouse",status:"Status",allTheFollowing:"Update items?",changeAll:"This and following items",changeThisOnly:"This item only"},shipment:{waitingShipment:"Waiting Shipment",completed:"Completed"},invoice:{newOrders:"New Orders",completed:"Completed Orders",selectSalesOrder:"Select Sales Order",shippingDetails:"Shipping Details",review:"Review",shipmentDate:"Shipment Date",state:"Status",code:"Invoice No.",totalPrice:"Total Price",contactPerson:"Contact Person",salesOrder:"Sales Order",invoice:"Invoice",invoiceDetails:"Invoice Details",customer:"Customer"},inventory:{inventory:"Inventory",stockTransfer:"Stock Transfer",stockDispose:"Stock Dispose",stock:"Stock",warehouse:"Warehouse",trash:"Trash",productItem:"Product Item",brand:"Brand",countryOfOrigin:"Country of origin",listView:"List View",heatMapView:"Heat Map View"},delivery:{newOrders:"New Orders",completed:"Completed Orders"},deliveryNote:{selectInvoice:"Select Invoice",quantity:"Quantity",quantityCheck:"Quantity Check",quantityNeed:"Quantity Needed",packingBox:"Packing Box",deliveryDate:"Delivery Date",products:"Products",review:"Review",labelNo:"Label #"},receivePayment:{newOrders:"New Orders",completed:"Completed Orders",selectInvoice:"Select Invoice",quantity:"Quantity",quantityCheck:"Quantity Check",packingBox:"Packing Box",review:"Review",labelNo:"Label #"},customer:{customer:"Customer",salesSummary:"Sales Summary",mobile:"Mobile",tel:"Tel.",shippingAddress:"Shipping Address",billingAddress:"Billing Address"},readMore:"Read More",resources:{PurchaseOrder:{fields:{products:"Products"}}},common:{addNew:"Add New",create:"Add New",list:"List",approved:"Approved",new:"New",date:"Date",draft:"Draft",edit:"Edit",confirm:"Confirm",confirmed:"Confirmed",deleted:"Deleted",status:"Status",save:"Save",cancel:"Cancel",assign:"Assign",from:"From",to:"To",transfer:"Transfer",search:"Search",filter:"Filter",groupBy:"Group By",next:"Next",prev:"Prev",information:"Information",pending:"Pending",sent:"Sent",acked:"Acked",shipped:"Shipped",arrived:"Arrived",received:"Received",packed:"Packed",delivered:"Delivered",paid:"Paid",print:"Print",salesman:"Salesman",delete:"Delete"},pageNotFound:"Page Not Found!"},si=Object(ci.a)((function(e){return"en"===e?Object(_e.a)({},li.a,{},ui):"zh-TW"===e?t.e(7).then(t.bind(null,1238)).then((function(e){return Object(_e.a)({},ii.a,{},e.default)})):void 0}),"en"),mi=function(e){var a=Object(sr.a)("PurchaseOrderItem"),t=Object(o.a)(a,1)[0],c=Object(me.g)(),l=function(){return c.go(-1)},i=Object(Ga.a)(),u=Object(br.f)(),s=Object(r.useCallback)((function(){if(u.valid){var e=u.values,a=e.product,r=Object(I.a)(e,["product"]);t({payload:{data:Object(_e.a)({},r,{productId:a.id})}},{onSuccess:function(e){e.data;i("ra.notification.created","info",{smart_count:1}),l()}})}}),[u.valid,u.values,t,i,l]);return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:s}))},di=function(e){return n.a.createElement(Er.a,e,n.a.createElement(mi,{label:"common.save",submitOnEnter:!1,variant:"text"}))};function pi(e){var a=Object(r.useState)(),t=Object(o.a)(a,2),c=t[0],l=t[1];Object(j.e)()(Ka({url:"/PurchaseOrderItem/create",label:"Add New Purchase Order Item"}));var i=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)};return n.a.createElement(At.a,e,n.a.createElement(Qa.a,{toolbar:n.a.createElement(di,null),variant:"standard"},n.a.createElement(tr.a,{label:"Purchase Order",source:"purchaseOrder.id",reference:"PurchaseOrder"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),n.a.createElement(tr.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},n.a.createElement(yn.a,{optionText:n.a.createElement(i,null),label:"Purchase Order No.",inputText:function(e){return function(){return l(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,a){return!0},options:{style:{width:500}}})),c&&n.a.createElement(Ja.a,null,(function(e){var a=e.formData;return Object(I.a)(e,["formData"]),n.a.createElement(Ya.a,{container:!0,direction:"column",style:{width:280}},n.a.createElement(Cn.a,{source:"quantity",initialsValue:0}),n.a.createElement(Cn.a,{source:"price",initialValue:a.price}))}))))}var Ei=function(e){var a=Object(j.e)(),t=Object(me.g)();return n.a.createElement(Mt.a,Object.assign({actions:n.a.createElement(n.a.Fragment,null)},e),n.a.createElement(Qa.a,{variant:"standard",redirect:function(){return t.go(-1)}},n.a.createElement(tr.a,{label:"Purchase Order",source:"purchaseOrder.id",reference:"PurchaseOrder"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),n.a.createElement(tr.a,{label:"Product",source:"product.id",reference:"Product"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),n.a.createElement(Cn.a,{source:"quantity",initialValue:"quantity"}),n.a.createElement(Cn.a,{source:"price",initialValue:"cost"}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ka({url:"/PurchaseOrderItem/".concat(t.id),label:"Edit"})),null}))))},bi=(t(1226),t(1206),function(){return"/Shipping"}),hi=function(e){return Object(j.e)()(Ka({url:"/PurchaseOrderItem/".concat(e.id),label:"Edit Shipping Item"})),n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",redirect:bi},n.a.createElement(Cn.a,{source:"quantity"})))};function fi(){var e=Object(Ce.a)(["\n  mutation updateSalesOrderItem(\n    $data: SalesOrderItemUpdateInput!\n    $where: SalesOrderItemWhereUniqueInput!\n  ) {\n    updateSalesOrderItem(data: $data, where: $where) {\n      id\n    }\n  }\n"]);return fi=function(){return e},e}var gi=function(e){var a=Object(sr.a)("SalesOrderItem"),t=Object(o.a)(a,1)[0],c=Object(me.g)(),l=function(){return c.go(-1)},i=Object(Ga.a)(),u=Object(br.f)();console.log("formState",u);var s=Object(r.useCallback)((function(){if(u.valid){var e=u.values,a=e.product,r=Object(I.a)(e,["product"]),n=parseInt(r.quantity,10),c=parseFloat(r.price);delete r.customer,console.log("product: ",a),t({payload:{data:Object(_e.a)({},r,{productId:a.id,discount:a.discount,totalPrice:n*c})}},{onSuccess:function(e){e.data;i("ra.notification.created","info",{smart_count:1}),l()}})}}),[u.valid,u.values,t,i,l]);return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:s}))},vi=function(e){return n.a.createElement(Er.a,e,n.a.createElement(gi,{label:"common.save",submitOnEnter:!1,variant:"text"}))},Oi=function(e){return n.a.createElement("span",null,e.record.code," ",e.record.nameChi)};function yi(e){var a=Object(me.h)().state.record.customer.wholesalePlan,t=Object(k.a)(),c=Object(r.useState)(),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(r.useState)(a),m=Object(o.a)(s,2),d=m[0],p=m[1],E=i?[i.wholeSalePrice1,i.wholeSalePrice2,i.wholeSalePrice3,i.wholeSalePrice4,i.wholeSalePrice5]:[];if(i&&i.discount&&E.length>0)if(i.discount.includes("%")){var b=1-parseFloat(i.discount)/100;console.log(b),E=E.map((function(e){return e*b})),console.log("wholeSalePriceList:",E)}else if(i.discount.includes("HKD")){var h=parseFloat(i.discount.replace("HKD",""));E=E.map((function(e){return e-h}))}Object(j.e)()(Ka({url:"/SalesOrderItem/create",label:"Add New Sales Order Item"}));return n.a.createElement(At.a,e,n.a.createElement(Qa.a,{toolbar:n.a.createElement(vi,null),variant:"standard"},n.a.createElement(tr.a,{label:"Sales Order",source:"salesOrder.id",reference:"SalesOrder"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),n.a.createElement(tr.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},n.a.createElement(yn.a,{optionText:n.a.createElement(Oi,null),label:"Sales Order No.",inputText:function(e){return function(){return u(e),console.log("product",i),e.code}},matchSuggestion:function(e,a){return!0}})),n.a.createElement(Cn.a,{source:"quantity"}),n.a.createElement(Ja.a,null,(function(e){var a=e.formData;return a.price=E[d-1],console.log("formproduct: ",a.product),i&&(a.product.discount=i.discount),n.a.createElement(Ya.a,{direction:"column",container:!0,spacing:3},n.a.createElement(Ya.a,{item:!0,xs:6},i&&n.a.createElement(Ge.a,{label:"price",type:"number",defaultValue:E[d-1],onChange:function(e){var t=e.target.value;a.price=t},value:a.price})),n.a.createElement(Ya.a,{item:!0,xs:6},i&&function(e){return n.a.createElement(Pc.a,null,E.map((function(a,r){return n.a.createElement(Le.a,{onClick:function(){p(r+1),e.price=a,console.log(a)},color:d==r+1?"secondary":void 0,variant:"contained"},t("product.wholeSalePrice"),r+1)})))}(a)))}))))}var Si=Ie()(fi()),ji=function(e){var a=Object(me.g)(),t=Object(Pe.a)(Si),r=Object(o.a)(t,1)[0],c=Object(Ga.a)(),l=Object(br.f)(),i=l.values,u=i.wholeSalePrice,s=(i.salesOrder,i.price),m=i.quantity,d=i.id;return n.a.createElement(dr.a,Object.assign({},e,{handleSubmitWithRedirect:function(){console.log("formState: ",l.values),r({variables:{data:{price:s,quantity:m,discount:"HKD".concat(u-s),subPrice:u},where:{id:d}}}).then((function(e){c("Edit Success"),a.go(-1)}))},disabled:!u}))},Di=function(e){return n.a.createElement(Er.a,e,n.a.createElement(ji,{label:"common.save",submitOnEnter:!1,variant:"text"}))},Ci=function(e){var a=Object(j.e)();return n.a.createElement(Mt.a,e,n.a.createElement(Qa.a,{variant:"standard",toolbar:n.a.createElement(Di,null)},n.a.createElement(tr.a,{label:"Sales Order",source:"salesOrder.id",reference:"SalesOrder"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),n.a.createElement(tr.a,{label:"Product",source:"product.id",reference:"Product"},n.a.createElement(rr.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),n.a.createElement(Cn.a,{source:"quantity"}),n.a.createElement(Cn.a,{source:"wholeSalePrice",validate:Object(Wt.c)()}),n.a.createElement(Cn.a,{source:"price",inputText:Cn.a}),n.a.createElement(Ja.a,null,(function(e){var t=e.formData;return a(Ka({url:"/SalesOrderItem/".concat(t.id),label:"Edit"})),n.a.createElement("h2",null,"Discount Amount(HKD): ",t.wholeSalePrice-t.price)}))))},Pi=t(106),xi=Object(s.a)({palette:{primary:{main:"#f16112"}},sidebar:{width:"100%",closedWidth:"100%"}}),Ii=Object(Pi.a)(),wi=function(){var e=Object(r.useState)(),a=Object(o.a)(e,2),t=a[0],c=a[1];return Object(r.useEffect)((function(){t||Nt().then((function(e){c((function(){return e}))})).catch((function(e){console.error(e)}))}),[t,c]),t?n.a.createElement(u.ApolloProvider,{client:wt},n.a.createElement(i.a,{client:wt},n.a.createElement(m.a,{utils:d.a},n.a.createElement(E.a,{theme:xi,i18nProvider:si,authProvider:Ft,title:"Supplier Management System",dashboard:h.a,catchAll:g,layout:Oe,customRoutes:yt,dataProvider:t,history:Ii,customReducers:{breadcrumb:Va}},n.a.createElement(b.a,{name:"Warehouse",list:Ut,edit:Vt,create:$t,show:_t}),n.a.createElement(b.a,{name:"Supplier",list:ar,edit:Zt,create:Xt,show:er}),n.a.createElement(b.a,{name:"ReceivePayment",list:ur,create:or,show:ir}),n.a.createElement(b.a,{name:"DeliveryNote",list:On,edit:gn,create:Gr,show:dn}),n.a.createElement(b.a,{name:"DeliveryItem",edit:Dn,create:Nn}),n.a.createElement(b.a,{name:"InventoryItem"}),n.a.createElement(b.a,{name:"ExpiryDateSummary"}),n.a.createElement(b.a,{name:"WarehouseSummary"}),n.a.createElement(b.a,{name:"Invoice",list:Jn,edit:zn,create:Hn,show:Un}),n.a.createElement(b.a,{name:"SalesOrder",list:nl,edit:al,create:_c,show:Qc}),n.a.createElement(b.a,{name:"SalesOrderItem",edit:Ci,create:yi}),n.a.createElement(b.a,{name:"PurchaseOrder",list:Tl,edit:kl,create:wl,show:Nl}),n.a.createElement(b.a,{name:"PurchaseOrderItem",edit:Ei,create:pi}),n.a.createElement(b.a,{name:"Shipping",list:no,edit:ro,create:ao,show:to}),n.a.createElement(b.a,{name:"ShippingItem",edit:hi}),n.a.createElement(b.a,{name:"Product",list:fo,edit:ho,create:bo,show:mo}),n.a.createElement(b.a,{name:"ProductCategory",list:ni,edit:ti,create:ai,show:ri}),n.a.createElement(b.a,{name:"Customer",list:jo,edit:yo,create:Oo,show:So}),n.a.createElement(b.a,{name:"CustomerGroup",list:Ho,edit:Lo,create:Yo,show:Bo}),n.a.createElement(b.a,{name:"CustomerShop",list:Xo,edit:Qo,create:zo,show:Jo}),n.a.createElement(b.a,{name:"User",list:No,edit:Io,create:xo,show:wo}),n.a.createElement(b.a,{name:"UserGroup",list:Ro,edit:Ao,create:Fo,show:Wo}),n.a.createElement(b.a,{name:"CustomerCoupon"}))))):n.a.createElement(p.a,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(wi,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},676:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return O}));var r=t(11),n=t(31),c=t(0),l=t.n(c),o=t(516),i=t(1097),u=t(513),s=t(749),m=t(750),d=t(751),p=t(752),E=t(753),b=t(754),h=t(755),f=t(756),g=Object(u.WidthProvider)(u.Responsive);var v=function(a){var t={};if(e.localStorage)try{t=JSON.parse(e.localStorage.getItem("rgl-8"))||{}}catch(r){}return t[a]}("layouts")||{};function O(){var a=Object(o.a)(),t=a.loaded,u=a.permissions,O=Object(c.useState)(v),y=Object(r.a)(O,2),S=y[0],j=y[1];if(!t)return l.a.createElement(i.a,null);var D=[function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"profitChart","data-grid":{w:8,h:10,x:0,y:0,minW:4,minH:10}},l.a.createElement(s.a,null))}(),function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"profitNumSum","data-grid":{w:4,h:10,x:8,y:0,minW:2,minH:10}},l.a.createElement(m.a,null))}(),function(){if(["admin"].includes(u))return l.a.createElement("div",{key:"purchasingForecast","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(d.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderChart","data-grid":{w:8,h:10,x:0,y:0,minW:4,minH:10}},l.a.createElement(p.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderNumSum","data-grid":{w:4,h:10,x:8,y:0,minW:2,minH:10}},l.a.createElement(E.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderRecent","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(b.a,null))}(),function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"purchaseOrderRecent","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(h.a,null))}(),function(){if(["admin","inventory"].includes(u))return l.a.createElement("div",{key:"deliveryNoteWaiting","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(f.a,null))}()].filter(Boolean);return l.a.createElement(g,{className:"layout",layouts:S,cols:{lg:12,md:12,sm:6,xs:4,xxs:2},rowHeight:30,onLayoutChange:function(a,t){var r,c;r="layouts",c=t,e.localStorage&&e.localStorage.setItem("rgl-8",JSON.stringify(Object(n.a)({},r,c))),j(t)}},D)}}).call(this,t(120))},730:function(e,a,t){e.exports=t.p+"static/media/template.8b755b7f.csv"},749:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(47),o=t(124),i=t(99);function u(e,a){return{time:e,amount:a}}var s=[u("00:00",0),u("03:00",300),u("06:00",600),u("09:00",800),u("12:00",1500),u("15:00",2e3),u("18:00",2400),u("21:00",2400),u("24:00",void 0)];function m(){var e=Object(l.a)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,null,"Profit"),c.a.createElement(o.d,null,c.a.createElement(o.c,{data:s,margin:{top:16,right:16,bottom:0,left:24}},c.a.createElement(o.e,{dataKey:"time",stroke:e.palette.text.secondary}),c.a.createElement(o.f,{stroke:e.palette.text.secondary},c.a.createElement(o.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Sales ($)")),c.a.createElement(o.b,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1}))))}var d=t(35),p=t.n(d)()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=p();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(m,null))}},750:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(81),m=t(99);function d(e){e.preventDefault()}var p=Object(u.a)({depositContext:{flex:1}});function E(){var e=p();return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,"Profit (Jan, 2020)"),c.a.createElement(s.a,{component:"p",variant:"h4"},"$3,024.00"),c.a.createElement(s.a,{color:"textSecondary",className:e.depositContext},"on 15 January, 2020"),c.a.createElement("div",null,c.a.createElement(i.a,{color:"primary",href:"#",onClick:d},"View balance")))}var b=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=b();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(E,null))}},751:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(1144),m=t(1148),d=t(1147),p=t(1145),E=t(1146),b=t(99);function h(e,a,t,r,n,c){return{id:e,date:a,name:t,shipTo:r,paymentMethod:n,amount:c}}var f=[h(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),h(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),h(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),h(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),h(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,"Purchasing Forecast"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,f.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=y();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(O,null))}},752:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(47),o=t(124),i=t(99);function u(e,a){return{time:e,amount:a}}var s=[u("00:00",0),u("03:00",300),u("06:00",600),u("09:00",800),u("12:00",1500),u("15:00",2e3),u("18:00",2400),u("21:00",2400),u("24:00",void 0)];function m(){var e=Object(l.a)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,null,"Sales Order"),c.a.createElement(o.d,null,c.a.createElement(o.c,{data:s,margin:{top:16,right:16,bottom:0,left:24}},c.a.createElement(o.e,{dataKey:"time",stroke:e.palette.text.secondary}),c.a.createElement(o.f,{stroke:e.palette.text.secondary},c.a.createElement(o.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Sales ($)")),c.a.createElement(o.b,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1}))))}var d=t(35),p=t.n(d)()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=p();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(m,null))}},753:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(81),m=t(99);function d(e){e.preventDefault()}var p=Object(u.a)({depositContext:{flex:1}});function E(){var e=p();return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,"Total Sales"),c.a.createElement(s.a,{component:"p",variant:"h4"},"$3,024.00"),c.a.createElement(s.a,{color:"textSecondary",className:e.depositContext},"on 15 March, 2019"),c.a.createElement("div",null,c.a.createElement(i.a,{color:"primary",href:"#",onClick:d},"View balance")))}var b=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=b();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(E,null))}},754:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(1144),m=t(1148),d=t(1147),p=t(1145),E=t(1146),b=t(99);function h(e,a,t,r,n,c){return{id:e,date:a,name:t,shipTo:r,paymentMethod:n,amount:c}}var f=[h(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),h(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),h(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),h(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),h(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,"Sales Orders"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,f.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=y();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(O,null))}},755:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(1144),m=t(1148),d=t(1147),p=t(1145),E=t(1146),b=t(99);function h(e,a,t,r,n,c){return{id:e,date:a,name:t,shipTo:r,paymentMethod:n,amount:c}}var f=[h(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),h(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),h(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),h(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),h(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,"Purchase Orders"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,f.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=y();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(O,null))}},756:function(e,a,t){"use strict";var r=t(224),n=t(0),c=t.n(n),l=t(35),o=t.n(l),i=t(1143),u=t(75),s=t(1144),m=t(1148),d=t(1147),p=t(1145),E=t(1146),b=t(99);function h(e,a,t,r,n,c){return{id:e,date:a,name:t,shipTo:r,paymentMethod:n,amount:c}}var f=[h(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),h(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),h(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),h(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),h(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,null,"Delivery Notes"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,f.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));a.a=function(){var e=y();return c.a.createElement(r.a,{className:e.paper},c.a.createElement(O,null))}},807:function(e,a,t){e.exports=t(1092)},812:function(e,a,t){},99:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var r=t(0),n=t.n(r),c=t(81);function l(e){return n.a.createElement(c.a,{component:"h1",variant:"h6",color:"primary",gutterBottom:!0},e.children)}}},[[807,1,2]]]);
//# sourceMappingURL=main.62e662ba.chunk.js.map