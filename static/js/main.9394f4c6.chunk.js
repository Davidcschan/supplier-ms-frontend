(this["webpackJsonpsupplier-ms-admin"]=this["webpackJsonpsupplier-ms-admin"]||[]).push([[0],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(83);function l(e){return r.a.createElement(c.a,{component:"h1",variant:"h6",color:"primary",gutterBottom:!0},e.children)}},1237:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),l=a.n(c),o=(a(859),a(860),a(861),a(11)),i=a(106),u=a(435),s=a(254),m=a(108),d=a(713),p=a(1243),E=a(1354),f=a(1353),b=a(716),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallback:null},a=t.fallback,c=void 0===a?null:a,l=Object(n.lazy)(e);return function(e){return r.a.createElement(n.Suspense,{fallback:c},r.a.createElement(l,e))}},g=h((function(){return a.e(5).then(a.bind(null,1384))})),v=a(34),O=a(534),y=a.n(O),S=a(139),j=a(7),D=a(77),C=a(1288),P=a(117),I=a(418),x=a(47),w=a(9),N=a.n(w),k=a(100),T=a(731),F=a(417),A=a(83),R=a(338),W=a(1295),M=a(814),L=a(208),q=a(733),Y=a.n(q),B=a(391),H=a.n(B),U=a(727),V=a(734),K=a.n(V),$=a(177),z=a.n($),G=a(735),Q=a.n(G),J=a(544),X=a.n(J),Z=a(736),ee=a.n(Z),te=a(416),ae=a.n(te),ne=a(737),re=a.n(ne),ce=a(1310),le=a(1311),oe=a(1312),ie=a(33),ue=Object(D.a)((function(e){return{toolbar:{paddingRight:e.spacing(3),backgroundColor:e.palette.primary.main,transition:e.transitions.create(["background-color"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},menuButton:{marginLeft:"0.5em",marginRight:"0.5em"},menuButtonIconClosed:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},menuButtonIconOpen:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),{name:"RaAppBar"}),se={color:"white"},me=function(e){e.children;var t=e.classes,a=e.className,c=(e.logo,e.logout),l=e.open,i=(e.title,e.userMenu,Object(x.a)(e,["children","classes","className","logo","logout","open","title","userMenu"])),u=Object(k.a)(),s=Object(j.e)(),m=ue({classes:t}),d=Object(R.a)((function(e){return e.breakpoints.down("xs")})),p=Object(n.useState)(null),E=Object(o.a)(p,2),f=E[0],b=E[1],h=Object(n.useState)(null),g=Object(o.a)(h,2),v=g[0],O=g[1],y=function(e){b(null)};return r.a.createElement(T.a,null,r.a.createElement(W.a,Object.assign({className:a,color:"primary"},i),r.a.createElement(M.a,{disableGutters:!0,variant:d?"regular":"dense",className:m.toolbar},r.a.createElement(L.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return s(Object(P.f)())},className:N()(m.menuButton)},r.a.createElement(ae.a,{classes:{root:l?m.menuButtonIconOpen:m.menuButtonIconClosed}})),r.a.createElement(A.a,{variant:"h6",className:m.title},u("softwareName")),r.a.createElement(ie.a,{to:"/xero",style:se},r.a.createElement(L.a,{color:"inherit"},r.a.createElement(H.a,null))),r.a.createElement(L.a,{"aria-label":"Settings","aria-controls":"long-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){b(e.currentTarget)}},r.a.createElement(Y.a,null)),r.a.createElement(U.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:y},r.a.createElement(F.a,{to:"/Product",primaryText:u("menu.item.product"),leftIcon:r.a.createElement(K.a,null),onClick:y}),r.a.createElement(F.a,{to:"/Supplier",primaryText:u("menu.item.supplier"),leftIcon:r.a.createElement(ce.a,null),onClick:y}),r.a.createElement(F.a,{to:"/Customer",primaryText:u("menu.item.customer"),leftIcon:r.a.createElement(le.a,null),onClick:y}),r.a.createElement(F.a,{to:"/Warehouse",primaryText:u("menu.item.warehouse"),leftIcon:r.a.createElement(z.a,null),onClick:y}),r.a.createElement(F.a,{to:"/ProductCategory",primaryText:u("menu.item.productCategory"),leftIcon:r.a.createElement(Q.a,null),onClick:y}),r.a.createElement(F.a,{to:"/CustomerGroup",primaryText:u("menu.item.customerGroup"),leftIcon:r.a.createElement(X.a,null),onClick:y}),r.a.createElement(F.a,{to:"/CustomerShop",primaryText:u("menu.item.customerShop"),leftIcon:r.a.createElement(ee.a,null),onClick:y}),r.a.createElement(F.a,{to:"/User",primaryText:u("menu.item.user"),leftIcon:r.a.createElement(X.a,null),onClick:y}),r.a.createElement(F.a,{to:"/UserGroup",primaryText:u("menu.item.userGroup"),leftIcon:r.a.createElement(re.a,null),onClick:y})),r.a.createElement(L.a,{"aria-label":"Warren Chan","aria-controls":"long-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){O(e.currentTarget)}},r.a.createElement(oe.a,null),"\xa0",r.a.createElement(A.a,null,localStorage.getItem("token"))),r.a.createElement(U.a,{id:"user-menu",anchorEl:v,keepMounted:!0,open:Boolean(v),onClose:function(e){O(null)}},c))))},de=(a(738),Object(D.a)((function(e){return{drawerPaper:{marginTop:0,transition:e.transitions.create("height",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}})),a(88)),pe=Object(de.j)((function(e){var t=e.location,a=e.history,n=Object(j.f)((function(e){return e.admin.ui.sidebarOpen})),c=t.pathname.split("/"),l=function(e){return c.length>1&&y.a.singular(c[1])===e},o=function(e){return function(){return a.push("/".concat(e))}};return n?r.a.createElement(S.Workflow,{open:!0},r.a.createElement(S.WorkflowItem.Supplier,{onClick:o("Supplier"),active:l("Supplier")}),r.a.createElement(S.WorkflowItem.PurchaseOrder,{onClick:o("PurchaseOrder"),active:l("PurchaseOrder")}),r.a.createElement(S.WorkflowItem.Shipping,{onClick:o("Shipping"),active:l("Shipping")}),r.a.createElement(S.WorkflowItem.Inventory,{onClick:o("Inventory"),active:l("Inventory")}),r.a.createElement(S.WorkflowItem.SalesOrder,{onClick:o("SalesOrder"),active:l("SalesOrder")}),r.a.createElement(S.WorkflowItem.Invoice,{onClick:o("Invoice"),active:l("Invoice")}),r.a.createElement(S.WorkflowItem.DeliveryNote,{onClick:o("DeliveryNote"),active:l("DeliveryNote")}),r.a.createElement(S.WorkflowItem.Customer,{onClick:o("Customer"),active:l("Customer")}),r.a.createElement(S.WorkflowItem.ReceivePayment,{onClick:o("ReceivePayment"),active:l("ReceivePayment")}),r.a.createElement(S.WorkflowItem.Report,{onClick:o("Report"),active:l("Report")})):null})),Ee=a(48),fe=a(38),be=a.n(fe),he=a(1370),ge=be()((function(e){return{breadcrumb:{paddingLeft:e.spacing(4),paddingRight:e.spacing(4),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),ve=function(){var e=Object(j.f)((function(e){return e.breadcrumb})),t=ge(),a=Object(Ee.a)(e),n=a.pop(),c={textDecoration:"none",color:"#666",hover:{textDecoration:"underline"}};return r.a.createElement(he.a,{"aria-label":"breadcrumb",className:t.breadcrumb},a.map((function(e){return r.a.createElement(ie.a,{key:"linkTo".concat(e.url),to:e.url,style:c},e.label)})),n&&r.a.createElement(A.a,{color:"textPrimary"},n.label))},Oe=Object(D.a)((function(e){var t;return{root:{display:"flex",flexDirection:"column",zIndex:1,minHeight:"100vh",backgroundColor:e.palette.background.default,position:"relative",minWidth:"fit-content",width:"100%"},appFrame:(t={display:"flex",flexDirection:"column"},Object(v.a)(t,e.breakpoints.up("xs"),{marginTop:e.spacing(6)}),Object(v.a)(t,e.breakpoints.down("xs"),{marginTop:e.spacing(7)}),t),contentWithSidebar:{display:"flex",flexDirection:"column",flexGrow:1},content:Object(v.a)({display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0,padding:e.spacing(3),paddingTop:e.spacing(1)},e.breakpoints.down("sm"),{padding:0})}})),ye=function(e){var t=e.children,a=e.dashboard,c=e.logout,l=(e.title,e.theme),o=Oe(),i=Object(j.e)(),u=Object(j.f)((function(e){return e.admin.ui.sidebarOpen}));return Object(n.useEffect)((function(){i(Object(P.e)(!0))}),[i]),r.a.createElement(C.a,{theme:l},r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.appFrame},r.a.createElement(me,{open:u,logout:c}),r.a.createElement("main",{className:o.contentWithSidebar},r.a.createElement(pe,{logout:c,hasDashboard:!!a}),r.a.createElement(ve,null),r.a.createElement("div",{className:o.content},t)),r.a.createElement(I.a,null))))},Se=h((function(){return Promise.all([a.e(8),a.e(4)]).then(a.bind(null,1386))})),je=h((function(){return a.e(6).then(a.bind(null,1387))})),De=h((function(){return a.e(3).then(a.bind(null,1388))})),Ce=a(512),Pe=a(18),Ie=a(21),xe=a(17),we=a.n(xe),Ne=a(1290),ke=a(1291),Te=a(1292),Fe=a(1293),Ae=a(1294),Re=a(231);function We(){var e=Object(Pe.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return We=function(){return e},e}var Me=we()(We()),Le=be()({table:{minWidth:650}});function qe(e){var t=e.id,a=(e.labelFrom,e.onChange,Le()),n=Object(k.a)(),c=Object(Ie.b)(Me,{variables:{where:{warehouse:{id:t},label_contains:""}}}),l=c.loading,o=c.data;if(l)return r.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var i=o.inventoryItems;return r.a.createElement(Ce.a,{component:Re.a},r.a.createElement(Ne.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,n("product.label")),r.a.createElement(Fe.a,{align:"right"},n("purchaseOrder.productCode")),r.a.createElement(Fe.a,{align:"right"},n("purchaseOrder.productName")),r.a.createElement(Fe.a,{align:"right"},n("product.expiryDate")))),r.a.createElement(Ae.a,null,i.map((function(e){return r.a.createElement(Te.a,{key:e.code},r.a.createElement(Fe.a,{align:"right"},e.label),r.a.createElement(Fe.a,{align:"right"},e.code),r.a.createElement(Fe.a,{align:"right"},e.name),r.a.createElement(Fe.a,{align:"right"},e.expiryDate))})))))}var Ye=a(1298),Be=a(281),_e=a(660),He=a(268),Ue=a.n(He),Ve=a(662),Ke=a(663),$e=a(535),ze=a(13),Ge=a(339),Qe=a(1369),Je=a(806);function Xe(){var e=Object(Pe.a)(["\n  query warehouses($where: WarehouseWhereInput!) {\n    warehouses(where: $where) {\n      id\n      name\n      type\n    }\n  }\n"]);return Xe=function(){return e},e}var Ze=we()(Xe());function et(e){var t=e.onChange,a=e.defaultValue,n=e.className,c=e.where,l=void 0===c?{where:{type:"NORMAL"}}:c,i=Object(k.a)(),u=Object(Ie.b)(Ze,{variables:l}),s=u.loading,m=u.data,d=r.a.useState(!1),p=Object(o.a)(d,2),E=p[0],f=p[1],b=r.a.useState([]),h=Object(o.a)(b,2),g=h[0],v=h[1],O=s||E&&0===g.length;r.a.useEffect((function(){if(O&&m){var e=m.warehouses;v(e.map((function(e){return{id:e.id,name:e.name}})))}}),[O,m]),r.a.useEffect((function(){E||v([])}),[E]);return r.a.createElement(Qe.a,{className:n,open:E,onOpen:function(){f(!0)},onClose:function(){f(!1)},onChange:function(e,a){var n=m.warehouses;t(n.find((function(e){return e.id===a.id})))},getOptionLabel:function(e){return e.name},options:g,loading:O,value:a&&{id:a.id,name:a.name},renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:i("product.warehouse"),variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,O?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var tt=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),at=Ue()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})($e.a);function nt(){var e=Object(k.a)(),t=tt(),a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],i=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(A.a,{variant:"h5"},e("inventory.stockTransfer")),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(_e.a,{alternativeLabel:!0,connector:r.a.createElement(at,null)},r.a.createElement(Ve.a,{key:e("inventory.warehouse")},r.a.createElement(Ke.a,{StepIconComponent:z.a},e("inventory.warehouse")," ",e("common.to"))))))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(et,{onChange:i,label:e("inventory.warehouse")+" "+e("common.from")})),r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(et,{onChange:i,label:e("inventory.warehouse")+" "+e("common.to")})))),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(Ye.a,{className:t.card},r.a.createElement(A.a,{variant:"h6"},e("inventory.productItem")),r.a.createElement(qe,{id:l})))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},r.a.createElement(Be.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.transfer")))))))}function rt(){var e=Object(Pe.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return rt=function(){return e},e}var ct=we()(rt()),lt=be()({table:{minWidth:650}});function ot(e){var t=e.id,a=e.labelFrom,n=(e.onChange,lt()),c=Object(k.a)(),l=Object(Ie.b)(ct,{variables:{where:{warehouse:{id:t},label_contains:""}}}),o=l.loading,i=l.data;if(o)return r.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var u=i.inventoryItems,s=Object.values(u.reduce((function(e,t){var a=t.name,n=t.brand,r=t.sku,c=t.expiryDay,l=t.price,o=t.unit;return e[r]||(e[r]={name:a,brand:n,sku:r,expiryDay:c,price:l,unit:o,quantity:0}),e[r].quantity++,e}),{})),m=parseInt(a,10);return s.forEach((function(e){e.labelFrom=m,e.labelTo=m+e.quantity,m=m+e.quantity+1})),r.a.createElement(Ce.a,{component:Re.a},r.a.createElement(Ne.a,{className:n.table,"aria-label":"simple table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,c("purchaseOrder.productCode")),r.a.createElement(Fe.a,{align:"right"},c("purchaseOrder.productName")),r.a.createElement(Fe.a,{align:"right"},c("product.expiryDate")),r.a.createElement(Fe.a,{align:"right"},c("product.quantity")),r.a.createElement(Fe.a,{align:"right"},c("shipping.labelFrom")),r.a.createElement(Fe.a,{align:"right"},c("shipping.labelTo")))),r.a.createElement(Ae.a,null,s.map((function(e){return r.a.createElement(Te.a,{key:e.code},r.a.createElement(Fe.a,{align:"right"},e.code),r.a.createElement(Fe.a,{align:"right"},e.name),r.a.createElement(Fe.a,{align:"right"},e.expiryDate),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelFrom})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelTo})))})))))}var it=a(740),ut=a.n(it),st=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),mt=Ue()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})($e.a);function dt(){var e=Object(Pe.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where) {\n      id\n      warehouse {\n        id\n        code\n      }\n      label\n      expiryDay\n      name\n      brand\n      sku\n      image\n      price\n      unit\n    }\n  }\n"]);return dt=function(){return e},e}var pt=we()(dt()),Et=be()({table:{minWidth:650}});function ft(e){var t=e.id,a=e.labelFrom,n=(e.onChange,Et()),c=Object(k.a)(),l=Object(Ie.b)(pt,{variables:{where:{warehouse:{id:t},label_contains:""}}}),o=l.loading,i=l.data;if(o)return r.a.createElement(p.a,{loadingPrimary:"menu.item.product"});var u=i.inventoryItems,s=Object.values(u.reduce((function(e,t){var a=t.name,n=t.brand,r=t.sku,c=t.expiryDay,l=t.price,o=t.unit;return e[r]||(e[r]={name:a,brand:n,sku:r,expiryDay:c,price:l,unit:o,quantity:0}),e[r].quantity++,e}),{})),m=parseInt(a,10);return s.forEach((function(e){e.labelFrom=m,e.labelTo=m+e.quantity,m=m+e.quantity+1})),r.a.createElement(Ce.a,{component:Re.a},r.a.createElement(Ne.a,{className:n.table,"aria-label":"simple table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,c("purchaseOrder.productCode")),r.a.createElement(Fe.a,{align:"right"},c("purchaseOrder.productName")),r.a.createElement(Fe.a,{align:"right"},c("product.expiryDate")),r.a.createElement(Fe.a,{align:"right"},c("product.quantity")),r.a.createElement(Fe.a,{align:"right"},c("shipping.labelFrom")),r.a.createElement(Fe.a,{align:"right"},c("shipping.labelTo")))),r.a.createElement(Ae.a,null,s.map((function(e){return r.a.createElement(Te.a,{key:e.code},r.a.createElement(Fe.a,{align:"right"},e.code),r.a.createElement(Fe.a,{align:"right"},e.name),r.a.createElement(Fe.a,{align:"right"},e.expiryDate),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelFrom})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Ge.a,{label:"Filled",variant:"filled",defaultValue:e.labelTo})))})))))}var bt=a(741),ht=a.n(bt),gt=be()((function(e){return{card:{margin:e.spacing(1),padding:e.spacing(2)}}})),vt=Ue()({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})($e.a);var Ot=a(1357),yt=a(420),St=a.n(yt),jt=a(39),Dt=a.n(jt),Ct=a(541),Pt=a(743),It=a(1363),xt=a(747),wt=a(1315),Nt=a(1355),kt=a(1358),Tt=a(1319),Ft=a(1320),At=a(1313),Rt=a(1321),Wt=function(e){var t=e.source,a=e.record,n=void 0===a?{}:a;e.label;return r.a.createElement(A.a,{variant:"body1"},n["".concat(t,"Chi")],r.a.createElement("br",null),n["".concat(t,"En")])};function Mt(e,t){var a=e.monthlySalesOnAverage*Dt()(t).diff(Dt()(),"month")*1.05;return Math.floor(a)<0?0:Math.floor(a).toFixed(1)}var Lt=function(e){var t=e.label,a=Mt(e.record,e.options.expectedSalesDate);return r.a.createElement(At.a,{label:t,record:{value:a},source:"value"})},qt=function(e){var t=e.label,a=e.options,n=Dt()(a.expectedSalesDate).diff(Dt()(),"month");return r.a.createElement(At.a,{label:t,record:{value:n},source:"value"})},Yt=a(1305),Bt=a(49),_t=a.n(Bt);function Ht(e){return{type:"SET_BREADCRUMBS",payload:e}}function Ut(e){return{type:"ADD_BREADCRUMBS",payload:e}}var Vt=[{url:"/",label:"Dashboard"}],Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_BREADCRUMBS":return[].concat(Vt,Object(Ee.a)(n));case"ADD_BREADCRUMBS":return e[e.length-1].url===n.url?e:_t()(n)?[].concat(Object(Ee.a)(e),Object(Ee.a)(n)):[].concat(Object(Ee.a)(e),[n]);default:return e}},$t={url:"/Inventory",label:"Inventory"};var zt=function(e){e.staticContext;var t=Object(x.a)(e,["staticContext"]),a=Object(Ct.a)().permissions,c=Object(n.useState)(Dt()().add(4,"month")),l=Object(o.a)(c,2),i=l[0],u=l[1];Object(de.g)(),Object(j.e)()(Ht([$t]));var s=function(e){return r.a.createElement(It.a,e,r.a.createElement(xt.a,{label:"Search Product no.",source:"code_starts_with",alwaysOn:!0}))},m=function(e){var t=e.record;e.props;return"admin"===e.permissions?r.a.createElement(wt.a,{basePath:"/Inventory/editStock",record:t}):null};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt.a,Object.assign({resource:"Product",hasCreate:!1,hasEdit:!1,hasShow:!1,hasList:!0,basePath:"/Inventory",exporter:function(e){var t=e.map((function(e){return{code:e.code,name:e.nameChi,stock:e.quantity,avg:e.monthlySalesOnAverage,incoming:e.incomingQuantity,nextShipment:Dt()(i).diff(Dt()(),"month"),expectedSales:Mt(e,i)}}));St()(t,{headers:["code","name","stock","avg","incoming","nextShipment","expectedSales"]},(function(e,t){Object(Pt.a)(t,"posts")}))}},t,{filters:r.a.createElement(s,null)}),r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"Product No.",source:"id",reference:"Product",link:function(e,t){return"/".concat(t,"/").concat(e.id,"/show")}},r.a.createElement(Ft.a,{source:"code"})),r.a.createElement(Tt.a,{label:"name",source:"id",reference:"Product",link:function(e,t){return"/".concat(t,"/").concat(e.id,"/show")}},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{label:"Stock",source:"quantity",sortable:!1}),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(m,{record:e,props:t,permissions:a})},sortable:!1}),r.a.createElement(At.a,{source:"monthlySalesOnAverage",sortable:!1}),r.a.createElement(At.a,{source:"outgoingQuantity",sortable:!1}),r.a.createElement(At.a,{source:"incomingQuantity",sortable:!1}),r.a.createElement(qt,{label:"Months till Next shipment",options:{expectedSalesDate:i},sortable:!1}),r.a.createElement(Lt,{label:"Expected Sales till next shipment",options:{expectedSalesDate:i},sortable:!1}))),r.a.createElement(Yt.a,{container:!0,justify:"flex-end",alignItems:"center"},r.a.createElement(A.a,{variant:"button"},"Expected next shipment month and default after 4 month :"," "),r.a.createElement(Ot.a,{style:{width:200,margin:10},inputVariant:"filled",value:i,openTo:"year",views:["year","month"],onChange:u})))},Gt=a(447),Qt=a(1268),Jt=a(1377),Xt=a(1324),Zt=a(1323);function ea(){var e=Object(Pe.a)(["\n  query purchaseOrders(\n    $where: PurchaseOrderWhereInput\n    $orderBy: PurchaseOrderOrderByInput!\n  ) {\n    purchaseOrders(where: $where, orderBy: $orderBy) {\n      id\n      code\n      supplier {\n        id\n        name\n      }\n      products {\n        id\n        quantity\n        price\n        totalPrice\n        product {\n          id\n          code\n          nameEn\n          nameChi\n        }\n      }\n      expectedDeliveryAt\n      totalPrice\n      state\n    }\n  }\n"]);return ea=function(){return e},e}var ta=we()(ea());function aa(e){var t=e.onChange,a=e.defaultValue,n=e.className,c=Object(k.a)(),l=Object(Ie.b)(ta,{variables:{where:{state_in:["CONFIRMED","APPROVED"]},orderBy:"updatedAt_DESC"}}),i=l.loading,u=l.data,s=r.a.useState(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],E=r.a.useState([]),f=Object(o.a)(E,2),b=f[0],h=f[1],g=i||d&&0===b.length;r.a.useEffect((function(){if(g&&u){var e=u.purchaseOrders;h(e.map((function(e){return{id:e.id,name:e.code}})))}}),[g,u]),r.a.useEffect((function(){d||h([])}),[d]);return r.a.createElement(Qe.a,{className:n,id:"purchase-order-autocomplete",style:{width:300},open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,a){var n=u.purchaseOrders;t(n.find((function(e){return e.id===a.id})))},getOptionLabel:function(e){return e.name},options:b,loading:g,value:a&&{id:a.id,name:a.code},renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:c("purchaseOrder.purchaseOrder"),fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,g?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var na=function(e){if(!e||0===e.length)return"";for(var t=e.replace(/([^a-z0-9]+)/gi,""),a=(t=t.toUpperCase()).length-1;a>=0;){if("9"===t.substr(a,1))t=t.substr(0,a)+"0"+t.substr(a+1);else if("Z"===t.substr(a,1))t=t.substr(0,a)+"A"+t.substr(a+1);else{var n=String.fromCharCode(t.charCodeAt(a)+1);t=t.substr(0,a)+n+t.substr(a+1),a=0}a--}return t},ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)throw new Error("invoiceNumber cannot be empty");var a=e.split(/[_/:\-;\\]+/),n=a.pop(),r=e.substr(0,e.indexOf(n)),c=Object(Ee.a)(Array(t)).reduce((function(e){return na(e)}),n);return r+c};function ca(){var e=Object(Pe.a)(["\n    mutation inWarehouse($data: [InventoryItemCreateInput!]!) {\n      inWarehouse(data: $data) {\n        id\n      }\n    }\n  "]);return ca=function(){return e},e}var la=Object(D.a)((function(e){return{autocomplete:{width:500},poAutocomplete:{width:700}}}));function oa(){var e=Object(Pe.a)(["\n  mutation Disconnect {\n    disconnect\n  }\n"]);return oa=function(){return e},e}function ia(){var e=Object(Pe.a)(["\n  query Check {\n    checking\n  }\n"]);return ia=function(){return e},e}function ua(){var e=Object(Pe.a)(["\n  mutation CreateRedirect {\n    createRedirect(data: {}) {\n      id\n      redirectUrl\n    }\n  }\n"]);return ua=function(){return e},e}we()(ua()),we()(ia()),we()(oa());var sa=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"ERP-system"))};function ma(){var e=Object(Pe.a)(["\n  mutation CreateAuth($data: AuthCreateInput!) {\n    createAuth(data: $data) {\n      id\n    }\n  }\n"]);return ma=function(){return e},e}we()(ma());var da=function(e){return e.match,e.location,r.a.createElement("div",null,"Loading...")},pa=a(151),Ea=a.n(pa),fa=a(201);function ba(){var e=Object(Pe.a)(["\n  mutation transfer($data: TransferWarehouse!) {\n    transferWarehouse(data: $data) {\n      id\n    }\n  }\n"]);return ba=function(){return e},e}function ha(){var e=Object(Pe.a)(["\n  mutation deleteItem($where: DeliveryItemWhereUniqueInput!) {\n    deleteDeliveryItem(where: $where) {\n      id\n    }\n  }\n"]);return ha=function(){return e},e}function ga(){var e=Object(Pe.a)(["\n  query getItem($where: InventoryItemWhereUniqueInput!) {\n    inventoryItem(where: $where) {\n      label\n      id\n      warehouse {\n        id\n      }\n    }\n  }\n"]);return ga=function(){return e},e}var va=we()(ga()),Oa=we()(ha()),ya=we()(ba());var Sa,ja,Da,Ca,Pa=[r.a.createElement(de.b,{exact:!0,path:"/Report",component:Se}),r.a.createElement(de.b,{exact:!0,path:"/Report/quarter",component:je}),r.a.createElement(de.b,{exact:!0,path:"/Report/annual",component:De}),r.a.createElement(de.b,{exact:!0,path:"/Inventory",component:zt}),r.a.createElement(de.b,{exact:!0,path:"/Inventory/:productId",component:nt}),r.a.createElement(de.b,{exact:!0,path:"/Inventory/editStock/:productId/",component:function(e){e.staticContext;var t=Object(x.a)(e,["staticContext"]).match.params.productId,a={stock:0,purchaseOrder:null,warehouse:null,productId:t,labelFrom:null,labelTo:null,expiryDate:"-",cost:0},c=Object(n.useState)(a),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(j.e)(),m=Object(k.a)(),d=Object(Gt.a)(),E=we()(ca()),f=Object(Ie.a)(E),b=Object(o.a)(f,1)[0],h=function(){var e=Object(Qt.a)("Product",t),a=e.data,n=e.loading,c=e.error;return n?r.a.createElement(p.a,null):c?r.a.createElement("p",null,"ERROR"):r.a.createElement("div",null,"Product :",r.a.createElement("div",null,a.nameChi))},g=la();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{toolbar:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){console.log(i);for(var e=[],t=i.labelFrom,a=0;a<i.stock;a++){var n={productId:i.productId,warehouse:{connect:{id:i.warehouse.id}},purchaseOrderId:i.purchaseOrder.id,expiryDate:i.expiryDate,label:t};t=ra(t),e.push(n)}e.map((function(e){return console.log(e)})),b({variables:{data:[].concat(e)}}).then((function(e){console.log("res",e),d("Save Success.")})).catch((function(e){d("Error: ".concat(e.message),"warning")}))},style:{marginTop:20}},r.a.createElement(Zt.a,null),"\xa0Save"),redirect:function(){return"/Inventory"}},r.a.createElement(Yt.a,{container:!0,style:{height:500},alignContent:"space-around",alignItems:"flex-start"},r.a.createElement(h,null),r.a.createElement(aa,{onChange:function(e){u(Object(ze.a)({},i,{purchaseOrder:e}))},defaultValue:i.purchaseOrder,className:g.poAutocomplete}),r.a.createElement(et,{defaultValue:i.warehouse,onChange:function(e){u(Object(ze.a)({},i,{warehouse:e}))},className:g.autocomplete}),r.a.createElement(Ge.a,{label:"ExpiryDate",type:"date",value:i.expiryDate,variant:"filled",onChange:function(e){var t=e.target.value;u(Object(ze.a)({},i,{expiryDate:t}))},InputLabelProps:{shrink:!0}}),r.a.createElement(Ge.a,{label:"Stock",type:"number",InputLabelProps:{shrink:!0},value:i.stock,onChange:function(e){var t=e.target.value;u(Object(ze.a)({},i,{stock:t}))}}),r.a.createElement(Ge.a,{label:"".concat(m("product.label")," ").concat(m("common.from")),InputLabelProps:{shrink:!0},value:i.labelFrom,onChange:function(e){var t=e.target.value.toUpperCase(),a=null;t&&t.length>0&&(a=ra(t,i.stock)),u(Object(ze.a)({},i,{labelFrom:t,labelTo:a}))}}),r.a.createElement(Ge.a,{label:"".concat(m("product.label")," ").concat(m("common.to")),InputLabelProps:{shrink:!0},value:i.labelTo,onChange:function(e){var t=e.target.value.toUpperCase();u(Object(ze.a)({},i,{labelTo:t}))}}),r.a.createElement(Ge.a,{label:"Cost",type:"number",InputLabelProps:{shrink:!0},value:i.cost,onChange:function(e){var t=e.target.value;u(Object(ze.a)({},i,{cost:t}))}})),r.a.createElement(Xt.a,null,(function(e){e.formData;return s(Ht([{url:"/Inventory",label:"Inventory"},{url:"/Inventory/editStock/".concat(t),label:"Edit Stock"}])),null}))))}}),r.a.createElement(de.b,{exact:!0,path:"/Inventory/Item/:itemId",component:nt}),r.a.createElement(de.b,{exact:!0,path:"/Inventory/Labelling",component:function(){var e=Object(k.a)(),t=gt(),a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(),s=Object(o.a)(u,2),m=s[0],d=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(A.a,{variant:"h5"},e("shipping.labelling")),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(_e.a,{alternativeLabel:!0,connector:r.a.createElement(vt,null)},r.a.createElement(Ve.a,{key:e("shipping.shipment")},r.a.createElement(Ke.a,{StepIconComponent:ht.a},e("shipping.label"))),r.a.createElement(Ve.a,{key:e("shipping.warehouse")},r.a.createElement(Ke.a,{StepIconComponent:z.a},e("shipping.warehouse"))))))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(et,{onChange:i})),r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(Ge.a,{label:e("shipping.labelFrom"),variant:"filled",onChange:d,fullWidth:!0})))),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(Ye.a,{className:t.card},r.a.createElement(A.a,{variant:"h6"},e("shipping.unlabelledItem")),r.a.createElement(ft,{id:l,labelFrom:m})))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},r.a.createElement(Be.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.assign")," ",e("shipping.label")))))))}}),r.a.createElement(de.b,{exact:!0,path:"/Inventory/StockDispose",component:function(){var e=Object(k.a)(),t=st(),a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],i=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(A.a,{variant:"h5"},e("inventory.stockDispose")),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(_e.a,{alternativeLabel:!0,connector:r.a.createElement(mt,null)},r.a.createElement(Ve.a,{key:e("inventory.warehouse")},r.a.createElement(Ke.a,{StepIconComponent:z.a},e("inventory.warehouse")," ",e("common.from"))),r.a.createElement(Ve.a,{key:e("inventory.trash")},r.a.createElement(Ke.a,{StepIconComponent:ut.a},e("inventory.trash"))))))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(et,{onChange:i,label:e("inventory.warehouse")+" "+e("common.from")})))),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em"},r.a.createElement(Ye.a,{className:t.card},r.a.createElement(A.a,{variant:"h6"},e("inventory.productItem")),r.a.createElement(ot,{id:l})))),r.a.createElement(Ye.a,{className:t.card},r.a.createElement(Ce.a,{display:"flex"},r.a.createElement(Ce.a,{flex:1,mr:"0.5em",style:{textAlign:"right"}},r.a.createElement(Be.a,{color:"primary",variant:"contained",onClick:function(){return console.log}},e("common.transfer")))))))}}),r.a.createElement(de.b,{exact:!0,path:"/Xero",component:sa}),r.a.createElement(de.b,{exact:!0,path:"/Callback",component:da}),r.a.createElement(de.b,{exact:!0,path:"/DeliveryItem/:deliveryNoteId/delete",component:function(e){var t=Object(k.a)(),a=Object(Gt.a)(),c=Object(n.useState)(),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(Ie.a)(Oa),m=Object(o.a)(s,1)[0],d=Object(Ie.a)(ya),p=Object(o.a)(d,1)[0],E=e.location.state.record,f=Object(Ie.b)(va,{variables:{where:{id:E.item.id}}}),b=f.loading,h=f.data,g=Object(de.g)(),v=h&&h.inventoryItem;if(console.log(E),console.log(v),b)return r.a.createElement("h1",null,"Loading...");var O=function(){var e=Object(fa.a)(Ea.a.mark((function e(){return Ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({variables:{where:{id:E.id}}});case 3:return e.next=5,p({variables:{data:{toWarehouseId:i.id,inventoryItemIds:[v.id],fromWarehouseIds:[v.warehouse.id]}}}).then((function(e){console.log("res",e),a("Save Success."),g.go(-1)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a("Error: ".concat(e.t0.message),"warning");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Re.a,null,r.a.createElement(Yt.a,{container:!0,direction:"column",justify:"space-between",style:{height:300,padding:10}},r.a.createElement("h1",null,"Delete Deliery Item"),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Ge.a,{id:"id",label:"Delivery Item",variant:"filled",defaultValue:v.label,disabled:!0})),r.a.createElement(Yt.a,{xs:4,item:!0},r.a.createElement(et,{onChange:u,label:t("inventory.warehouse")+" "+t("common.from"),where:{where:{name_not_in:" "}}})),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Be.a,{variant:"contained",color:"primary",onClick:O},"Save"))))}})],Ia=a(187),xa=a(795),wa=a(794),Na=a(432),ka=a.n(Na),Ta=a(442),Fa=a(96),Aa=a(337),Ra=a.n(Aa),Wa=a(277),Ma=a.n(Wa),La=a(79),qa=a(1356),Ya=function e(t){return t.kind===qa.a.NON_NULL||t.kind===qa.a.LIST?e(t.ofType):t},Ba=function e(t){return t.kind===qa.a.NON_NULL?e(t.ofType):t.kind===qa.a.LIST},_a=function(e,t){return"Int"===e.name?parseInt(t,10):"Float"===e.name?parseFloat(t):t},Ha=function e(t,a,n){var r={};return t?(Object.keys(t).forEach((function(c){var l=t[c],o=null;if(l)if(a&&Array.isArray(a.args)&&(o=a.args.find((function(e){return e.name===c}))),l instanceof File)r[c]=l;else if(l instanceof Object&&!Array.isArray(l)&&o&&"INPUT_OBJECT"===o.type.kind){var i=n.types.find((function(e){return e.kind===o.type.kind&&e.name===o.type.name})).inputFields;r[c]=e(l,{args:i},n)}else l instanceof Object&&!Array.isArray(l)?r[c]=e(l,a,n):r[c]=o?function(e,t){switch("".concat(t.kind,":").concat(t.name)){case"SCALAR:Int":return Number(e);case"SCALAR:String":return String(e);case"SCALAR:Boolean":return Boolean(e);default:return e}}(l,o.type):l;else r[c]=l})),r):t},Ua=function(e,t,a){var n=Object.keys(a.data).reduce((function(e,n){if(["id","createdAt","updatedAt"].includes(n)||n.endsWith("Ids"))return e;var r=a.data[n];if(Object(La.isDate)(r))return Object(ze.a)({},e,Object(v.a)({},n,r.toISOString()));if(Object(La.isArray)(r)){if(Object(La.every)(r,La.isString)||Object(La.every)(r,La.isNumber))return Object(ze.a)({},e,Object(v.a)({},n,{set:r}));var c=[],l=[];r.forEach((function(e){e&&Object(La.isString)(e.id)?c.push({id:e.id}):l.push(e)}));var o={};if("UPDATE"===t&&a.previousData[n].length>0){var i=a.previousData[n];l.length>i.length?o.create=l.slice(i.length):l.length<i.length?o.deleteMany=i.slice(l.length):o.updateMany=i.map((function(e,t){return{where:e,data:l[t]}}))}else c.length>0&&(o.connect=c),l.length>0&&(o.create=l);return Object(ze.a)({},e,Object(v.a)({},n,Object(ze.a)({},o)))}return Object(La.isObject)(r)?Object(La.isString)(r.id)?Object(ze.a)({},e,Object(v.a)({},n,{connect:{id:r.id}})):Object(ze.a)({},e,Object(v.a)({},n,{create:r})):n.split(".").length>1?e:Object(ze.a)({},e,Object(v.a)({},n,r))}),{});return console.log("params/var",a,n),n},Va=function(e,t,a){var n=a.data,r=a.previousData,c=function e(t,a){return _.transform(t,(function(t,n,r){_.isEqual(n,a[r])||(t[r]=_.isObject(n)&&_.isObject(a[r])?e(n,a[r]):n)}))}(n,r);return console.log("params/var diff",n,r,c),Object.keys(c).reduce((function(e,a){if(["id","createdAt","updatedAt"].includes(a))return e;var c=n[a];if(Object(La.isDate)(c))return Object(ze.a)({},e,Object(v.a)({},a,c.toISOString()));if(a.endsWith("Ids"))return Object(ze.a)({},e,Object(v.a)({},a.substr(0,a.length-3),{connect:c.map((function(e){return{id:e}}))}));if(Object(La.isArray)(c)){if(Object(La.every)(c,La.isString)||Object(La.every)(c,La.isNumber))return Object(ze.a)({},e,Object(v.a)({},a,{set:c}));var l=[],o=[];c.forEach((function(e){e&&Object(La.isString)(e.id)?l.push({id:e.id}):o.push(e)}));var i={};if("UPDATE"===t&&r[a].length>0){var u=r[a];o.length>u.length?i.create=o.slice(u.length):o.length<u.length?i.deleteMany=u.slice(o.length):i.updateMany=u.map((function(e,t){return{where:e,data:o[t]}}))}else l.length>0&&(i.connect=l),o.length>0&&(i.create=o);return Object(ze.a)({},e,Object(v.a)({},a,Object(ze.a)({},i)))}return Object(La.isObject)(c)?(console.log("isObject",c,Object(La.every)(c,La.isNumber)),Object(La.isString)(c.id)?Object(ze.a)({},e,Object(v.a)({},a,{connect:{id:c.id}})):Object(ze.a)({},e,Object(v.a)({},a,{create:c}))):a.split(".").length>1?e:Object(ze.a)({},e,Object(v.a)({},a,c))}),{})},Ka=a(14),$a=function e(t){return t.kind===qa.a.LIST?e(t.ofType):t.kind===qa.a.NON_NULL},za=function(e){var t=Ya(e.type),a=$a(e.type);return Ba(e.type)?a?Ka.listType(Ka.nonNullType(Ka.namedType(Ka.name(t.name)))):Ka.listType(Ka.namedType(Ka.name(t.name))):a?Ka.nonNullType(Ka.namedType(Ka.name(t.name))):Ka.namedType(Ka.name(t.name))},Ga=function(e,t,a){if(0===e.args.length)return[];var n=Object.keys(t).filter((function(e){return"undefined"!==typeof t[e]}));return a?a.name.endsWith("CreateInput")?[Ka.argument(Ka.name("data"),Ka.variable(Ka.name("data")))]:a.name.endsWith("UpdateInput")?[Ka.argument(Ka.name("data"),Ka.variable(Ka.name("data"))),Ka.argument(Ka.name("where"),Ka.variable(Ka.name("where")))]:a.inputFields.filter((function(e){return n.includes(e.name)})).reduce((function(e,t){return[].concat(Object(Ee.a)(e),[Ka.argument(Ka.name(t.name),Ka.variable(Ka.name(t.name)))])}),[]):e.args.filter((function(e){return n.includes(e.name)})).reduce((function(e,t){return[].concat(Object(Ee.a)(e),[Ka.argument(Ka.name(t.name),Ka.variable(Ka.name(t.name)))])}),[])},Qa=function e(t){return Object.keys(t).reduce((function(a,n){if(n.startsWith("_"))return a;var r,c=t[n];return null===c||void 0===c?a:Array.isArray(c)?"object"===typeof c[0]?Object(ze.a)({},a,(r={},Object(v.a)(r,n,c.map(e)),Object(v.a)(r,"".concat(n,"Ids"),c.map((function(e){return e.id}))),r)):Object(ze.a)({},a,Object(v.a)({},n,c)):"object"===typeof c?Object(ze.a)({},a,{},c&&c.id&&Object(v.a)({},"".concat(n,".id"),c.id),Object(v.a)({},n,e(c))):Object(ze.a)({},a,Object(v.a)({},n,c))}),{})},Ja=(Sa=function(e){return function(t,a,n,r){var c=Ha(n,r,e);switch(a){case Fa.d:return function(e){return function(t,a,n){if(!n||!n.filter)return{};var r=Object.keys(n.filter).reduce((function(a,r){if("ids"===r)return Object(ze.a)({},a,{id_in:n.filter[r]});if("object"===typeof n.filter[r]&&e.types.find((function(e){return e.name==="".concat(t.type.name,"WhereInput")})).inputFields.find((function(e){return e.name==="".concat(r,"_some")}))){var c=Object.keys(n.filter[r]).reduce((function(e,t){return Object(ze.a)({},e,Object(v.a)({},"".concat(t,"_in"),n.filter[r][t]))}),{});return Object(ze.a)({},a,Object(v.a)({},"".concat(r,"_some"),c))}var l=r.split(".");if(l.length>1){if("id"===l[1])return e.types.find((function(e){return e.name==="".concat(t.type.name,"WhereInput")})).inputFields.find((function(e){return e.name==="".concat(l[0],"_some")}))?Object(ze.a)({},a,Object(v.a)({},"".concat(l[0],"_some"),{id:n.filter[r]})):Object(ze.a)({},a,Object(v.a)({},l[0],{id:n.filter[r]}));var o=t.type.fields.find((function(e){return e.name===l[0]})),i=Ya(o.type);return Object(ze.a)({},a,Object(v.a)({},r,_a(i,n.filter[r])))}var u=t.type.fields.find((function(e){return e.name===r}));if(u){var s=Ya(u.type);return Ba(u.type)?Object(ze.a)({},a,Object(v.a)({},r,Array.isArray(n.filter[r])?n.filter[r].map((function(e){return _a(s,e)})):_a(s,[n.filter[r]]))):Object(ze.a)({},a,Object(v.a)({},r,_a(s,n.filter[r])))}return Object(ze.a)({},a,Object(v.a)({},r,n.filter[r]))}),{});return{skip:parseInt((n.pagination.page-1)*n.pagination.perPage),first:parseInt(n.pagination.perPage),orderBy:"".concat(n.sort.field,"_").concat(n.sort.order),where:r}}}(e)(t,a,c,r);case Fa.e:return{where:{id_in:c.ids.length>0&&Object(La.isObject)(c.ids[0])?c.ids.map((function(e){return e.id})):c.ids}};case Fa.f:var l=c.target.split("."),o=Object(Wa.isPlural)(l[0])?Object(v.a)({},"".concat(l[0],"_some"),{id:n.id}):Object(v.a)({},l[0],{id:n.id});return{skip:parseInt((n.pagination.page-1)*n.pagination.perPage),first:parseInt(n.pagination.perPage),orderBy:"".concat(n.sort.field,"_").concat(n.sort.order),where:o};case Fa.g:case Fa.b:return{where:{id:c.id}};case Fa.a:return{data:Ua(0,a,c)};case Fa.h:return{data:Va(0,a,c),where:{id:c.id}}}}},ja=function(e){return function(t,a,n,r){var c=function(e,t,a){var n,r=t.name;return a===Fa.a&&(n="".concat(r,"CreateInput")),a===Fa.h&&(n="".concat(r,"UpdateInput")),e.types.find((function(e){return e.name===n}))}(e,t.type,a),l=(r.sortField,r.sortOrder,Object(x.a)(r,["sortField","sortOrder"])),o=function(e,t,a,n){if(0===e.args.length)return[];var r,c=Object.keys(t).filter((function(e){return"undefined"!==typeof t[e]}));return a?(console.log("inputType",a),r=a.name.endsWith("CreateInput")?[Ka.variableDefinition(Ka.variable(Ka.name("data")),Ka.nonNullType(Ka.namedType(Ka.name(a.name))))]:a.name.endsWith("UpdateInput")?[Ka.variableDefinition(Ka.variable(Ka.name("data")),Ka.nonNullType(Ka.namedType(Ka.name(a.name)))),Ka.variableDefinition(Ka.variable(Ka.name("where")),Ka.nonNullType(Ka.namedType(Ka.name("".concat(n.type.name,"WhereUniqueInput")))))]:a.inputFields.filter((function(e){return c.includes(e.name)})).reduce((function(e,t){return[].concat(Object(Ee.a)(e),[Ka.variableDefinition(Ka.variable(Ka.name(t.name)),za(t))])}),[])):r=e.args.filter((function(e){return c.includes(e.name)})).reduce((function(e,t){return[].concat(Object(Ee.a)(e),[Ka.variableDefinition(Ka.variable(Ka.name(t.name)),za(t))])}),[]),r}(n,r,c,t),i=Ga(n,r,c),u=Ga(n,l),s=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){return n.reduce((function(n,r){var c=Ya(r.type);if(c.name.startsWith("_"))return n;if(c.kind!==qa.a.OBJECT&&c.kind!==qa.a.INTERFACE)return[].concat(Object(Ee.a)(n),[Ka.field(Ka.name(r.name))]);if(t.resources.find((function(e){return e.type.name===c.name})))return[].concat(Object(Ee.a)(n),[Ka.field(Ka.name(r.name),null,null,null,Ka.selectionSet([Ka.field(Ka.name("id"))]))]);var l=t.types.find((function(e){return e.name===c.name}));return l&&!a.includes(l.name)?(a.push(l.name),[].concat(Object(Ee.a)(n),[Ka.field(Ka.name(r.name),null,null,null,Ka.selectionSet(e(t,a)(l.fields)))])):n}),[])}}(e)(t.type.fields);return a===Fa.d||a===Fa.e||a===Fa.f?(console.log("introspectionResults",a,i,u.filter((function(e){return!["skip","first"].includes(e.name.value)}))),Ka.document([Ka.operationDefinition("query",Ka.selectionSet([Ka.field(Ka.name(n.name),Ka.name("items"),i,null,Ka.selectionSet(s)),Ka.field(Ka.name("".concat(n.name,"Connection")),Ka.name("total"),u.filter((function(e){return!["skip","first"].includes(e.name.value)})),null,Ka.selectionSet([Ka.field(Ka.name("aggregate"),null,null,null,Ka.selectionSet([Ka.field(Ka.name("count"))]))]))]),Ka.name(n.name),o)])):a===Fa.b?Ka.document([Ka.operationDefinition("mutation",Ka.selectionSet([Ka.field(Ka.name(n.name),Ka.name("data"),i,null,Ka.selectionSet([Ka.field(Ka.name("id"))]))]),Ka.name(n.name),o)]):a===Fa.g?Ka.document([Ka.operationDefinition("query",Ka.selectionSet([Ka.field(Ka.name(n.name),Ka.name("data"),i,null,Ka.selectionSet(s))]),Ka.name(n.name),o)]):a===Fa.h||a===Fa.a?Ka.document([Ka.operationDefinition("mutation",Ka.selectionSet([Ka.field(Ka.name(n.name),Ka.name("data"),i,null,Ka.selectionSet(s))]),Ka.name(n.name),o)]):Ka.document([Ka.operationDefinition(Ta.a.includes(a)?"query":"mutation",Ka.selectionSet([Ka.field(Ka.name(n.name),Ka.name("data"),i,null,Ka.selectionSet(s))]),Ka.name(n.name),o)])}},Da=function(e){return function(e){return function(t){var a=t.data;return console.log("response.data",a,e),e===Fa.d||e===Fa.e||e===Fa.f?(console.log({data:t.data.items.map(Qa),total:t.data.total.aggregate.count}),{data:t.data.items.map(Qa),total:t.data.total.aggregate.count}):{data:Qa(a.data)}}}},function(e){var t=e.resources.map((function(e){return e.type.name}));return console.log("knownResources",t),function(a,n,r){var c=e.resources.find((function(e){return e.type.name===n}));if(!c)throw new Error("Unknown resource ".concat(n,". Make sure it has been declared on your server side schema. Known resources are ").concat(t.join(", ")));var l=c[a];if(!l)throw new Error("No query or mutation matching fetch type ".concat(a," could be found for resource ").concat(c.type.name));var o=Sa(e)(c,a,r,l);return{query:ja(e)(c,a,l,o),variables:o,parseResponse:Da(e)(a,c,l)}}}),Xa={buildQuery:Ja,introspection:{operationNames:(Ca={},Object(v.a)(Ca,Fa.d,(function(e){return"".concat(Ma()(Ra()(e.name)))})),Object(v.a)(Ca,Fa.g,(function(e){return"".concat(Ra()(e.name))})),Object(v.a)(Ca,Fa.e,(function(e){return"".concat(Ma()(Ra()(e.name)))})),Object(v.a)(Ca,Fa.f,(function(e){return"".concat(Ma()(Ra()(e.name)))})),Object(v.a)(Ca,Fa.a,(function(e){return"create".concat(e.name)})),Object(v.a)(Ca,Fa.h,(function(e){return"update".concat(e.name)})),Object(v.a)(Ca,Fa.b,(function(e){return"delete".concat(e.name)})),Ca)}},Za=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e.rawFile),n.onload=function(){return t(n.result)},n.onerror=a}))},en=new wa.a({uri:"http://35.232.67.13:4000/"}),tn=new Ia.a({link:en,cache:new xa.a,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),an=new Ia.a(tn),nn=function(){var e=Object(fa.a)(Ea.a.mark((function e(){var t;return Ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a={client:an},Object(Ta.b)(ka()({},Xa,a)).then((function(e){return function(t,a,n){if(t===Fa.c){var r=n.ids,c=Object(x.a)(n,["ids"]);return Promise.all(r.map((function(t){return e(Fa.b,a,Object(ze.a)({id:t},c))}))).then((function(e){return{data:e.reduce((function(e,t){var a=t.data;return[].concat(Object(Ee.a)(e),[a.id])}),[])}}))}if(t===Fa.i){var l=n.ids,o=n.data,i=Object(x.a)(n,["ids","data"]);return Promise.all(l.map((function(t){return e(Fa.h,a,Object(ze.a)({data:Object(ze.a)({id:t},o)},i))}))).then((function(e){return{data:e.reduce((function(e,t){var a=t.data;return[].concat(Object(Ee.a)(e),[a.id])}),[])}}))}return e(t,a,n)}}));case 3:return t=e.sent,e.abrupt("return",(function(e,a,n){if("Product"!==a||!n.data||!n.data.images||0===n.data.images.length)return t(e,a,n);if("UPDATE"===e){delete n.data.imagesIds;var r=n.data.images.filter((function(e){return e.rawFile instanceof File})),c=n.data.images.filter((function(e){return!(e.rawFile instanceof File)}));return Promise.all(r.map(Za)).then((function(e){return e.map((function(e){return{src:e,title:"".concat(n.data.name," (").concat(n.data.code,")")}}))})).then((function(e){return t("UPDATE",a,Object(ze.a)({},n,{data:Object(ze.a)({},n.data,{images:[].concat(Object(Ee.a)(c),Object(Ee.a)(e))})}))}))}if("CREATE"===e){var l=n.data.images.filter((function(e){return e.rawFile instanceof File}));return Promise.all(l.map(Za)).then((function(e){return e.map((function(e){return{src:e,title:"".concat(n.data.name," (").concat(n.data.code,")")}}))})).then((function(e){return t("CREATE",a,Object(ze.a)({},n,{data:Object(ze.a)({},n.data,{images:e})}))}))}return t(e,a,n)}));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}var a}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function rn(){var e=Object(Pe.a)(["\n  query users($where: UserWhereInput) {\n    users(where: $where) {\n      id\n      name\n      password\n      permission\n      group {\n        id\n        name\n      }\n    }\n  }\n"]);return rn=function(){return e},e}var cn=we()(rn()),ln={login:function(){var e=Object(fa.a)(Ea.a.mark((function e(t){var a,n,r,c;return Ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,e.next=3,an.query({query:cn,variables:{where:{AND:[{name:a},{password:n}]}}});case 3:if(r=e.sent,c=r.data.users[0],0!==r.data.users.length){e.next=7;break}throw new Error("Login Error");case 7:return localStorage.setItem("token",c.name),localStorage.setItem("permissions",c.permission.toLowerCase()),localStorage.setItem("group",JSON.stringify({name:c.group.name,id:c.group.id})),e.abrupt("return",Promise.resolve(c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("permissions"),localStorage.removeItem("group"),Promise.resolve()},checkAuth:function(){return console.log("checkAuth",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){console.log("checkError",e);var t=e.status;return 401===t||403===t?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},on=a(1378),un=a(748),sn=a(1379),mn=a(1365),dn=a(1271),pn=a(1328),En=a(1380),fn=a(1329),bn=function(){return"/Warehouse"},hn={url:"/Warehouse",label:"Warehouse"},gn=function(e){return Object(j.e)()(Ht([hn,{url:"/Warehouse/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:bn},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"description"}),r.a.createElement(xt.a,{source:"address"}),r.a.createElement(sn.a,{source:"type",choices:[{id:"NORMAL",name:"Normal"},{id:"TEMPORARY",name:"Temporary"}]})))},vn=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:bn},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"description"}),r.a.createElement(xt.a,{source:"address"}),r.a.createElement(sn.a,{source:"type",choices:[{id:"NORMAL",name:"Normal"},{id:"TEMPORARY",name:"Temporary"}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([hn,{url:"/Warehouse/".concat(a.id),label:"Edit: ".concat(a.name)}])),null}))))},On=function(e){return Object(j.e)()(Ht([hn])),r.a.createElement(Nt.a,e,r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Ft.a,{source:"description"}),r.a.createElement(Ft.a,{source:"type"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},yn=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.name:"",c=a.record?a.record.id:"";return t(Ht([hn,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(n)}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"id"}),r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Ft.a,{source:"description"}),r.a.createElement(Ft.a,{source:"address"}),r.a.createElement(Ft.a,{source:"type"})))}))},Sn=a(1330),jn=a(1331),Dn=function(){return"/Supplier"},Cn={url:"/Supplier",label:"Supplier"},Pn=function(e){return Object(j.e)()(Ht([Cn,{url:"/Supplier/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Dn},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"email",validate:Object(un.b)()}),r.a.createElement(xt.a,{source:"country"}),r.a.createElement(xt.a,{source:"phone"}),r.a.createElement(xt.a,{source:"fax"}),r.a.createElement(xt.a,{multiline:!0,source:"paymentTerms"}),r.a.createElement(xt.a,{multiline:!0,source:"creditLine"})))},In=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Dn},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"email",validate:Object(un.b)()}),r.a.createElement(xt.a,{source:"country"}),r.a.createElement(xt.a,{source:"phone"}),r.a.createElement(xt.a,{source:"fax"}),r.a.createElement(xt.a,{source:"paymentTerms"}),r.a.createElement(xt.a,{source:"creditLine"}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([Cn,{url:"/Supplier/".concat(a.id),label:"Edit: ".concat(a.name)}])),null}))))},xn=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.name:"",c=a.record?a.record.id:"";return t(Ht([Cn,{url:"/Supplier/".concat(c,"/show"),label:"Details: ".concat(n)}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Sn.a,{source:"email"}),r.a.createElement(Ft.a,{source:"country"}),r.a.createElement(Ft.a,{source:"phone"}),r.a.createElement(Ft.a,{source:"fax"}),r.a.createElement(Ft.a,{source:"paymentTerms"}),r.a.createElement(Ft.a,{source:"creditLine"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))},wn=function(e){return Object(j.e)()(Ht([Cn])),r.a.createElement(Nt.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Sn.a,{source:"email"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},Nn=a(1366),kn=a(1333),Tn=a(1334),Fn=(a(1335),function(){return"/ReceivePayment"}),An={url:"/ReceivePayment",label:"Receive Payment"},Rn=function(e){return Object(j.e)()(Ht([An,{url:"/ReceivePayment/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{redirect:Fn},r.a.createElement(Nn.a,{label:"Invoice",source:"invoiceId",reference:"Invoice",sort:{field:"createdAt",order:"DESC"}},r.a.createElement(kn.a,{optionText:"code",label:"Receive Payment No."})),r.a.createElement(kn.a,{source:"paymentMethod",validate:Object(un.c)(),choices:[{id:"COD",name:"Cash on Delivery"},{id:"CREDIT",name:"Credit"},{id:"DEBIT",name:"Debit"}]}),r.a.createElement(Tn.a,{source:"paidAt",validate:Object(un.c)()})))},Wn=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.id:"";return t(Ht([An,{url:"/CustomerGroup/".concat(n,"/show"),label:"Details: ".concat("Details")}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Invoice",reference:"Invoice",source:"invoice.id"},r.a.createElement(Ft.a,{source:"code",label:"Receive Payment No."})),r.a.createElement(jn.a,{source:"paidAt"}),r.a.createElement(Ft.a,{source:"paymentMethod"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))},Mn=function(e){return Object(j.e)()(Ht([An])),r.a.createElement(Nt.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Tt.a,{label:"Invoice",reference:"Invoice",source:"invoice.id"},r.a.createElement(Ft.a,{source:"code",label:"Receive Payment No."})),r.a.createElement(jn.a,{source:"paidAt"}),r.a.createElement(Ft.a,{source:"paymentMethod"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(dn.a,null)))},Ln=a(1325),qn=a(1266),Yn=a(1269),Bn=a(1364),_n=a(760),Hn=a(50),Un=a(1381),Vn=a(1336),Kn=be()((function(e){return{label:{padding:e.spacing(1),paddingBottom:0,color:e.palette.text.hint},text:{padding:e.spacing(1),paddingTop:0,color:e.palette.text.primary}}}));var $n=function(e){var t=e.label,a=e.children,n=Kn();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:n.label},r.a.createElement(A.a,{variant:"caption"},t)),r.a.createElement("div",{className:n.text},r.a.createElement(A.a,{variant:"inherit"},a)))},zn=a(452),Gn=a(818),Qn=a(561),Jn=a(326);var Xn=function(e){e.formProps;var t=Object(k.a)(),a=function(e,a){e.invoiceId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},r.a.createElement(Vn.a,{source:"salesOrder.id",reference:"SalesOrder",record:e,link:!1},(function(e){var t=e.referenceRecord;return r.a.createElement(kn.a,{fullWidth:!0,defaultValue:t&&t.id,disabled:!0,choices:t&&[{id:t.id,name:t.code}],source:"salesOrderId"})})))),e.salesOrderId&&function(e){return r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:e,link:!1},r.a.createElement(Vn.a,{source:"shop.id",reference:"CustomerShop",record:e,link:!1},(function(e){var t=e.referenceRecord;return r.a.createElement(kn.a,{fullWidth:!0,choices:t&&[{id:t.id,name:"".concat(t.nameChi," (").concat(t.code,")")}],defaultValue:t&&t.id,disabled:!0,source:"customerId"})}))))}(e),e.customerId&&r.a.createElement(Hn.a,{name:"state"},(function(e){var a=e.input,n=a.value,c=(a.name,a.onChange);n||c("SENT");var l=function(e){c(e)};return r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Jn.a,{variant:"filled",fullWidth:!0},r.a.createElement(Qn.a,{id:"form-state"},t("salesOrder.state")),r.a.createElement(Gn.a,{label:"form-state",onChange:function(e){return l(e.target.value)},title:"Status",defaultValue:"SENT"},[{id:"SENT",name:"SENT"},{id:"PICKED",name:"PICKED"},{id:"PACKED",name:"PACKED"},{id:"DELIVERED",name:"DELIVERED"}].map((function(e){return r.a.createElement(zn.a,{key:"DN".concat(e.id),value:e.id},e.name)})))))})),e.customerId&&function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:t("invoice.totalPrice")},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:t("invoice.state")},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:e,link:!1},r.a.createElement(Ft.a,{source:"state"})))),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:e,link:!1},r.a.createElement(Un.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{source:"price",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))}(e))};return r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Nn.a,{label:"Select Invoice",source:"invoiceId",reference:"Invoice",resource:"DeliveryNote",validate:Object(un.c)(),filterToQuery:function(e){return{code_contains:e}},sort:{field:"createdAt",order:"DESC"}},r.a.createElement(kn.a,{optionText:"code",fullWidth:!0,label:"Invoice No."}))),r.a.createElement(Xt.a,{subscription:{values:!0}},(function(e){var t=e.formData;Object(x.a)(e,["formData"]);return t.invoiceId&&a(t)})))};function Zn(){var e=Object(Pe.a)(["\n  query inventoryItems($where: InventoryItemWhereInput) {\n    inventoryItems(where: $where, first: 10) {\n      id\n      label\n      expiryDate\n      product {\n        id\n        code\n        nameEn\n        nameChi\n      }\n    }\n  }\n"]);return Zn=function(){return e},e}var er=we()(Zn());function tr(e){var t=e.onChange,a=e.defaultValue,c=e.products;console.log(c.map((function(e){return e.product.id})));var l=Object(n.useState)(""),i=Object(o.a)(l,2),u=i[0],s=i[1],m=(Object(k.a)(),Object(Ie.b)(er,{variables:{where:{label_contains:u,productId_in:c.map((function(e){return e.product.id})),warehouse:{name_not:"OUT"}}}})),d=m.loading,p=m.data,E=r.a.useState(!1),f=Object(o.a)(E,2),b=f[0],h=f[1],g=r.a.useState([]),v=Object(o.a)(g,2),O=v[0],y=v[1],S=d||b&&0===O.length;r.a.useEffect((function(){if(S&&p){console.log("get!!!!data",p);var e=p.inventoryItems;e.filter((function(e){return c.map((function(e){return e.product.code})).includes(e.product.code)}));y(e.map((function(e){return{id:e.id,name:"(".concat(e.label," - ").concat(e.product.code,"-").concat(e.product.nameChi," ")}})))}}),[S,p]),r.a.useEffect((function(){b||y([])}),[b]);return r.a.createElement(Qe.a,{id:"purchase-order-autocomplete",autoSelect:!0,autoComplete:!0,autoHighlight:!0,open:b,onOpen:function(){h(!0)},onClose:function(){h(!1)},onChange:function(e,a){var n=p.inventoryItems;a&&(t(n.find((function(e){return e.id===a.id}))),s(""))},onInputChange:function(e,t){s(t)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e){return e.id},options:O,loading:S,value:a&&{id:a.id,name:a.code},renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:"Search by label...",fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,S?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}function ar(){var e=Object(Pe.a)(["\n  query inventoryItems($where: InventoryItemWhereInput!) {\n    inventoryItems(where: $where, first: 20) {\n      id\n      label\n      expiryDate\n      product {\n        id\n        code\n        nameChi\n        nameEn\n      }\n      warehouse {\n        name\n      }\n    }\n  }\n"]);return ar=function(){return e},e}function nr(){var e=Object(Pe.a)(["\n  query products($where: ProductWhereInput!) {\n    products(where: $where) {\n      id\n    }\n  }\n"]);return nr=function(){return e},e}function rr(){var e=Object(Pe.a)(["\n  query products($where: ProductWhereInput) {\n    products(where: $where) {\n      id\n      code\n      nameChi\n      nameEn\n      inventoryItems {\n        id\n        label\n        expiryDate\n        product {\n          id\n          code\n          nameChi\n          nameEn\n        }\n        warehouse {\n          name\n        }\n      }\n    }\n  }\n"]);return rr=function(){return e},e}we()(rr());var cr=we()(nr()),lr=we()(ar());function or(e){var t=e.onChange,a=e.value,c=e.productIds,l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],m=i[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),E=(p[0],p[1],Object(Ie.b)(cr,{variables:{where:{id_in:c,code_contains:s}},onCompleted:function(e){h({variables:{where:{productId_in:e.products.length>=1?e.products[0].id:""}}})}})),f=(E.loading,E.productData,Object(u.useLazyQuery)(lr,{onCompleted:function(e){var t=(e?e.inventoryItems:[]).filter((function(e){return"OUT"!==e.warehouse.name})).reduce((function(e,t){return e=[].concat(Object(Ee.a)(e),[{id:"".concat(t.product.id,"-").concat(t.id),name:"".concat(t.product.code,"-").concat(t.product.nameChi," (").concat(t.label||"No Label",")")}])}),[]);x(t)}})),b=Object(o.a)(f,2),h=b[0],g=b[1],v=g.loading,O=g.data,y=r.a.useState(!1),S=Object(o.a)(y,2),j=S[0],D=S[1],C=r.a.useState([]),P=Object(o.a)(C,2),I=P[0],x=P[1],w=v||j&&0===I.length;r.a.useEffect((function(){j||x([])}),[j]);return r.a.createElement(Qe.a,{id:"product-autocomplete",open:j,onOpen:function(){D(!0)},onClose:function(){D(!1)},onChange:function(e,a){var n=a?a.id.split("-"):[],r=Object(o.a)(n,2),c=(r[0],r[1]),l=O.inventoryItems;l&&(t(l.find((function(e){return e.id===c}))),m(""))},onInputChange:function(e,t){m(t)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e){return e.id},options:I,loading:w,value:a,renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:"Search by product code...",fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,w?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var ir=a(817);a(1218);function ur(){var e=Object(Pe.a)(["\n  query invoice($where: InvoiceWhereUniqueInput!) {\n    invoice(where: $where) {\n      salesOrder {\n        id\n        products {\n          id\n          quantity\n          product {\n            id\n            code\n            nameChi\n            nameEn\n          }\n        }\n      }\n    }\n  }\n"]);return ur=function(){return e},e}var sr=we()(ur()),mr=function(e){var t=e.source,a=e.record,n=void 0===a?{}:a,c=(e.label,e.onDelete);return r.a.createElement(r.a.Fragment,null,n[t]&&n[t].map((function(e){return r.a.createElement(ir.a,{key:"chip-".concat(e.itemId),label:"".concat(e.label||"No label"),onDelete:function(){return c(e)},color:"primary"})})))},dr=function(){return r.a.createElement(Hn.a,{name:"items"},(function(e){var t=e.input,a=Object(k.a)(),n=t.value,c=(t.name,t.onChange);n||c([]);var l=function(e){n.map((function(e){return e.itemId})).includes(e.id)||c([].concat(Object(Ee.a)(n),[{itemId:e.id,productId:e.product.id,productCode:e.product.code,productNameEn:e.product.nameEn,productNameChi:e.product.nameChi,label:e.label,expiryDate:e.expiryDate,boxNum:1}]))},o=function(e){c(n.filter((function(t){return t.itemId!==e.itemId})))};return r.a.createElement(Xt.a,{subscription:{values:!0}},(function(e){var t=e.formData;console.log("formData",t);var n=t.invoiceId,c=t.items,i=Object(Gt.a)(),u=Object(Ie.b)(sr,{variables:{where:{id:n}}}).data,s=u?u.invoice.salesOrder.products:[];console.log("fetching date here:",s);var m=s.reduce((function(e,t){var a=t.product,n=Object(x.a)(t,["product"]);return e[a.id]=Object(ze.a)({},a,{},n),e}),{});return c.forEach((function(e){var t=e.productId;if(m[t]){var a=m[t].selected||[];m[t].selected=[].concat(Object(Ee.a)(a),[e]),m[t].selectedNum=m[t].selected.length}else i("deliveryNote.noNeedThisProduct","info")})),r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:6},r.a.createElement($n,{label:a("common.addNew")},r.a.createElement(tr,{onChange:l,placeholder:"search by label...",products:s}))),r.a.createElement(Yt.a,{item:!0,xs:6,style:{marginTop:29}},r.a.createElement(or,{onChange:l,placeholder:"search by product no...",productIds:Object.keys(m)})),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(kt.a,{data:m,ids:Object.keys(m),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},r.a.createElement(Ft.a,{source:"code",label:"Delivery Note No."}),r.a.createElement(Wt,{source:"name"}),r.a.createElement(At.a,{source:"quantity"}),r.a.createElement(mr,{source:"selected",onDelete:o}),r.a.createElement(At.a,{source:"selectedNum",label:"Selected quantity"}))))}))}))},pr=a(205),Er=a.n(pr),fr=function(e){var t=e.source,a=e.record,n=void 0===a?{}:a,c=(e.label,e.onChange),l=e.maxBox,o=n[t];return r.a.createElement(Jn.a,null,r.a.createElement(Qn.a,{id:"demo-simple-select-label"},"Box"),r.a.createElement(Gn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,onChange:function(e){c(e.target.value,n.itemId)}},Er()(l+1).map((function(e){return r.a.createElement(zn.a,{key:"option-".concat(n.itemId,"-").concat(e+1),value:e+1},"Box ",e+1)}))))},br=function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(Hn.a,{name:"items"},(function(e){var t=e.input,n=(Object(k.a)(),t.value),l=(t.name,t.onChange);console.log("value in box form",n);var o=n.reduce((function(e,t){return e[t.itemId]=t,e}),{});return r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(kt.a,{data:o,ids:Object.keys(o),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},r.a.createElement(Ft.a,{source:"productCode"}),r.a.createElement(Wt,{source:"productName"}),r.a.createElement(At.a,{source:"label"}),r.a.createElement(fr,{source:"boxNum",onChange:function(e,t){n.find((function(e){return e.itemId===t})).boxNum=e,l(Object(Ee.a)(n)),e>a&&c(e)},maxBox:a}))))}))};var hr=function(e){var t=e.formProps,a=Object(k.a)();return console.log(t),r.a.createElement(Xt.a,{subscription:{values:!0}},(function(e){var t=e.formData,n=(t.invoiceId,t.salesOrderId,t.customerId,t.items,t.items.reduce((function(e,t){return e[t.itemId]=t,e}),{}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:6},r.a.createElement($n,{label:a("customer.shippingAddress")},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Ft.a,{source:"deliverAddress"})))),r.a.createElement($n,{label:"Attn."},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:t,link:!1},r.a.createElement(Ft.a,{source:"nameChi"}))))),r.a.createElement($n,{label:"Tel.."},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:t,link:!1},r.a.createElement(Ft.a,{source:"mobile"}))))),r.a.createElement($n,{label:a("customer.billingAddress")},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:t,link:!1},r.a.createElement(Ft.a,{source:"billingAddress"}))))),r.a.createElement($n,{label:"Attn."},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:t,link:!1},r.a.createElement(Ft.a,{source:"nameChi"}))))),r.a.createElement($n,{label:"Tel.."},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"salesOrderId",reference:"SalesOrder",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"shop.id",reference:"CustomerShop",record:t,link:!1},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"customer.id",reference:"Customer",record:t,link:!1},r.a.createElement(Ft.a,{source:"mobile"})))))),r.a.createElement(Yt.a,{item:!0,xs:6},r.a.createElement($n,{label:a("common.date")},Dt()().format("YYYY-MM-DD")),r.a.createElement($n,{label:"Ref."},r.a.createElement(Tt.a,{resource:"DeliveryNote",basePath:"/DeliveryNote",source:"invoiceId",reference:"Invoice",record:t,link:!1},r.a.createElement(Ft.a,{source:"code",label:"Delivery Note No."}))),r.a.createElement($n,{label:a("deliveryNote.deliveryDate")},r.a.createElement(Ft.a,{source:"deliveryDate",record:t})),r.a.createElement($n,{label:a("common.salesman")},"Jacky Lee")),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(kt.a,{data:n,ids:Object.keys(n),resource:"DeliveryNote",basePath:"/DeliveryNote",currentSort:{field:"code",order:"ASC"}},r.a.createElement(Ft.a,{source:"productCode"}),r.a.createElement(Wt,{source:"productName"}),r.a.createElement(At.a,{source:"label"}),r.a.createElement(jn.a,{source:"expiryDate"}),r.a.createElement(Ft.a,{label:"Box Num",source:"boxNum"})))))}))};function gr(){var e=Object(Pe.a)(["\n  query getInvoice($id: ID!) {\n    invoice(where: { id: $id }) {\n      code\n    }\n  }\n"]);return gr=function(){return e},e}var vr=be()((function(e){return{layout:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},stepper:{padding:e.spacing(3,0,5)}}})),Or=we()(gr()),yr=function(e){var t=Object(Ln.a)("DeliveryNote"),a=Object(o.a)(t,1)[0],c=Object(qn.a)(),l=Object(Gt.a)(),i=Object(Hn.f)(),u=e.basePath,s=e.redirect,m=Object(Ie.b)(Or,{variables:{id:i.values.invoiceId}}),d=(m.loading,m.data),p=Object(n.useCallback)((function(){var e=i.values,t=e.items,n=Object(x.a)(e,["items"]);console.log(d.invoice.code),a({payload:{data:Object(ze.a)({},n,{code:"DN-".concat(d.invoice.code),items:t.map((function(e){return{productId:e.productId,itemId:e.itemId,boxNum:e.boxNum}}))})}},{onSuccess:function(e){var t=e.data;l("ra.notification.created","info",{smart_count:1}),c(s,u,t.id,t)},onFailure:function(e){return l("Error: ".concat(e.message),"warning")}})}),[a,l,c,u,i,s]);return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:p}))},Sr=function(e){var t=Object(j.e)(),a=Object(k.a)(),c=vr(),l=(Object(de.g)(),Object(n.useState)(0)),i=Object(o.a)(l,2),u=i[0],s=i[1];t(Ht([{url:"/DeliveryNote",label:"Delivery Note"},{url:"/DeliveryNote/create",label:"Create New"}]));var m=[a("deliveryNote.selectInvoice"),a("deliveryNote.quantityCheck"),a("deliveryNote.packingBox"),a("deliveryNote.review")],d=function(){s(u+1)},p=function(){s(u-1)};return r.a.createElement(Bn.a,Object.assign({},e,{render:function(e){return r.a.createElement("form",null,r.a.createElement("main",{className:c.layout},r.a.createElement(Re.a,{className:c.paper},r.a.createElement(_e.a,{activeStep:u,className:c.stepper},m.map((function(e){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Ke.a,null,e))}))),r.a.createElement(r.a.Fragment,null,0===u&&r.a.createElement(Xn,{formProps:e}),1===u&&r.a.createElement(dr,{formProps:e}),2===u&&r.a.createElement(br,{formProps:e}),3===u&&r.a.createElement(hr,{formProps:e}),r.a.createElement(_n.a,null,r.a.createElement(Ce.a,{display:"flex",justifyContent:"flex-end",width:"100%"},u>0&&r.a.createElement(Be.a,{onClick:p,color:"primary"},a("common.prev")),u<m.length-1&&r.a.createElement(Be.a,{onClick:d,color:"primary"},a("common.next")),r.a.createElement(yr,{disabled:u!==m.length-1,basePath:"/DeliveryNote",redirect:"/DeliveryNote"})))))))}}))},jr=a(1371),Dr=a(1337),Cr=a(1338),Pr=a(1339),Ir=a(1340),xr=a(223),wr=a.n(xr),Nr=(a(526),a(436)),kr=a.n(Nr);function Tr(e){for(var t=e.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g," ").split(" "),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].substring(1);return t.join(" ")}var Fr=function(e){return function(){var t=Dt()(),a=new kr.a("EN_US"),n=[],r=new wr.a("p","pt");r.page=1;var c=r.internal.pageSize.getWidth(),l=r.internal.pageSize.getHeight(),o={beforePageContent:function(){var a=r.internal.getNumberOfPages().toString();"function"===typeof r.putTotalPages&&(a+=" of {total_pages_count_string}"),r.setFontSize(23),r.setFontStyle("bold"),r.text(c-200,50,"Sales Contract"),r.setFontSize(10),r.setFontStyle("bold"),r.text(50,100,"Bill To:"),r.setFontStyle("normal"),r.text(100,100,e.salesOrder.shop.nameEn),r.text(100,115,e.salesOrder.shop.deliverAddress),r.text(100,130,""),r.text(100,145,""),r.setFontStyle("bold"),r.text(50,165,"Attn:"),r.setFontStyle("normal"),r.text(100,165,e.salesOrder.shop.customer.nameEn),r.setFontStyle("bold"),r.text(50,180,"Tel:"),r.setFontStyle("normal"),r.text(100,180,e.salesOrder.shop.phone?e.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(200,180,"Fax:"),r.setFontStyle("normal"),r.text(250,180,e.salesOrder.shop.phone?e.salesOrder.shop.phone.toString():""),r.setFontStyle("bold"),r.text(350,100,"Date:"),r.setFontStyle("normal"),r.text(410,100,t.format("DD/MMM/YYYY")),r.setFontStyle("bold"),r.text(350,115,"REF. No.:"),r.setFontStyle("normal"),r.text(410,115,e.salesOrder.code),r.setFontStyle("bold"),r.text(350,130,"Cust. ID:"),r.setFontStyle("normal"),r.text(410,130,e.salesOrder.shop.customer.code),r.setFontStyle("bold"),r.text(350,145,"Pay term:"),r.setFontStyle("normal"),r.text(410,145,""),r.setFontStyle("bold"),r.text(350,160,"Ship Date:"),r.setFontStyle("normal"),r.text(410,160,Dt()(e.salesOrder.shippingDate).format("DD/MMM/YYYY")),r.setFontStyle("bold"),r.text(350,175,"Salesman:"),r.setFontStyle("normal"),r.text(410,175,""),r.setFontStyle("bold"),r.text(350,190,"Page:"),r.setFontStyle("normal"),r.text(410,190,a),r.setLineWidth(1.5),r.setDrawColor(0,0,0),r.line(50,200,c-50,200),r.line(50,220,c-50,220)},afterPageContent:function(){r.setFontSize(7),r.text(c-40,l-30,"Page - "+r.page),r.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},qty:{columnWidth:30},price:{columnWidth:40},amount:{columnWidth:50,halign:"right"}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:200,bottom:100,horizontal:50}};if(e.salesOrder.products.map((function(e,t){var a={count:t+1,no:e.product.code,des:e.product.nameEn,qty:e.quantity,price:e.price,amount:e.totalPrice};n.push(a)})),r.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"qty",header:"Qty"},{dataKey:"price",header:"Price"},{dataKey:"amount",header:"Amount"}],n,o),r.setFontSize(10),r.setFontStyle("normal"),r.text(412,r.autoTable.previous.finalY+12,"Sub-total :"),r.text(c-53-5*e.salesOrder.subtotal.toFixed(1).toString().length,r.autoTable.previous.finalY+12,e.salesOrder.subtotal.toFixed(1).toString()),r.text(376,r.autoTable.previous.finalY+27,"Discount Amount :"),r.text(c-47-5*(e.salesOrder.discountAmount.toFixed(1).toString().length+1),r.autoTable.previous.finalY+27,e.salesOrder.discountAmount.toFixed(1).toString()),r.text(400,r.autoTable.previous.finalY+47,"Grand Total :"),r.text(c-53-5*e.salesOrder.grandTotal.toFixed(1).toString().length,r.autoTable.previous.finalY+47,e.salesOrder.grandTotal.toFixed(1).toString()),e.salesOrder.grandTotal===parseInt(e.salesOrder.grandTotal,10))r.text(50,r.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+Tr(a.toWords(e.salesOrder.grandTotal))+" ONLY.");else{var i=e.salesOrder.grandTotal.toFixed(1).toString().split(".");r.text(50,r.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+Tr(a.toWords(parseInt(i[0])))+" And "+Tr(a.toWords(parseInt(10*i[1])))+" CENTS ONLY.")}r.setFontStyle("bold"),r.text(50,r.autoTable.previous.finalY+87,"Shipterm :"),r.setFontStyle("normal"),r.text(100,r.autoTable.previous.finalY+87,"Standard Delivery"),r.setFontStyle("bold"),r.text(50,r.autoTable.previous.finalY+105,"REMARKS :"),r.setFontStyle("normal"),r.text(115,r.autoTable.previous.finalY+105,"The sales order only valid for 7 days."),r.setFontSize(8),r.text(350,r.autoTable.previous.finalY+120,"RECEIVED THE ABOVE IN GOOD CONDITIONS :"),r.line(350,r.autoTable.previous.finalY+190,c-50,r.autoTable.previous.finalY+190),r.text(350,r.autoTable.previous.finalY+200,"COMPANY CHOP & AUTHORIZED SIGNATURE :"),r.setLineWidth(1),r.setDrawColor(0,0,0),r.line(455,r.autoTable.previous.finalY,c-50,r.autoTable.previous.finalY),r.line(455,r.autoTable.previous.finalY+33,c-50,r.autoTable.previous.finalY+33),r.line(455,r.autoTable.previous.finalY+50,c-50,r.autoTable.previous.finalY+50),r.line(455,r.autoTable.previous.finalY+52,c-50,r.autoTable.previous.finalY+52),r.setLineWidth(1.5),r.setDrawColor(0,0,0),r.line(50,r.autoTable.previous.finalY+76,c-50,r.autoTable.previous.finalY+76),r.line(50,r.autoTable.previous.finalY+91,c-50,r.autoTable.previous.finalY+91),"function"===typeof r.putTotalPages&&r.putTotalPages("{total_pages_count_string}"),r.save("SalesContract.pdf")}},Ar=a(772),Rr=a.n(Ar),Wr=function(e){var t=e.deliveryNote;return function(){var e=Dt()(),a=[],n=new wr.a("p","pt");n.page=1;var r=n.internal.pageSize.getWidth(),c=n.internal.pageSize.getHeight(),l={beforePageContent:function(){var a=n.internal.getNumberOfPages().toString();"function"===typeof n.putTotalPages&&(a+=" of {total_pages_count_string}"),n.setFontSize(23),n.setFontStyle("bold"),n.text(r-250,50,"DELIVERY NOTE"),n.setFontSize(10),n.setFontStyle("bold"),n.text(50,80,"Ship To:"),n.setFontStyle("normal"),n.text(100,80,t.salesOrder.shop.nameEn),n.text(100,95,t.salesOrder.shop.deliverAddress),n.text(100,110,""),n.text(100,125,""),n.setFontStyle("bold"),n.text(50,145,"Attn:"),n.setFontStyle("normal"),n.text(100,145,t.salesOrder.shop.customer.nameEn),n.setFontStyle("bold"),n.text(50,160,"Tel:"),n.setFontStyle("normal"),n.text(100,160,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(200,160,"Fax:"),n.setFontStyle("normal"),n.text(250,160,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(50,180,"Bill To:"),n.setFontStyle("normal"),n.text(100,180,t.salesOrder.shop.nameEn),n.text(100,195,t.salesOrder.shop.deliverAddress),n.text(100,210,""),n.text(100,225,""),n.setFontStyle("bold"),n.text(50,245,"Attn:"),n.setFontStyle("normal"),n.text(100,245,t.salesOrder.shop.customer.nameEn),n.setFontStyle("bold"),n.text(50,260,"Tel:"),n.setFontStyle("normal"),n.text(100,260,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(200,260,"Fax:"),n.setFontStyle("normal"),n.text(250,260,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),n.setFontStyle("bold"),n.text(350,100,"Date:"),n.setFontStyle("normal"),n.text(410,100,e.format("DD/MMM/YYYY")),n.setFontStyle("bold"),n.text(350,115,"REF. No.:"),n.setFontStyle("normal"),n.text(410,115,t.code),n.setFontStyle("bold"),n.text(350,130,"Cust. ID:"),n.setFontStyle("normal"),n.text(410,130,t.salesOrder.shop.customer.code),n.setFontStyle("bold"),n.text(350,145,"Pay term:"),n.setFontStyle("normal"),n.text(410,145,""),n.setFontStyle("bold"),n.text(350,160,"Ship Date:"),n.setFontStyle("normal"),n.text(410,160,Dt()(t.invoice.shipmentDate).format("DD/MMM/YYYY")),n.setFontStyle("bold"),n.text(350,175,"Salesman:"),n.setFontStyle("normal"),n.text(410,175,""),n.setFontStyle("bold"),n.text(350,190,"Page:"),n.setFontStyle("normal"),n.text(410,190,a),n.setLineWidth(1.5),n.setDrawColor(0,0,0),n.line(50,270,r-50,270),n.line(50,290,r-50,290)},afterPageContent:function(){n.setFontSize(7),n.text(r-40,c-30,"Page - "+n.page),n.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},exDate:{columnWidth:80},qty:{columnWidth:40}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:270,bottom:100,horizontal:50}},o=Rr.a.groupBy(t.items,"product.code");Object.values(o).map((function(t){var a=t.reduce((function(t,a){var n=Dt()(t.item.expiryDate),r=Dt()(a.item.expiryDate);return Math.abs(r-e)<Math.abs(n-e)?a:t}));return a.qty=t.length,a})).map((function(e,t){var n={count:t+1,no:e.product.code,des:e.product.nameEn,qty:e.qty,exDate:Dt()(e.item.expiryDate).format("DD/MMM/YYYY")};a.push(n)})),console.log("data_json",a),n.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"exDate",header:"Expiry Date"},{dataKey:"qty",header:"Qty"}],a,l),n.setFontSize(10),n.setFontStyle("normal"),n.setFontSize(8),n.text(350,n.autoTable.previous.finalY+40,"RECEIVED THE ABOVE IN GOOD CONDITIONS :"),n.line(350,n.autoTable.previous.finalY+110,r-50,n.autoTable.previous.finalY+110),n.text(350,n.autoTable.previous.finalY+120,"COMPANY CHOP & AUTHORIZED SIGNATURE :"),n.setLineWidth(1.5),n.setDrawColor(0,0,0),n.line(50,n.autoTable.previous.finalY+6,r-50,n.autoTable.previous.finalY+6),n.line(50,n.autoTable.previous.finalY+21,r-50,n.autoTable.previous.finalY+21),"function"===typeof n.putTotalPages&&n.putTotalPages("{total_pages_count_string}"),n.save("Delivery Note.pdf")}};function Mr(){var e=Object(Pe.a)(["\n  query deliveryNote($where: DeliveryNoteWhereUniqueInput!) {\n    deliveryNote(where: $where) {\n      id\n      code\n      invoice {\n        shipmentDate\n      }\n      items {\n        product {\n          code\n          nameEn\n        }\n        item {\n          expiryDate\n        }\n      }\n      salesOrder {\n        shop {\n          phone\n          deliverAddress\n          nameEn\n          customer {\n            code\n            nameEn\n          }\n        }\n      }\n    }\n  }\n"]);return Mr=function(){return e},e}var Lr=we()(Mr()),qr=function(e){e.permissions;var t=Object(x.a)(e,["permissions"]),a=Object(j.e)(),n=Object(k.a)(),c=Object(de.g)();console.log("DeliveryNote Show",t);var l=function(e){return function(){console.log("record: ",e),c.push("/DeliveryItem/".concat(e.id,"/edit"),{record:e})}},o=function(e){return function(){console.log("record: ",e),c.push("/DeliveryItem/".concat(e.id,"/delete"),{record:e})}},i=Object(Ie.b)(Lr,{variables:{where:{id:t.id}}}),u=i.loading,s=i.data;s&&console.log("res",s.deliveryNote.salesOrder.state);var m=!0;return s&&(m=s&&"PAID"===s.deliveryNote.salesOrder.state),r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:4},r.a.createElement(A.a,{variant:"h6"},n("common.information"),"\xa0",m?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var e=t.id;c.push("/DeliveryNote/".concat(e,"/edit"))}},r.a.createElement(Dr.a,null),"\xa0",n("common.edit")),m?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:Wr(s),disabled:u},r.a.createElement(Cr.a,null),"\xa0",n("common.print"))),r.a.createElement(pn.a,Object.assign({title:"Delivery Note Details"},t),(function(e){e.record&&e.record.code;var t=e.record?e.record.id:"";return a(Ht([{url:"/DeliveryNote",label:"Delivery Note"},{url:"/DeliveryNote/".concat(t,"/show"),label:"Details"}])),r.a.createElement(En.a,e,r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{label:"Delivery No.",source:"code"}),r.a.createElement(Tt.a,{label:"Shipment Date",reference:"Invoice",source:"invoice.id"},r.a.createElement(jn.a,{source:"shipmentDate"})),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Customer"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Vn.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id",link:!1},(function(e){var t=e.referenceRecord;Object(x.a)(e,["referenceRecord"]);return r.a.createElement(Tt.a,{resource:"Customer",basePath:"/Customer",source:"shop.id",reference:"CustomerShop",record:t||{},link:"show"},r.a.createElement(Tt.a,{resource:"Customer",basePath:"/Customer",source:"customer.id",reference:"Customer",record:t||{},link:"show"},r.a.createElement(Ft.a,{source:"nameChi"})))}))))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Sales Order"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Sales Order No.",reference:"SalesOrder",source:"salesOrder.id",link:"show"},r.a.createElement(Ft.a,{source:"code"}))))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Invoice"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Invoice No.",reference:"Invoice",source:"invoice.id",link:"show"},r.a.createElement(Ft.a,{source:"code"})))))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:5,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Products"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Vn.a,{label:"Products",reference:"SalesOrder",source:"salesOrder.id",link:!1},(function(e){var t=e.referenceRecord;Object(x.a)(e,["referenceRecord"]);return r.a.createElement(Un.a,{basePath:"/SalesOrder",resource:"SalesOrderItem",reference:"SalesOrderItem",source:"productsIds",record:t||{},addLabel:!1},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product",link:function(e,t){return"/Product/".concat(e.product.id,"/show")}},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(Ft.a,{source:"quantity"})))})))))),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(A.a,{variant:"h6"},"Packing",m?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var e=t.id;console.log("deliveryNote id : ",e),c.push("/DeliveryItem/create",{record:{DeliveryNote:{id:e}}})}},r.a.createElement(Pr.a,null),"\xa0",n("common.create"))),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(jr.a,{reference:"DeliveryItem",target:"deliveryNote",addLabel:!1},r.a.createElement(kt.a,null,r.a.createElement(Ft.a,{label:"Box Num",source:"boxNum"}),r.a.createElement(Tt.a,{label:"Label",source:"item.id",reference:"InventoryItem",link:!1},r.a.createElement(Ft.a,{source:"label"})),r.a.createElement(Tt.a,{label:"ExpiryDate",source:"item.id",reference:"InventoryItem",link:!1},r.a.createElement(jn.a,{source:"expiryDate"})),r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(Be.a,{color:"primary",size:"small",onClick:l(e),disabled:m},r.a.createElement(Dr.a,null),"\xa0",n("common.edit"))}}),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(Be.a,{color:"primary",size:"small",onClick:o(e),disabled:m},r.a.createElement(Ir.a,null),"\xa0",n("common.delete"))}}))))))};function Yr(){var e=Object(Pe.a)(["\n  query customers($where: CustomerWhereInput) {\n    customers(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      wholesalePlan\n    }\n  }\n"]);return Yr=function(){return e},e}var Br=we()(Yr());function _r(e){var t=e.onChange,a=e.value,c=Object(k.a)(),l=Object(Ie.b)(Br,{variables:{state:"APPROVED"}}),i=l.loading,u=l.data,s=Object(n.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(n.useEffect)((function(){d||h([])}),[d]);var E=Object(n.useState)([]),f=Object(o.a)(E,2),b=f[0],h=f[1],g=i||d&&0===b.length;Object(n.useEffect)((function(){g&&u&&h(u.customers.map((function(e){return{id:e.id,name:e.nameChi}})))}),[g,u]);var v=Object(n.useState)(a),O=Object(o.a)(v,2),y=O[0],S=O[1];Object(n.useEffect)((function(){a&&S({id:a.id,name:a.nameChi})}),[a]);return r.a.createElement(Qe.a,{id:"purchase-order-autocomplete",open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,a){S(a),t(u.customers.find((function(e){return e.id===a.id})))},getOptionSelected:function(e,t){return e.id===t},getOptionLabel:function(e){return e.name},options:b,loading:g,value:y,renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:c("customer.customer"),fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,g?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var Hr=function(){return"/DeliveryNote"},Ur={url:"/DeliveryNote",label:"DeliveryNote"},Vr=function(e){console.log(e);var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{redirect:Hr},r.a.createElement(Nn.a,{label:"Invoice",source:"invoice.id",reference:"Invoice"},r.a.createElement(kn.a,{optionText:"code",label:"Invoice No."})),r.a.createElement(Tt.a,{label:"Sales Order",reference:"Invoice",source:"invoice.id"},r.a.createElement(Tt.a,{reference:"SalesOrder",source:"salesOrder.id"},r.a.createElement(Ft.a,{source:"code",label:"Sales Order No."}))),r.a.createElement(Tt.a,{label:"CustomerShop",reference:"SalesOrder",source:"salesOrder.id"},r.a.createElement(Tt.a,{reference:"CustomerShop",source:"shop.id",link:function(e,t){return"/CustomerShop/".concat(e.shop.id,"/show")}},r.a.createElement(Wt,{source:"name"}))),r.a.createElement(Tt.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id"},r.a.createElement(Tt.a,{source:"shop.id",reference:"CustomerShop"},r.a.createElement(Tt.a,{source:"customer.id",reference:"Customer",link:function(e,t){return"/Customer/".concat(e.customer.id,"/show")}},r.a.createElement(Wt,{source:"name"})))),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([Ur,{url:"/DeliveryNote/".concat(a.id),label:"Edit: ".concat(a.name)}])),null}))))},Kr=function(e){var t=e.record,a=e.props,n=(e.permissions,Object(Qt.a)("SalesOrder",t.salesOrder.id)),c=n.data,l=(n.loaded,!0);return c&&(l="PAID"===c.state),l?null:r.a.createElement("div",null,r.a.createElement(wt.a,{basePath:a.basePath,record:t}),r.a.createElement(dn.a,{basePath:a.basePath,record:t,resource:a.resource}))},$r=function(e){return Object(j.e)()(Ht([Ur])),console.log(e),r.a.createElement(Nt.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code"}),r.a.createElement(Tt.a,{label:"Sales Order",reference:"SalesOrder",source:"salesOrder.id",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Sales Order No."})),r.a.createElement(Tt.a,{label:"Invoice",reference:"Invoice",source:"invoice.id",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Invoice No."})),r.a.createElement(Tt.a,{label:"Customer",reference:"SalesOrder",source:"salesOrder.id"},r.a.createElement(Tt.a,{source:"shop.id",reference:"CustomerShop"},r.a.createElement(Tt.a,{source:"customer.id",reference:"Customer",link:function(e,t){return"/Customer/".concat(e.customer.id,"/show")}},r.a.createElement(Wt,{source:"name"})))),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(Rt.a,{render:function(t){return r.a.createElement(Kr,{record:t,props:e})}})))},zr=a(1361);function Gr(){var e=Object(Pe.a)(["\n    mutation updateDeliveryNote($data: DeliveryNoteUpdateInput!, $where: DeliveryNoteWhereUniqueInput!) {\n        updateDeliveryNote(data: $data, where: $where) {\n        id\n      }\n    }\n  "]);return Gr=function(){return e},e}var Qr=we()(Gr()),Jr=function(e){var t=Object(Gt.a)(),a=Object(Ie.a)(Qr),c=Object(o.a)(a,1)[0],l=Object(j.e)(),i=Object(de.g)(),u=Object(de.h)().state.record,s=Object(n.useState)(),m=Object(o.a)(s,2),d=m[0],p=m[1],E=function(e){return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:function(){c({variables:{where:{id:u.deliveryNote.id},data:{items:{update:{where:{id:u.id},data:{itemId:d.itemId,productId:d.id,boxNum:d.boxNum}}}}}}).then((function(e){console.log("res",e),t("Save Success."),h()})).catch((function(e){t("Error: ".concat(e.message),"warning")}))}}))},f=function(e){return r.a.createElement(_n.a,e,r.a.createElement(E,{label:"common.save",submitOnEnter:!1,variant:"text"}))},b=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)},h=function(){return i.go(-1)},g=function(e){d.itemId=e.id};return r.a.createElement(mn.a,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(Jt.a,{variant:"standard",redirect:h,toolbar:r.a.createElement(f,null)},r.a.createElement(Nn.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},r.a.createElement(zr.a,{disabled:!0,optionText:r.a.createElement(b,null),label:"DeliveryNote",inputText:function(e){return function(){return p(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,t){return!0},options:{style:{width:500}}})),d&&function(){var e={id:d.id,product:{id:d.id,code:d.code}};return r.a.createElement(Yt.a,{container:!0,direction:"column",style:{width:280}},r.a.createElement($n,{label:"Select lable"},r.a.createElement(tr,{onChange:g,placeholder:"Label",products:[e]})))}(),r.a.createElement($n,{label:"BoxNum"},r.a.createElement(Ge.a,{type:"number",onChange:function(e){d.boxNum=parseInt(e.target.value)},placeholder:"BoxNumber"})),r.a.createElement(Xt.a,null,(function(e){var t=e.formData;return l(Ut({url:"/DeliveryItem/".concat(t.id),label:"Edit"})),null}))))},Xr=a(1341);function Zr(){var e=Object(Pe.a)(["\n    mutation createDeliveryItem($data: DeliveryItemCreateInput!) {\n        createDeliveryItem(data: $data) {\n        id\n      }\n    }\n  "]);return Zr=function(){return e},e}var ec=we()(Zr()),tc=function(e){var t=Object(Ie.a)(ec),a=Object(o.a)(t,1)[0],c=Object(Ln.a)("DeliveryItem"),l=Object(o.a)(c,1)[0],i=Object(de.g)(),u=Object(Gt.a)(),s=Object(Hn.f)(),m=function(){return i.go(-1)},d=Object(n.useCallback)((function(){if(s.valid){var e=s.values,t=e.product,n=e.boxNum,r=e.DeliveryNote,c=e.itemId;e.label,Object(x.a)(e,["product","boxNum","DeliveryNote","itemId","label"]);a({variables:{data:{deliveryNote:{connect:{id:r.id}},productId:t.id,itemId:c,boxNum:n}}}).then((function(e){console.log("res",e),u("Save Success."),m()})).catch((function(e){u("Error: ".concat(e.message),"warning")}))}}),[s.valid,s.values,l,u,m]);return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:d}))},ac=function(e){return r.a.createElement(_n.a,e,r.a.createElement(tc,{label:"common.save",submitOnEnter:!1,variant:"text"}))};function nc(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1];Object(j.e)()(Ut({url:"/DeliveryItem/create",label:"Add New Delivery Item"}));var i=function(e){return function(t){e.itemId=t.id,e.label=t.label}},u=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)};return r.a.createElement(on.a,e,r.a.createElement(Jt.a,{toolbar:r.a.createElement(ac,null),variant:"standard"},r.a.createElement(Nn.a,{label:"DeliveryNote",source:"DeliveryNote.id",reference:"DeliveryNote"},r.a.createElement(kn.a,{disabled:!0,optionText:"id",label:"DeliveryNote No."})),r.a.createElement(Nn.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},r.a.createElement(zr.a,{optionText:r.a.createElement(u,null),label:"DeliveryNote",inputText:function(e){return function(){return l(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,t){return!0},options:{style:{width:500}}})),c&&r.a.createElement(Xt.a,null,(function(e){var t=e.formData;Object(x.a)(e,["formData"]),t.quantity=c.quantity,t.price=c.cost;var a={id:c.id,quantity:c.quantity,product:{id:c.id,code:c.code}};return r.a.createElement(Yt.a,{container:!0,direction:"column",style:{width:280}},r.a.createElement($n,{label:"Select lable"},r.a.createElement(tr,{onChange:i(t),placeholder:"Label",products:[a]})),r.a.createElement(Xr.a,{source:"boxNum",label:"boxNum"}))}))))}function rc(){var e=Object(Pe.a)(["\n  query salesOrders($where: SalesOrderWhereInput) {\n    salesOrders(where: $where, orderBy: updatedAt_DESC) {\n      id\n      code\n      shop {\n        id\n        code\n        nameEn\n        nameChi\n        deliveryDay\n        customer {\n          id\n          nameEn\n          nameChi\n        }\n      }\n      products {\n        id\n        quantity\n        price\n        totalPrice\n        product {\n          code\n          nameEn\n          nameChi\n        }\n      }\n      grandTotal\n      state\n    }\n  }\n"]);return rc=function(){return e},e}var cc=we()(rc());function lc(e){var t=e.onChange,a=e.defaultValue,n=e.where,c=void 0===n?{}:n,l=Object(k.a)();console.log("where",c);var i=Object(Ie.b)(cc,c),u=i.loading,s=i.data,m=r.a.useState(!1),d=Object(o.a)(m,2),p=d[0],E=d[1],f=r.a.useState([]),b=Object(o.a)(f,2),h=b[0],g=b[1],v=u||p&&0===h.length;r.a.useEffect((function(){if(v&&s){var e=s.salesOrders;g(e.filter((function(e){return!!e})).map((function(e){return{id:e.id,name:e.code}})))}}),[v,s]),r.a.useEffect((function(){p||g([])}),[p]);return r.a.createElement(Qe.a,{id:"sales-order-autocomplete",style:{width:300},open:p,onOpen:function(){E(!0)},onClose:function(){E(!1)},onChange:function(e,a){var n=s.salesOrders;t(n.filter((function(e){return!!e})).find((function(e){return e.id===a.id})))},getOptionLabel:function(e){return e.name},options:h,loading:v,value:a&&{id:a.id,name:a.code},renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:l("salesOrder.salesOrder"),fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,v?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var oc=function(e){var t=e.formData,a=e.setFormData,n=Object(k.a)();return r.a.createElement(Yt.a,{container:!0},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(lc,{where:{variables:{where:{state:"CONFIRMED"}}},onChange:function(e){a(Object(ze.a)({},t,{salesOrderCode:e.code,salesOrderId:e.id,totalPrice:e.grandTotal,contactPerson:e.contactPerson,customerShop:e.shop,salesOrder:e}))},defaultValue:t.salesOrder})),t.salesOrder&&function(){var e=t.salesOrder,a=e.products;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:"Shop"},e.shop.code),r.a.createElement($n,{label:n("salesOrder.customer")},e.shop.customer.nameChi)),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("salesOrder.totalPrice")},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}}))),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("salesOrder.state")},e.state)),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ne.a,{"aria-label":"simple table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,n("product.code")),r.a.createElement(Fe.a,null,n("product.name")),r.a.createElement(Fe.a,{align:"right"},n("shipping.quantityCheck")),r.a.createElement(Fe.a,{align:"right"},n("shipping.status")),r.a.createElement(Fe.a,{align:"right"},n("invoice.totalPrice")))),r.a.createElement(Ae.a,null,a.map((function(e,t){return r.a.createElement(Te.a,{key:e.id},r.a.createElement(Fe.a,null,e.product.code),r.a.createElement(Fe.a,{component:"th",scope:"row"},r.a.createElement(Wt,{source:"name",record:e.product})),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))}))))))}())};var ic=function(e){var t=e.formData,a=Object(k.a)(),n=t.salesOrder;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{variant:"h6",gutterBottom:!0},a("invoice.invoice")),r.a.createElement(Yt.a,{container:!0},r.a.createElement(Yt.a,{item:!0,xs:12,sm:4},r.a.createElement($n,{label:a("invoice.code")},t.code)),r.a.createElement(Yt.a,{item:!0,xs:12,sm:4},r.a.createElement($n,{label:a("invoice.customer")},r.a.createElement(Wt,{source:"name",record:n.shop.customer}))),r.a.createElement(Yt.a,{item:!0,xs:12,sm:4},r.a.createElement($n,{label:"Shop"},r.a.createElement(Wt,{source:"name",record:n.shop}))),r.a.createElement(Yt.a,{item:!0,xs:12,sm:4},r.a.createElement($n,{label:a("invoice.state")},t.state)),r.a.createElement(Yt.a,{item:!0,xs:12,sm:4},r.a.createElement($n,{label:a("invoice.salesOrderCode")},t.salesOrderCode)),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ne.a,{"aria-label":"spanning table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{align:"center",colSpan:3},"Details"),r.a.createElement(Fe.a,{align:"right"},"Price")),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,"Description"),r.a.createElement(Fe.a,{align:"right"},"Qty."),r.a.createElement(Fe.a,{align:"right"},"Unit"),r.a.createElement(Fe.a,{align:"right"},"Total/(HKD)"))),r.a.createElement(Ae.a,null,n.products&&n.products.map((function(e){return r.a.createElement(Te.a,{key:e.id},r.a.createElement(Fe.a,null,r.a.createElement(Wt,{source:"name",record:e.product})),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))})),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{colSpan:3},"Total"),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"totalPrice",record:t,options:{style:"currency",currency:"HKD"}}))))))))};var uc=function(e){var t,a=e.formData,c=e.setFormData,l=Object(k.a)(),o=Object(Ct.a)(),i=(o.loaded,o.permissions),u=Dt()(),s=a.salesOrder.shop.deliveryDay;if(!["admin"].includes(i)){(t=new Date).getHours()>=16&&(u=Dt()().add(1,"day").set("hour",9),t.setDate(t.getDate()+1));var m=s.filter((function(e){return u.day()<=e}));if(0==m.length){var d=s.map((function(e){return e+6+1}));u=Dt()().day(d[0])}else u=Dt()().day(m[0])}return Object(n.useEffect)((function(){c(Object(ze.a)({},a,{shipmentDate:u.toISOString()}))}),u),console.log(a.shipmentDate),r.a.createElement("form",{noValidate:!0},r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ot.a,{minDate:t,format:"ddd DD MMM YYYY",views:["year","month","date"],inputVariant:"filled",fullWidth:!0,value:a.shipmentDate?a.shipmentDate:u,label:l("invoice.shipmentDate"),onChange:function(e){return c(Object(ze.a)({},a,{shipmentDate:e.toISOString()}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:a.code,label:l("invoice.code"),onChange:function(e){return c(Object(ze.a)({},a,{code:e.target.value}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Jn.a,{variant:"filled",fullWidth:!0},r.a.createElement(Qn.a,{id:"form-state"},l("invoice.state")),r.a.createElement(Gn.a,{labelId:"state",label:"form-state",value:a.state||"APPROVED",onChange:function(e){return c(Object(ze.a)({},a,{state:e.target.value}))}},[{id:"DRAFT",name:l("common.draft")},{id:"APPROVED",name:l("common.approved")},{id:"CONFIRMED",name:l("common.confirmed")},{id:"DELETED",name:l("common.deleted")}].map((function(e){return r.a.createElement(zn.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})))))))};function sc(){var e=Object(Pe.a)(["\n  mutation createInvoice($data: InvoiceCreateInput!) {\n    createInvoice(data: $data) {\n      id\n      code\n    }\n  }\n"]);return sc=function(){return e},e}function mc(){var e=Object(Pe.a)(["\n  query getLastInvoice {\n    invoices(orderBy: createdAt_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return mc=function(){return e},e}var dc=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),pc=we()(mc()),Ec=we()(sc()),fc=function(){var e=Object(j.e)(),t=Object(k.a)(),a=dc(),c=Object(de.g)(),l=Object(Ie.a)(Ec),i=Object(o.a)(l,1)[0],u=Object(n.useState)(0),s=Object(o.a)(u,2),m=s[0],d=s[1],p=Object(n.useState)({code:"IV001",salesOrderCode:"",salesOrderId:"",salesOrder:null,contactPerson:"",totalPrice:0,state:"CONFIRMED"}),E=Object(o.a)(p,2),f=E[0],b=E[1];e(Ht([{url:"/Invoice",label:"Invoice"},{url:"/Invoice/create",label:"Create New"}]));var h=Object(Ie.b)(pc).data;Object(n.useEffect)((function(){if(h&&h.invoices.length>0&&"IV001"===f.code){var e=h.invoices[0];b(Object(ze.a)({},f,{code:ra(e.code)}))}}),[h,f]);var g=[t("invoice.selectSalesOrder"),t("invoice.invoiceDetails"),t("invoice.review")],v=Object(Gt.a)();return r.a.createElement("main",{className:a.layout},r.a.createElement(Re.a,{className:a.paper},r.a.createElement(_e.a,{activeStep:m,className:a.stepper},g.map((function(e){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Ke.a,null,e))}))),r.a.createElement(r.a.Fragment,null,0===m&&r.a.createElement(oc,{formData:f,setFormData:b}),1===m&&r.a.createElement(uc,{formData:f,setFormData:b}),2===m&&r.a.createElement(ic,{formData:f}),r.a.createElement("div",{className:a.buttons},m>0&&r.a.createElement(Be.a,{onClick:function(){d(m-1)},color:"primary"},t("common.prev")),m<g.length-1&&r.a.createElement(Be.a,{onClick:function(){""===f.salesOrderId||""===f.code?v("Error : Please fill all field.","warning"):d(m+1)},color:"primary"},t("common.next")),m===g.length-1&&r.a.createElement(Be.a,{onClick:function(){var e={code:f.code,salesOrderId:f.salesOrderId,totalPrice:f.totalPrice,shipmentDate:f.shipmentDate,state:f.state,paymentStatus:"UNPAID"};i({variables:{data:e}}).then((function(){c.push("/Invoice")})).catch((function(e){v("Error: ".concat(e.message),"warning")}))},color:"primary"},t("common.confirm"))))))},bc=function(e){return function(){var t=e.invoice;console.log("invoice",t);var a=Dt()(),n=new kr.a("EN_US"),r=[],c=new wr.a("p","pt");c.page=1;var l=c.internal.pageSize.getWidth(),o=c.internal.pageSize.getHeight(),i={beforePageContent:function(){var e=c.internal.getNumberOfPages().toString();"function"===typeof c.putTotalPages&&(e+=" of {total_pages_count_string}"),c.setFontSize(23),c.setFontStyle("bold"),c.text(l-150,50,"INVOICE"),c.setFontSize(10),c.setFontStyle("bold"),c.text(50,100,"Bill To:"),c.setFontStyle("normal"),c.text(100,100,t.salesOrder.shop.nameEn),c.text(100,115,t.salesOrder.shop.deliverAddress),c.text(100,130,""),c.text(100,145,""),c.setFontStyle("bold"),c.text(50,165,"Attn:"),c.setFontStyle("normal"),c.text(100,165,t.salesOrder.shop.customer.nameEn),c.setFontStyle("bold"),c.text(50,180,"Tel:"),c.setFontStyle("normal"),c.text(100,180,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),c.setFontStyle("bold"),c.text(200,180,"Fax:"),c.setFontStyle("normal"),c.text(250,180,t.salesOrder.shop.phone?t.salesOrder.shop.phone.toString():""),c.setFontStyle("bold"),c.text(350,100,"Date:"),c.setFontStyle("normal"),c.text(410,100,a.format("DD/MMM/YYYY")),c.setFontStyle("bold"),c.text(350,115,"REF. No.:"),c.setFontStyle("normal"),c.text(410,115,t.code),c.setFontStyle("bold"),c.text(350,130,"Cust. ID:"),c.setFontStyle("normal"),c.text(410,130,t.salesOrder.shop.customer.code),c.setFontStyle("bold"),c.text(350,145,"Pay term:"),c.setFontStyle("normal"),c.text(410,145,""),c.setFontStyle("bold"),c.text(350,160,"Ship Date:"),c.setFontStyle("normal"),c.text(410,160,Dt()(t.shipmentDate).format("DD/MMM/YYYY")),c.setFontStyle("bold"),c.text(350,175,"Salesman:"),c.setFontStyle("normal"),c.text(410,175,""),c.setFontStyle("bold"),c.text(350,190,"Page:"),c.setFontStyle("normal"),c.text(410,190,e),c.setLineWidth(1.5),c.setDrawColor(0,0,0),c.line(50,200,l-50,200),c.line(50,220,l-50,220)},afterPageContent:function(){c.setFontSize(7),c.text(l-40,o-30,"Page - "+c.page),c.page++},theme:"striped",columnStyles:{count:{columnWidth:30},no:{columnWidth:70},des:{columnWidth:270},qty:{columnWidth:30},price:{columnWidth:40},amount:{columnWidth:50,halign:"right"}},headStyles:{fillColor:!1,textColor:"black"},style:{cellWidth:"auto"},margin:{top:200,bottom:100,horizontal:50}};if(t.salesOrder.products.map((function(e,t){var a={count:t+1,no:e.product.code,des:e.product.nameEn,qty:e.quantity,price:e.price,amount:e.totalPrice};r.push(a)})),c.autoTable([{dataKey:"count",header:"Item"},{dataKey:"no",header:"Product No"},{dataKey:"des",header:"Description"},{dataKey:"qty",header:"Qty"},{dataKey:"price",header:"Price"},{dataKey:"amount",header:"Amount"}],r,i),c.setFontSize(10),c.setFontStyle("normal"),c.text(412,c.autoTable.previous.finalY+12,"Sub-total :"),c.text(l-53-5*t.salesOrder.subtotal.toFixed(1).toString().length,c.autoTable.previous.finalY+12,t.salesOrder.subtotal.toFixed(1).toString()),c.text(376,c.autoTable.previous.finalY+27,"Discount Amount :"),c.text(l-47-5*(t.salesOrder.discountAmount.toFixed(1).toString().length+1),c.autoTable.previous.finalY+27,t.salesOrder.discountAmount.toFixed(1).toString()),c.text(400,c.autoTable.previous.finalY+47,"Grand Total :"),c.text(l-53-5*t.salesOrder.grandTotal.toFixed(1).toString().length,c.autoTable.previous.finalY+47,t.salesOrder.grandTotal.toFixed(1).toString()),t.salesOrder.grandTotal===parseInt(t.salesOrder.grandTotal,10))c.text(50,c.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+Tr(n.toWords(t.salesOrder.grandTotal))+" ONLY.");else{var u=t.salesOrder.grandTotal.toFixed(1).toString().split(".");c.text(50,c.autoTable.previous.finalY+70,"Say: Hong Kong Dollar "+Tr(n.toWords(parseInt(u[0])))+" And "+Tr(n.toWords(parseInt(10*u[1])))+" CENTS ONLY.")}c.setFontStyle("bold"),c.text(50,c.autoTable.previous.finalY+87,"Shipterm :"),c.setFontStyle("normal"),c.text(100,c.autoTable.previous.finalY+87,"Standard Delivery"),c.setLineWidth(1),c.setDrawColor(0,0,0),c.line(455,c.autoTable.previous.finalY,l-50,c.autoTable.previous.finalY),c.line(455,c.autoTable.previous.finalY+33,l-50,c.autoTable.previous.finalY+33),c.line(455,c.autoTable.previous.finalY+50,l-50,c.autoTable.previous.finalY+50),c.line(455,c.autoTable.previous.finalY+52,l-50,c.autoTable.previous.finalY+52),c.setLineWidth(1.5),c.setDrawColor(0,0,0),c.line(50,c.autoTable.previous.finalY+76,l-50,c.autoTable.previous.finalY+76),c.line(50,c.autoTable.previous.finalY+91,l-50,c.autoTable.previous.finalY+91),c.setFillColor(255,255,255),c.rect(90,c.autoTable.previous.finalY+110,430,150,"FD"),c.setFontStyle("bold"),c.text(280,c.autoTable.previous.finalY+128,"REMARK"),c.setLineWidth(1),c.line(100,c.autoTable.previous.finalY+134,510,c.autoTable.previous.finalY+134),c.line(100,c.autoTable.previous.finalY+248,510,c.autoTable.previous.finalY+248),c.text(100,c.autoTable.previous.finalY+145,"Payment Method: Cheque or Bank-In"),c.text(100,c.autoTable.previous.finalY+157,"Account Name: Petgo Trading Limited"),c.text(100,c.autoTable.previous.finalY+169,"Account No.: 741-149611-838"),c.text(100,c.autoTable.previous.finalY+181,"Bank Name: HSBC Hong Kong Bank Code: 004"),c.text(100,c.autoTable.previous.finalY+193,"SWIFT: HSBCHKHHHKH"),c.text(100,c.autoTable.previous.finalY+205,"*For Cheques, please write your Invoice No. on the back of the cheque."),c.text(100,c.autoTable.previous.finalY+217,"*For Bank-In, please provide the Bank-In Slip to Petgo Trading Limited."),c.text(100,c.autoTable.previous.finalY+229,"Cash"),c.text(100,c.autoTable.previous.finalY+241,"Cash On Delivery."),"function"===typeof c.putTotalPages&&c.putTotalPages("{total_pages_count_string}"),c.save("InvoiceGen.pdf")}};function hc(){var e=Object(Pe.a)(["\n  query invoice($where: InvoiceWhereUniqueInput!) {\n    invoice(where: $where) {\n      id\n      code\n      salesOrder {\n        id\n        code\n        title\n        remark\n        discountAmount\n        grandTotal\n        subtotal\n        state\n        userId\n        shop {\n          nameEn\n          deliverAddress\n          phone\n          customer {\n            id\n            code\n            nameEn\n          }\n        }\n        products {\n          id\n          totalPrice\n          product {\n            nameEn\n            id\n            code\n          }\n          price\n          quantity\n        }\n        createdAt\n        updatedAt\n      }\n      userId\n      state\n      paymentStatus\n      totalPrice\n      title\n      remark\n      shipmentDate\n      createdAt\n      updatedAt\n      paidAt\n    }\n  }\n"]);return hc=function(){return e},e}var gc=we()(hc()),vc=function(e){var t=Object(j.e)(),a=Object(k.a)(),n=Object(de.g)(),c=Object(Ie.b)(gc,{variables:{where:{id:e.id}}}),l=c.loading,o=c.data,i=o&&o.invoice.code,u=o&&o.invoice.id,s=!0;return o&&(s="PAID"===o.invoice.salesOrder.state),t(Ht([{url:"/Invoice",label:"Invoice"},{url:"/Invoice/".concat(u,"/show"),label:i}])),r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:9},r.a.createElement(A.a,{variant:"h6"},"Basic Information\xa0",s?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var t=e.basePath,a=e.id;n.push("".concat(t,"/").concat(a,"/edit"))}},r.a.createElement(Dr.a,null),"\xa0",a("common.edit")),r.a.createElement(Be.a,{color:"primary",size:"small",onClick:bc(o),disabled:l},r.a.createElement(Cr.a,null),"\xa0",a("common.print"))),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null),x:!0},e),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"code",label:"Invoice No."}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Total Price"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Shipment Date"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(jn.a,{source:"shipmentDate"})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Sales Order"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Sales Order",reference:"SalesOrder",source:"salesOrder.id",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Sales Order No."})))))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:12,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Items"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(Tt.a,{label:"Products",reference:"SalesOrder",source:"salesOrder.id"},r.a.createElement(Un.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{source:"price",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))))},Oc=function(){return"/Invoice"},yc={url:"/Invoice",label:"Invoice"},Sc=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{redirect:Oc},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Invoice No."}),r.a.createElement(Tn.a,{source:"shipmentDate"}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([yc,{url:"/Invoice/".concat(a.id),label:"Edit: ".concat(a.code)}])),null}))))},jc=function(e){var t=e.record,a=e.props,n=(e.permissions,Object(Qt.a)("SalesOrder",t.salesOrder.id)),c=n.data,l=(n.loaded,!0);return c&&(l="PAID"===c.state),l?null:r.a.createElement("div",null,r.a.createElement(wt.a,{basePath:a.basePath,record:t}),r.a.createElement(dn.a,{basePath:a.basePath,record:t,resource:a.resource}))},Dc=function(e){return Object(j.e)()(Ht([yc])),r.a.createElement(Nt.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code",label:"Invoice No."}),r.a.createElement(jn.a,{source:"shipmentDate"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(Rt.a,{render:function(t){return r.a.createElement(jc,{record:t,props:e})}})))},Cc=a(1343),Pc=a(1376);var Ic=function(e){var t=e.onSort,a=Object(k.a)(),c=Object(n.useState)("id"),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],E=function(e){return function(){e===i?p(!d):(u(e),p(!1)),t("".concat(i,"_").concat(d?"DESC":"ASC"))}};return r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null),r.a.createElement(Fe.a,null,r.a.createElement(Pc.a,{active:"code"===i,direction:d?"desc":"asc",onClick:E("code")},a("product.code"))),r.a.createElement(Fe.a,null,r.a.createElement(Pc.a,{active:"nameEn"===i,direction:d?"desc":"asc",onClick:E("nameEn")},a("product.name"))),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Pc.a,{active:"quantity"===i,direction:d?"desc":"asc",onClick:E("quantity")},a("inventory.stock")))))},xc=a(1308),wc=a(1375),Nc=a(51),kc=a(553),Tc=a.n(kc),Fc=a(555),Ac=a.n(Fc),Rc=a(554),Wc=a.n(Rc),Mc=a(552),Lc=a.n(Mc),qc=Object(D.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));var Yc=function(e){var t=qc(),a=Object(Nc.a)(),n=e.count,c=e.page,l=e.rowsPerPage,o=e.onChangePage;return r.a.createElement("div",{className:t.root},r.a.createElement(L.a,{onClick:function(e){o(e,0)},disabled:0===c,"aria-label":"first page"},"rtl"===a.direction?r.a.createElement(Lc.a,null):r.a.createElement(Tc.a,null)),r.a.createElement(L.a,{onClick:function(e){o(e,c-1)},disabled:0===c,"aria-label":"previous page"},"rtl"===a.direction?r.a.createElement(Wc.a,null):r.a.createElement(Ac.a,null)),r.a.createElement(L.a,{onClick:function(e){o(e,c+1)},disabled:c>=Math.ceil(n/l)-1,"aria-label":"next page"},"rtl"===a.direction?r.a.createElement(Ac.a,null):r.a.createElement(Wc.a,null)),r.a.createElement(L.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(n/l)-1))},disabled:c>=Math.ceil(n/l)-1,"aria-label":"last page"},"rtl"===a.direction?r.a.createElement(Tc.a,null):r.a.createElement(Lc.a,null)))};var Bc=function(e){var t=e.totalRows,a=e.page,n=e.rowsPerPage,c=e.setPage,l=e.setRowsPerPage;return r.a.createElement(xc.a,null,r.a.createElement(Te.a,null,r.a.createElement(wc.a,{rowsPerPageOptions:[10,25,50],colSpan:4,count:t,rowsPerPage:n,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){c(t)},onChangeRowsPerPage:function(e){l(parseInt(e.target.value,10)),c(0)},ActionsComponent:Yc})))},_c=a(811),Hc=a(1342),Uc=a(1302);function Vc(){var e=Object(Pe.a)(["\n  query getCategories {\n    productCategories {\n      id\n      nameEn\n      nameChi\n    }\n  }\n"]);return Vc=function(){return e},e}var Kc=we()(Vc()),$c=Object(D.a)((function(e){return{toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},title:{flex:1},input:{marginLeft:e.spacing(1)},iconButton:{padding:10},divider:{height:28,margin:4},chips:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}));var zc=function(e){var t=e.where,a=e.setWhere,c=Object(k.a)(),l=$c(),i=Object(n.useState)(""),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),E=p[0],f=p[1],b=Object(n.useState)(null),h=Object(o.a)(b,2),g=(h[0],h[1],Object(n.useState)([])),v=Object(o.a)(g,2),O=v[0],y=v[1],S=Object(n.useState)([]),j=Object(o.a)(S,2),D=j[0],C=j[1],P=Object(Ie.b)(Kc).data,I=P?P.productCategories:[];return Object(n.useEffect)((function(){t.code_starts_with&&f(t.code_starts_with)}),[t]),Object(n.useEffect)((function(){var e={};E&&(e.code_starts_with=E),a(e)}),[E,O,D,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{className:l.toolbar},r.a.createElement(A.a,{className:l.title,variant:"h6",id:"tableTitle"},c("salesOrder.selectProducts")),r.a.createElement(Uc.a,{className:l.divider,orientation:"vertical"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f(s),m("")}},r.a.createElement(_c.a,{className:l.input,value:s,onChange:function(e){m(e.target.value)},placeholder:"".concat(c("common.search")," ").concat(c("salesOrder.productCode")),inputProps:{"aria-label":"".concat(c("common.search")," ").concat(c("salesOrder.productCode"))}}),r.a.createElement(L.a,{type:"submit",className:l.iconButton,"aria-label":"search"},r.a.createElement(Hc.a,null)))),r.a.createElement("div",{className:l.chips},E&&r.a.createElement(ir.a,{label:E,onDelete:function(){f(null)}}),D.map((function(e){return r.a.createElement(ir.a,{key:"product.".concat(e),label:c("product.".concat(e)),onDelete:(t=e,function(){D.includes(t)?(D.splice(D.indexOf(t),1),C(Object(Ee.a)(D))):C([].concat(Object(Ee.a)(D),[t]))})});var t})),O.map((function(e){return r.a.createElement(ir.a,{key:"product.".concat(e),label:I.find((function(t){return t.id===e})).nameEn,onDelete:(t=e,function(){O.includes(t)?(O.splice(O.indexOf(t),1),y(Object(Ee.a)(O))):y([].concat(Object(Ee.a)(O),[t]))})});var t}))))},Gc=a(1246),Qc=a(1251),Jc=a(1249),Xc=a(1248),Zc=a(1297);var el=function(e){var t=e.onSubmit,a=e.onCancel,c=e.product,l=e.open,i=e.customer,u=Object(k.a)(),s=Object(n.useState)(l),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(n.useEffect)((function(){p(l)}),[l]);var E=Object(n.useState)({product:c}),f=Object(o.a)(E,2),b=f[0],h=f[1],g=[b.wholeSalePrice1,b.wholeSalePrice2,b.wholeSalePrice3,b.wholeSalePrice4,b.wholeSalePrice5];if(c&&c.discount&&g.length>0)if(c.discount.includes("%")){var v=parseFloat(c.discount)/100;g=g.map((function(e){return e*v}))}else if(c.discount.includes("HKD")){var O=parseFloat(c.discount.replace("HKD",""));g=g.map((function(e){return e-O}))}Object(n.useEffect)((function(){if(c&&i){var e=[c.wholeSalePrice1,c.wholeSalePrice2,c.wholeSalePrice3,c.wholeSalePrice4,c.wholeSalePrice5];if(c&&c.discount&&e.length>0)if(c.discount.includes("%")){var t=1-parseFloat(c.discount)/100;e=e.map((function(e){return e*t}))}else if(c.discount.includes("HKD")){var a=parseFloat(c.discount.replace("HKD",""));e=e.map((function(e){return e-a}))}h(Object(ze.a)({},c,{quantity:parseInt(c.minOrderQuantity,10),price:parseFloat(e[i.wholesalePlan-1])}))}}),[c]);var y=Object(n.useState)(i.wholesalePlan),S=Object(o.a)(y,2),j=S[0],D=S[1],C=function(){a(),p(!1)},P=function(e,t){return function(){D(t+1),h(Object(ze.a)({},b,{price:e}))}};return r.a.createElement(Gc.a,{open:d,onClose:C,"aria-labelledby":"form-dialog-title"},r.a.createElement(Qc.a,{id:"form-dialog-title"},u("salesOrder.editSalesOrder")),r.a.createElement(Jc.a,null,r.a.createElement("form",{noValidate:!0},r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12},c&&c.code),r.a.createElement(Yt.a,{item:!0,xs:12},c&&c.nameChi),r.a.createElement(Yt.a,{item:!0,xs:12},c&&c.nameEn),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ge.a,{error:c&&b.quantity>c.quantity,helperText:c&&b.quantity>c.quantity?"Over Order":"",id:"quantity",label:u("product.quantity"),type:"number",InputLabelProps:{shrink:!0},variant:c&&b.quantity>c.quantity?"outlined":"filled",value:b.quantity,onChange:function(e){return h(Object(ze.a)({},b,{quantity:parseInt(e.currentTarget.value,10)}))}})),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ge.a,{id:"price",label:u("product.price"),type:"number",InputLabelProps:{shrink:!0},variant:"filled",value:b.price,onChange:function(e){return h(Object(ze.a)({},b,{price:e.currentTarget.value}))}}),r.a.createElement(Zc.a,null,g.map((function(e,t){return r.a.createElement(Be.a,{onClick:P(e,t),color:j==t+1?"secondary":void 0,variant:"contained"},u("product.wholeSalePrice"),t+1)}))))))),r.a.createElement(Xc.a,null,r.a.createElement(Be.a,{onClick:C,color:"primary"},u("common.cancel")),r.a.createElement(Be.a,{onClick:function(){h(Object(ze.a)({},b,{price:parseFloat(b.price).toFixed(2)})),t(b),C()},color:"primary",disabled:c&&b.quantity&&b.quantity>c.quantity},u("common.save"))))};function tl(){var e=Object(Pe.a)(["\n  query getProducts(\n    $where: ProductWhereInput\n    $orderBy: ProductOrderByInput\n    $first: Int\n    $skip: Int\n  ) {\n    productsConnection(\n      where: $where\n      orderBy: $orderBy\n      skip: $skip\n      first: $first\n    ) {\n      edges {\n        node {\n          id\n          code\n          nameChi\n          nameEn\n          minOrderQuantity\n          minStockLevel\n          quantity\n          discount\n          cost\n          wholeSalePrice1\n          wholeSalePrice2\n          wholeSalePrice3\n          wholeSalePrice4\n          wholeSalePrice5\n        }\n      }\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return tl=function(){return e},e}var al=we()(tl()),nl=Object(D.a)((function(e){return{root:{width:"100%"},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},paper:{width:"100%",marginBottom:e.spacing(2)},table:{},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},image:{width:60,height:60},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}));var rl=function(e){var t=e.selected,a=e.onSelected,c=e.customer,l=nl(),i=Object(n.useState)({}),u=Object(o.a)(i,2),s=u[0],m=u[1],d=Object(n.useState)(0),p=Object(o.a)(d,2),E=p[0],f=p[1],b=Object(n.useState)("id_ASC"),h=Object(o.a)(b,2),g=h[0],v=h[1],O=Object(n.useState)(10),y=Object(o.a)(O,2),S=y[0],j=y[1],D=Object(n.useState)(null),C=Object(o.a)(D,2),P=C[0],I=C[1],x=Object(Ie.b)(al,{variables:{where:s,orderBy:g,first:S,skip:E*S}}),w=x.loading,N=x.error,k=x.data;if(N)return r.a.createElement("div",null,"Error");if(!k&&w)return r.a.createElement("div",null,"loading...");var T=k.productsConnection.edges.map((function(e){return e.node})),F=k.productsConnection.aggregate.count,R=S-Math.min(S,F-E*S),W=t.map((function(e){return e.id})),M=function(e,t){a(e,t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(zc,{where:s,setWhere:m}),r.a.createElement(Ne.a,{className:l.table,"aria-label":"custom pagination table"},r.a.createElement(Ic,{onSort:v}),r.a.createElement(Ae.a,null,T.map((function(e){return r.a.createElement(Te.a,{key:e.id},r.a.createElement(Fe.a,null,r.a.createElement(L.a,{onClick:(t=e,function(){var e=!W.includes(t.id);e?I(t):M(t,e)})},W.includes(e.id)?r.a.createElement(Cc.a,null):r.a.createElement(Pr.a,null))),r.a.createElement(Fe.a,null,e.code),r.a.createElement(Fe.a,{component:"th",scope:"row"},r.a.createElement(Yt.a,{container:!0,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0,xs:!0},r.a.createElement(A.a,{variant:"subtitle1",gutterBottom:!0},e.nameChi),r.a.createElement(A.a,{variant:"body2",gutterBottom:!0},e.nameEn)))),r.a.createElement(Fe.a,{align:"right"},parseInt(e.quantity,10)));var t})),R>0&&r.a.createElement(Te.a,{style:{height:53*R}},r.a.createElement(Fe.a,{colSpan:6}))),r.a.createElement(Bc,{totalRows:F,rowsPerPage:S,page:E,setPage:f,setRowsPerPage:j})),r.a.createElement(el,{product:P,open:!!P,onSubmit:function(e){M(e,!0),I(null)},onCancel:function(){I(null)},customer:c}))};function cl(){var e=Object(Pe.a)(["\n  query customer($where: CustomerWhereUniqueInput!) {\n    customer(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      shops {\n        id\n        code\n        nameChi\n        nameEn\n      }\n    }\n  }\n"]);return cl=function(){return e},e}we()(cl());function ll(){var e=Object(Pe.a)(["\n  query customer($where: CustomerWhereUniqueInput!) {\n    customer(where: $where) {\n      code\n      id\n      nameEn\n      nameChi\n      shops {\n        id\n        code\n        nameChi\n        nameEn\n      }\n    }\n  }\n"]);return ll=function(){return e},e}var ol=we()(ll());var il=function(e){var t=e.formData,a=e.setFormData,c=Object(k.a)(),l=Object(n.useState)(),i=Object(o.a)(l,2),u=i[0],s=i[1],m=Object(Ie.b)(ol,{variables:{where:{id:t.customer&&t.customer.id}}}),d=m.loading,p=m.data;return Object(n.useEffect)((function(){p&&(s(p.customer.shops),console.log(p))})),r.a.createElement("form",{noValidate:!0},r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(_r,{variant:"filled",fullWidth:!0,value:t.customer,label:c("salesOrder.code"),onChange:function(e){a(Object(ze.a)({},t,{customer:e}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Qe.a,{id:"customer-shops",options:u,getOptionLabel:function(e){return e.nameEn},renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:"CustomerShop",fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,d?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},onChange:function(e,n){console.log(n),a(Object(ze.a)({},t,{customerShop:n}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:t.code,label:c("salesOrder.code"),onChange:function(e){return a(Object(ze.a)({},t,{code:e.target.value}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Jn.a,{variant:"filled",fullWidth:!0},r.a.createElement(Qn.a,{id:"form-state"},c("salesOrder.state")),r.a.createElement(Gn.a,{labelId:"state",label:"form-state",value:t.state||"RECEIVED",onChange:function(e){return a(Object(ze.a)({},t,{state:e.target.value}))},disabled:!0},[{id:"RECEIVED",name:c("common.received")}].map((function(e){return r.a.createElement(zn.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})))))))},ul=be()((function(e){return{label:{fontWeight:"bold",textAlign:"right",paddingRight:e.spacing(2)}}}));var sl=function(e){var t=e.formData,a=Object(k.a)(),n=ul();console.log("formdata: ",t);var c=t.products.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{variant:"h6",gutterBottom:!0},a("salesOrder.salesOrderDetails")),r.a.createElement(Yt.a,{container:!0},r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:n.label},a("salesOrder.code"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.code)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:n.label},a("salesOrder.customer"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.customer.nameChi)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:n.label},a("salesOrder.expectedDeliveryAt"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},Dt()(t.expectedDeliveryAt).format("YYYY-MM-DD")+"(YYYY-MM-DD)")),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:n.label},"CustomerShop")),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.customerShop.nameEn)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:n.label},a("salesOrder.state"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.state)),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ne.a,{"aria-label":"spanning table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{align:"center",colSpan:4},"Details"),r.a.createElement(Fe.a,{align:"right"},"Price")),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{align:"right"},"Product no."),r.a.createElement(Fe.a,null,"Description"),r.a.createElement(Fe.a,{align:"right"},"Qty."),r.a.createElement(Fe.a,{align:"right"},"Unit"),r.a.createElement(Fe.a,{align:"right"},"Total/(HK$)"))),r.a.createElement(Ae.a,null,t.products&&t.products.map((function(e){var t=(e.quantity*e.price).toFixed(2);return r.a.createElement(Te.a,{key:e.id},r.a.createElement(Fe.a,{align:"center"},e.code),r.a.createElement(Fe.a,null,r.a.createElement(Wt,{source:"name",record:e})),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"subTotal",record:{subTotal:t},options:{style:"currency",currency:"HKD"}})))})),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{colSpan:4},"Total"),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"grandTotal",record:{grandTotal:c},options:{style:"currency",currency:"HKD"}}))))))))},ml=a(1296),dl=a(1344);function pl(){var e=Object(Pe.a)(["\n  query getFirstCustomer {\n    customers(first: 1) {\n      code\n      id\n      nameEn\n      nameChi\n      wholesalePlan\n    }\n  }\n"]);return pl=function(){return e},e}function El(){var e=Object(Pe.a)(["\n  query getLastSalesOrder {\n    salesOrders(orderBy: createdAt_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return El=function(){return e},e}function fl(){var e=Object(Pe.a)(["\n  mutation createSalesOrder($data: SalesOrderCreateInput!) {\n    createSalesOrder(data: $data) {\n      id\n      code\n    }\n  }\n"]);return fl=function(){return e},e}var bl=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),hl=we()(fl()),gl=we()(El()),vl=we()(pl()),Ol=function(){var e=Object(j.e)(),t=Object(k.a)(),a=bl(),c=Object(de.g)(),l=Object(Gt.a)(),i=Object(Ie.a)(hl),u=Object(o.a)(i,1)[0],s=Object(n.useState)(0),m=Object(o.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)({code:"",customer:null,products:[],state:"RECEIVED",customerShop:null}),f=Object(o.a)(E,2),b=f[0],h=f[1];e(Ht([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/create",label:"Create New"}]));var g=Object(Ie.b)(gl),v=g.loading,O=g.data;Object(n.useEffect)((function(){if(O&&O.salesOrders.length>0&&""===b.code){var e=O.salesOrders[0];h(Object(ze.a)({},b,{code:ra(e.code)}))}}),[O,b]);var y=Object(Ie.b)(vl),S=y.loading,D=y.data;if(Object(n.useEffect)((function(){if(D&&D.customers.length>0&&!b.customer){var e=D.customers[0];h(Object(ze.a)({},b,{customer:e}))}}),[D,b]),v||S)return"<div>Loading...</div>";var C=[t("salesOrder.salesOrderDetails"),t("salesOrder.selectProducts"),t("salesOrder.review")];return r.a.createElement("main",{className:a.layout},r.a.createElement(Re.a,{className:a.paper},r.a.createElement(A.a,{component:"h1",variant:"h4",align:"center"},t("salesOrder.createSalesOrder"),r.a.createElement(ml.a,{style:{float:"right"},badgeContent:b.products.length,color:"primary"},r.a.createElement(dl.a,null))),r.a.createElement(_e.a,{activeStep:d,className:a.stepper},C.map((function(e){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Ke.a,null,e))}))),r.a.createElement(r.a.Fragment,null,0===d&&r.a.createElement(il,{formData:b,setFormData:h}),1===d&&r.a.createElement(rl,{selected:b.products,onSelected:function(e,t){var a=b.products.map((function(e){return e.id}));t?a.includes(e.id)||h(Object(ze.a)({},b,{products:[].concat(Object(Ee.a)(b.products),[e])})):a.includes(e.id)&&(b.products.splice(a.indexOf(e.id),1),h(Object(ze.a)({},b,{products:b.products})))},customer:b.customer}),2===d&&r.a.createElement(sl,{formData:b}),r.a.createElement("div",{className:a.buttons},d>0&&r.a.createElement(Be.a,{onClick:function(){p(d-1)},color:"primary"},t("common.prev")),d<2&&r.a.createElement(Be.a,{onClick:function(){p(d+1)},color:"primary"},t("common.next")),2===d&&r.a.createElement(Be.a,{onClick:function(){var e=b.products.reduce((function(e,t){return e+parseFloat(t.price)*t.quantity}),0),t=b.products.reduce((function(e,t){if(!t.discount)return e+parseFloat(t.price)*t.quantity;if(t.discount.includes("%")){var a=1-parseFloat(t.discount)/100;return e+parseFloat(t.price)/a*t.quantity}if(t.discount.includes("HKD")){var n=parseFloat(t.discount.replace("HKD",""));return e+(parseFloat(t.price)+n)*t.quantity}}),0),a={code:b.code,grandTotal:e,subtotal:t,discountAmount:t-e,state:b.state,shopId:b.customerShop.id,products:{create:b.products.map((function(e){return{productId:e.id,quantity:parseInt(e.quantity,10),price:parseFloat(e.price),totalPrice:parseFloat(e.quantity)*parseFloat(e.price)}}))}};u({variables:{data:a}}).then((function(){c.push("/SalesOrder")})).catch((function(e){l("Error: ".concat(e.message),"warning")}))},color:"primary"},t("common.confirm"))))))};function yl(){var e=Object(Pe.a)(["\n  query salesOrder($where: SalesOrderWhereUniqueInput!) {\n    salesOrder(where: $where) {\n      id\n      code\n      subtotal\n      grandTotal\n      discountAmount\n      state\n      shippingDate\n      shop {\n        phone\n        nameEn\n        deliverAddress\n        customer {\n          code\n          billingAddress\n          mobile\n          nameEn\n          paymentMethod\n          wholesalePlan\n        }\n      }\n      products {\n        id\n        totalPrice\n        product {\n          nameEn\n          id\n          code\n        }\n        price\n        quantity\n      }\n    }\n  }\n"]);return yl=function(){return e},e}var Sl=we()(yl()),jl=function(e){e.permissions;var t=Object(x.a)(e,["permissions"]),a=Object(j.e)(),n=Object(k.a)(),c=Object(de.g)();console.log("SalesOrder Show",t);var l,o=Object(Ie.b)(Sl,{variables:{where:{id:t.id}}}),i=o.loading,u=o.data;return l=u&&"PAID"===u.salesOrder.state,r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:9},r.a.createElement(A.a,{variant:"h6"},n("common.information"),"\xa0",l?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var e=t.id;c.push("/SalesOrder/".concat(e,"/edit"))}},r.a.createElement(Dr.a,null),"\xa0",n("common.edit")),l?null:r.a.createElement(Be.a,{color:"primary",size:"small",onClick:Fr(u),disabled:i},r.a.createElement(Cr.a,null),"\xa0",n("common.print"))),r.a.createElement(pn.a,Object.assign({title:"Sales Order Details"},t),(function(e){var t=e.record?e.record.code:"",n=e.record?e.record.id:"";return a(Ht([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/".concat(n,"/show"),label:"Details: ".concat(t)}])),r.a.createElement(En.a,e,r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Customer",source:"shop.id",reference:"CustomerShop"},r.a.createElement(Tt.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,t){return"/Customer/".concat(e.customer.id,"/show")}},r.a.createElement(Wt,{source:"name"}))),r.a.createElement(Tt.a,{label:"Wholesale plan",source:"shop.id",reference:"CustomerShop",link:!1},r.a.createElement(Tt.a,{label:"Customer",source:"customer.id",reference:"Customer",link:!1},r.a.createElement(Ft.a,{source:"wholesalePlan"}))),r.a.createElement(Tt.a,{label:"Shop",source:"shop.id",reference:"CustomerShop",link:"show"},r.a.createElement(Ft.a,{source:"code"})),r.a.createElement(Ft.a,{source:"code",label:"Sales Order No."}),r.a.createElement(Ft.a,{source:"shippingDate",label:"Sales Order Shipping Date"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Status"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"state",addLabel:!1,label:n("common.status")})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Subtotal Price"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"subtotal",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Discount Amount"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"discountAmount",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Grand Total Price"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"grandTotal",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Invoice"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Invoice No.",reference:"Invoice",source:"invoice.id",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Invoice No."})))))),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(A.a,{variant:"h6"},n("salesOrder.products"),"\xa0"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},t),r.a.createElement(Un.a,{reference:"SalesOrderItem",source:"productsIds",addLabel:!1},r.a.createElement(kt.a,t,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{source:"price",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))},Dl=a(1327),Cl=function(){return"/SalesOrder"},Pl=function(e){var t=e.record,a=Object(Dl.a)("SalesOrder",t.id),c=Object(o.a)(a,1)[0],l=Object(de.g)(),i=function(){return l.go(-1)},u=Object(Gt.a)(),s=Object(Hn.f)(),m=Object(n.useCallback)((function(){if(s.valid){var e=s.values,a=(e.customer,Object(x.a)(e,["customer"]));c({payload:{data:Object(ze.a)({},a),previousData:t}},{undoable:!0,onSuccess:function(e){e.data;u("ra.notification.updated","info",{smart_count:1},!0),i()}})}}),[s.valid,s.values,t,u,i,c]);return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:m}))},Il=function(e){return r.a.createElement(_n.a,e,r.a.createElement(Pl,{label:"common.save",submitOnEnter:!1,variant:"text"}))},xl=function(e){var t=Object(j.e)(),a=Object(k.a)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{toolbar:r.a.createElement(Il,null),redirect:Cl},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Sales Order No."}),r.a.createElement(kn.a,{source:"state",choices:[{id:"RECEIVED",name:a("common.received")},{id:"CONFIRMED",name:a("common.confirmed")},{id:"PACKED",name:a("common.packed")},{id:"SHIPPED",name:a("common.shipped")},{id:"DELIVERED",name:a("common.delivered")},{id:"PAID",name:a("common.paid")},{id:"DELETED",name:a("common.deleted")}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([{url:"/SalesOrder",label:"Sales Order"},{url:"/SalesOrder/".concat(a.id),label:"Edit: ".concat(a.code)}])),null}))))},wl=function(e){var t=e.record,a=e.props;e.permissions;return"PAID"!==t.state?r.a.createElement(wt.a,{basePath:a.basePath,record:t}):null},Nl=function(e){var t=e.record,a=e.props;e.permissions;return"PAID"!==t.state?r.a.createElement(dn.a,{basePath:a.basePath,record:t,resource:a.resource}):null},kl=function(e){var t=e.permissions,a=Object(x.a)(e,["permissions"]);return console.log(a),Object(j.e)()(Ht([{url:"/SalesOrder",label:"Sales Order"}])),r.a.createElement(Nt.a,Object.assign({},a,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code",label:"Sales Order No."}),r.a.createElement(Tt.a,{label:"Customer",source:"shop.id",reference:"CustomerShop"},r.a.createElement(Tt.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,t){return"/Customer/".concat(e.customer.id,"/show")}},r.a.createElement(Wt,{source:"name"}))),r.a.createElement(Tt.a,{label:"Shop",source:"shop.id",reference:"CustomerShop",link:"show"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{label:"Grand total price",source:"grandTotal",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"state"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(wl,{record:e,props:a,permissions:t})}}),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(Nl,{record:e,props:a,permissions:t})}})))};function Tl(){var e=Object(Pe.a)(["\n  query suppliers($where: SupplierWhereInput) {\n    suppliers(where: $where) {\n      id\n      name\n      creditLine\n    }\n  }\n"]);return Tl=function(){return e},e}var Fl=we()(Tl());function Al(e){var t=e.onChange,a=e.value,c=Object(k.a)(),l=Object(Ie.b)(Fl,{variables:{state:"APPROVED"}}),i=l.loading,u=l.data,s=Object(n.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1];Object(n.useEffect)((function(){d||h([])}),[d]);var E=Object(n.useState)([]),f=Object(o.a)(E,2),b=f[0],h=f[1],g=i||d&&0===b.length;Object(n.useEffect)((function(){g&&u&&h(u.suppliers.map((function(e){return{id:e.id,name:e.name,creditLine:e.creditLine}})))}),[g,u]);var v=Object(n.useState)(a),O=Object(o.a)(v,2),y=O[0],S=O[1];Object(n.useEffect)((function(){S(a)}),[a]);return r.a.createElement(Qe.a,{id:"purchase-order-autocomplete",open:d,onOpen:function(){p(!0)},onClose:function(){p(!1)},onChange:function(e,a){console.log("value: ",a),S(a),t(a)},getOptionSelected:function(e,t){return e.id===t},getOptionLabel:function(e){return e.name},options:b,loading:g,value:y,renderInput:function(e){return r.a.createElement(Ge.a,Object.assign({},e,{label:c("supplier.supplier"),fullWidth:!0,variant:"filled",InputProps:Object(ze.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,g?r.a.createElement(Je.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})}var Rl=["SHIPPED","ARRIVED","RECEIVED","DELETED"];var Wl=function(e){var t=e.formData,a=e.setFormData,n=e.permissions,c=Object(k.a)();return r.a.createElement("form",{noValidate:!0},r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Al,{variant:"filled",fullWidth:!0,value:t.supplier,label:c("purchaseOrder.code"),onChange:function(e){return a(Object(ze.a)({},t,{supplier:e}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ge.a,{variant:"filled",fullWidth:!0,value:t.code,label:c("purchaseOrder.code"),onChange:function(e){return a(Object(ze.a)({},t,{code:e.target.value}))}})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Ot.a,{inputVariant:"filled",fullWidth:!0,value:t.expectedDeliveryAt,label:c("purchaseOrder.expectedDeliveryAt"),onChange:function(e){return a(Object(ze.a)({},t,{expectedDeliveryAt:e.toDate()}))},format:"YYYY/MM/DD"})),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(Jn.a,{variant:"filled",fullWidth:!0},r.a.createElement(Qn.a,{id:"form-state"},c("purchaseOrder.state")),r.a.createElement(Gn.a,{disabled:Rl.includes(t.state),labelId:"state",label:"form-state",value:t.state||"APPROVED",onChange:function(e){return a(Object(ze.a)({},t,{state:e.target.value}))}},[{id:"DRAFT",name:c("common.draft")},{id:"PENDING",name:c("common.pending")}].map((function(e){return r.a.createElement(zn.a,{key:"POSelect".concat(e.id),value:e.id},e.name)})),"admin"===n&&r.a.createElement(zn.a,{key:"POSelectAPPROVED",value:"APPROVED"}," ",c("common.approved")))))))},Ml=a(1307);function Ll(){var e=Object(Pe.a)(["\n  query getPo($where: PurchaseOrderWhereInput!) {\n    purchaseOrders(where: $where) {\n      totalPrice\n    }\n  }\n"]);return Ll=function(){return e},e}var ql=we()(Ll()),Yl=be()((function(e){return{label:{fontWeight:"bold",textAlign:"right",paddingRight:e.spacing(2)}}}));var Bl=function(e){var t=e.formData,a=e.setFormData,c=Dt()().add(1,"month").format("YYYY-MM-DD").toString(),l=Dt()().format("YYYY-MM-DD").toString(),i=Object(Ie.b)(ql,{variables:{where:{createdAt_gt:"".concat(l.substring(0,7)),createdAt_lt:"".concat(c.substring(0,7)),supplierId:t.supplier.id}}}),u=i.loading,s=i.data,m=r.a.useState(5),d=Object(o.a)(m,2),p=d[0],E=d[1],f=r.a.useState(0),b=Object(o.a)(f,2),h=b[0],g=b[1],v=Object(k.a)(),O=Yl(),y=0,S=t.products.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(n.useEffect)((function(){if(u&&console.log("loadingPO"),s){console.log("supplierPO:",s);var e=parseInt(t.supplier.creditLine);y=s.purchaseOrders.reduce((function(e,t){return e-t.totalPrice}),e),y-=S,console.log("supplierLine",y),a(Object(ze.a)({},t,{canCredit:y>=0,supplierLine:y}))}s||console.log("error loading supplierPO",s)}),[s,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{variant:"h6",gutterBottom:!0},v("purchaseOrder.purchaseOrderDetails")),r.a.createElement(Yt.a,{container:!0},r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.code"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.code)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.supplier"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.supplier.name)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:O.label},"line")),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.supplier.creditLine)),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.expectedDeliveryAt"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},Dt()(t.expectedDeliveryAt).format("YYYY-MM-DD"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0,className:O.label},v("purchaseOrder.state"))),r.a.createElement(Yt.a,{item:!0,xs:6,sm:3},r.a.createElement(A.a,{gutterBottom:!0},t.state)),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(Ml.a,{component:Re.a},r.a.createElement(Ne.a,{"aria-label":"spanning table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{align:"center",colSpan:3},"Details"),r.a.createElement(Fe.a,{align:"right"},"Price")),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,"Desc"),r.a.createElement(Fe.a,{align:"right"},"Price"),r.a.createElement(Fe.a,{align:"right"},"Qty."),r.a.createElement(Fe.a,{align:"right"},"Total"))),r.a.createElement(Ae.a,null,t.products&&t.products.slice(h*p,h*p+p).map((function(e){return r.a.createElement(Te.a,{key:e.id},r.a.createElement(Fe.a,null,r.a.createElement(Wt,{source:"name",record:e})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))})),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{colSpan:3},"Total"),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"grandTotal",record:{grandTotal:S},options:{style:"currency",currency:"HKD"}}))),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{colSpan:3},"Supplier Credit Line"),r.a.createElement(Fe.a,{align:"right"},r.a.createElement("div",null,r.a.createElement(At.a,{source:"supplierLine",record:Object(ze.a)({},t),options:{style:"currency",currency:"HKD"}}),t.canCredit?null:r.a.createElement("h1",{style:{color:"red"}}," Over Credit "))))))),r.a.createElement(wc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.products.length,rowsPerPage:p,page:h,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){E(parseInt(e.target.value,10)),g(0)}}))))},_l=a(775),Hl=a.n(_l),Ul=a(776),Vl=a.n(Ul);function Kl(){var e=Object(Pe.a)(["\n  query {\n    products {\n      id\n      code\n      nameChi\n      nameEn\n      minOrderQuantity\n      quantity\n      minStockLevel\n      cost\n      wholeSalePrice1\n      wholeSalePrice2\n      wholeSalePrice3\n      wholeSalePrice4\n      wholeSalePrice5\n    }\n  }\n"]);return Kl=function(){return e},e}var $l=we()(Kl()),zl=function(e){var t=e.formData,a=e.setFormData,n=Object(Gt.a)(),c=Object(D.a)({table:{minWidth:650}}),l=Object(Ie.b)($l).data,i=function(){var e=Object(fa.a)(Ea.a.mark((function e(r){var c,o;return Ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r.shift(),c=l.products.reduce((function(e,t){return e[t.code]=t,e}),{}),o=r.filter((function(e){var t=e[1]&&""!==e[1]&&e[1].replace(/-/g,"");return""!==e[0]&&""!==e[1]&&c[t]})).map((function(e){var t,a=e[1].replace(/-/g,"");t=!0===e[3].includes("/")?parseInt(e[0])*parseInt(e[3].split("/"[0])):e[0];var n=parseFloat(c[a].cost);return Object(ze.a)({},c[a],{quantity:t,price:n,totalPrice:t*n})})),n("Imported ".concat(o.length," Products")),a(Object(ze.a)({},t,{products:o}))}catch(i){n("Error: ".concat(i,"."),"warning")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=c(),s=r.a.useState(5),m=Object(o.a)(s,2),d=m[0],p=m[1],E=r.a.useState(0),f=Object(o.a)(E,2),b=f[0],h=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Hl.a,{onFileLoaded:function(e){return i(e)},label:"Select .csv file  "}),r.a.createElement("a",{href:Vl.a,target:"_blank"},"Template"),t.products&&t.products.length>0&&r.a.createElement(Re.a,null,r.a.createElement(Ml.a,{component:Re.a},r.a.createElement(Ne.a,{className:u.table,size:"small","aria-label":"a dense table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{align:"right"},"Product no."),r.a.createElement(Fe.a,{align:"right"},"Name"),r.a.createElement(Fe.a,{align:"right"},"Cost"),r.a.createElement(Fe.a,{align:"right"},"Quantity"),r.a.createElement(Fe.a,{align:"right"},"Subtotal"))),r.a.createElement(Ae.a,null,t.products.slice(b*d,b*d+d).map((function(e){return r.a.createElement(Te.a,{key:e.item},r.a.createElement(Fe.a,{align:"right"},e.code),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(Wt,{source:"name",record:e})),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"price",record:e,options:{style:"currency",currency:"HKD"}})),r.a.createElement(Fe.a,{align:"right"},e.quantity),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}})))}))))),r.a.createElement(wc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.products.length,rowsPerPage:d,page:b,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){p(parseInt(e.target.value,10)),h(0)}})))};function Gl(){var e=Object(Pe.a)(["\n  query getFirstSupplier {\n    suppliers(first: 1) {\n      id\n      name\n      creditLine\n    }\n  }\n"]);return Gl=function(){return e},e}function Ql(){var e=Object(Pe.a)(["\n  query getLastPurchaseOrder {\n    purchaseOrders(orderBy: code_DESC, first: 1) {\n      id\n      code\n    }\n  }\n"]);return Ql=function(){return e},e}function Jl(){var e=Object(Pe.a)(["\n  mutation createPurchaseOrder($data: PurchaseOrderCreateInput!) {\n    createPurchaseOrder(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Jl=function(){return e},e}var Xl=be()((function(e){return{layout:Object(v.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(2)),{width:1024,marginLeft:"auto",marginRight:"auto"}),paper:Object(v.a)({marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(1024+2*e.spacing(3)),{marginTop:e.spacing(2),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),Zl=we()(Jl()),eo=we()(Ql()),to=we()(Gl()),ao=function(e){var t,a=e.permissions,c=(Object(x.a)(e,["permissions"]),Object(j.e)()),l=Object(k.a)(),i=Xl(),u=Object(de.g)(),s=Object(Ie.a)(Zl),m=Object(o.a)(s,1)[0],d=Object(n.useState)(0),p=Object(o.a)(d,2),E=p[0],f=p[1],b={code:"",supplier:null,expectedDeliveryAt:Dt()().add(4,"month").toDate(),products:[],state:"PENDING"},h=Object(n.useState)(b),g=Object(o.a)(h,2),v=g[0],O=g[1];c(Ht([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/create",label:"Create New"}]));var y=Object(Ie.b)(eo),S=y.loading,D=y.data;Object(n.useEffect)((function(){if(D&&D.purchaseOrders.length>0&&""===v.code){var e=D.purchaseOrders[0];O(Object(ze.a)({},v,{code:ra(e.code)}))}}),[D,v]);var C=Object(Ie.b)(to),P=C.loading,I=C.data;if(Object(n.useEffect)((function(){if(I&&I.suppliers.length>0&&!v.supplier){var e=I.suppliers[0];O(Object(ze.a)({},v,{supplier:e}))}}),[I,v]),S||P)return"<div>Loading...</div>";var w=[l("purchaseOrder.selectProducts"),l("purchaseOrder.purchaseOrderDetails"),l("purchaseOrder.review")];return t=0==E&&0==v.products.length,r.a.createElement("main",{className:i.layout},r.a.createElement(Re.a,{className:i.paper},r.a.createElement(A.a,{component:"h1",variant:"h4",align:"center"},l("purchaseOrder.createPurchaseOrder"),r.a.createElement(ml.a,{style:{float:"right"},badgeContent:v.products.length,color:"primary"},r.a.createElement(dl.a,null))),r.a.createElement(_e.a,{activeStep:E,className:i.stepper},w.map((function(e){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Ke.a,null,e))}))),r.a.createElement(r.a.Fragment,null,0===E&&r.a.createElement(zl,{formData:v,setFormData:O}),1===E&&r.a.createElement(Wl,{permissions:a,formData:v,setFormData:O}),2===E&&r.a.createElement(Bl,{formData:v,setFormData:O}),r.a.createElement("div",{className:i.buttons},E>0&&r.a.createElement(Be.a,{onClick:function(){f(E-1)},color:"primary"},l("common.prev")),E<2&&r.a.createElement(Be.a,{onClick:function(){f(E+1)},color:"primary",disabled:t},l("common.next")),2===E&&r.a.createElement(Be.a,{onClick:function(){var e={code:v.code,supplierId:v.supplier.id,expectedDeliveryAt:Dt()(v.expectedDeliveryAt).toISOString(),totalPrice:v.products.reduce((function(e,t){return e+parseFloat(t.quantity)*parseFloat(t.price)}),0),state:v.state,products:{create:v.products.map((function(e){return{productId:e.id,quantity:parseInt(e.quantity,10),price:parseFloat(e.price),totalPrice:parseFloat(e.quantity)*parseFloat(e.price)}}))}};m({variables:{data:e}}).then((function(){u.push("/PurchaseOrder")}))},color:"primary",disabled:1!=v.canCredit},l("common.save"))))))},no=function(e){var t=Object(n.useState)("ARRIVED"),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(j.e)(),u=Object(k.a)(),s=Object(de.g)(),m=function(e){return function(){console.log("record",e)}};return r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:9},r.a.createElement(A.a,{variant:"h6"},u("common.information"),"\xa0",r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var t=e.id;s.push("/PurchaseOrder/".concat(t,"/edit"))},disabled:c&&"ARRIVED"===c},r.a.createElement(Dr.a,null),"\xa0",u("common.edit"))),r.a.createElement(pn.a,Object.assign({title:"Purchase Order Details",actions:r.a.createElement(r.a.Fragment,null)},e),(function(e){var t=e.record?e.record.code:"",a=e.record?e.record.id:"";return i(Ht([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/".concat(a,"/show"),label:"Details: ".concat(t)}])),r.a.createElement(En.a,e,r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Supplier",source:"supplier.id",reference:"Supplier",link:!1},r.a.createElement(Ft.a,{source:"name"})),r.a.createElement(Ft.a,{source:"code",label:"Supplier No."}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Status"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Rt.a,{addLabel:!1,render:function(e){return function(e){return console.log("record: ",e),l(e.state),e.state}(e)}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Cost"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"totalPrice",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Expected Delivery Date"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(jn.a,{addLabel:!1,source:"expectedDeliveryAt"}))))),r.a.createElement(Yt.a,{item:!0,xs:12},r.a.createElement(A.a,{variant:"h6"},u("purchaseOrder.products"),"\xa0",r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var t=e.id;s.push("/PurchaseOrderItem/create",{record:{purchaseOrder:{id:t}}})},disabled:c&&"ARRIVED"===c},r.a.createElement(Pr.a,null),"\xa0",u("common.create"))),r.a.createElement(pn.a,Object.assign({title:"Products",actions:r.a.createElement(r.a.Fragment,null)},e),(function(e){if(!e.record)return null;var t=e.record?e.record.id:"";return r.a.createElement(Nt.a,{resource:"PurchaseOrderItem",hasCreate:!1,hasEdit:!1,hasShow:!1,hasList:!0,exporter:!1,basePath:"/PurchaseOrderItem",filter:{purchaseOrder:{id:t}}},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(At.a,{source:"price",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Rt.a,{render:function(e){return r.a.createElement(Be.a,{color:"primary",size:"small",disabled:c&&"ARRIVED"==c,onClick:m(e)},r.a.createElement(Dr.a,null),"\xa0",u("common.edit"))}})))}))))},ro=function(e){var t=Object(j.e)(),a=Object(k.a)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard"},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Purchase Order No."}),r.a.createElement(Tn.a,{source:"expectedDeliveryAt"}),r.a.createElement(kn.a,{source:"state",label:"Status",choices:[{id:"DRAFT",name:a("common.draft")},{id:"PENDING",name:a("common.pending")},{id:"CONFIRMED",name:a("common.confirmed")}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([{url:"/PurchaseOrder",label:"Purchase Order"},{url:"/PurchaseOrder/".concat(a.id),label:"Edit: ".concat(a.code)}])),null}))))},co=function(e){return Object(j.e)()(Ht([{url:"/PurchaseOrder",label:"Purchase Order"}])),r.a.createElement(Nt.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETED"},sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code",label:"Purchase Order No."}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}),r.a.createElement(jn.a,{source:"expectedDeliveryAt"}),r.a.createElement(Ft.a,{source:"state",label:"Status"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(dn.a,null)))},lo=a(777),oo=a(1250);var io=function(e){var t=e.formData,a=e.setFormData,n=Object(k.a)();return r.a.createElement(Yt.a,{container:!0},r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement(aa,{onChange:function(e){e.products.forEach((function(e){e.exactQuantity=0,e.totalPrice=0})),a(Object(ze.a)({},t,{purchaseOrder:e}))},defaultValue:t.purchaseOrder})),t.purchaseOrder&&function(){var e=t.purchaseOrder,a=Dt()(e.expectedDeliveryAt);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("purchaseOrder.supplier")},e.supplier.name)),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("purchaseOrder.expectedDeliveryAt")},a.format("YYYY-MM-DD")," ")),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("purchaseOrder.state")},e.state)),r.a.createElement(Yt.a,{item:!0,xs:12,sm:6},r.a.createElement($n,{label:n("purchaseOrder.totalPrice")},r.a.createElement(At.a,{source:"totalPrice",record:e,options:{style:"currency",currency:"HKD"}}))))}())},uo=a(1345),so=a(1346),mo=a(778),po=a.n(mo),Eo=a(779),fo=a.n(Eo),bo=a(1300),ho=Object(D.a)({root:{"& > *":{borderBottom:"unset"}}}),go=function(e){var t=e.row,a=e.onRowClick,n=e.onRemoveChecked,c=r.a.useState(!1),l=Object(o.a)(c,2),i=l[0],u=l[1],s=ho(),m=t.product,d=t.checked,p=t.quantity,E=t.id,f=d?d.reduce((function(e,t){return e+=parseInt(t.exactQuantity,10)}),0):0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,{hover:!0,className:s.root,onClick:function(){return u(!i)}},r.a.createElement(Fe.a,null,r.a.createElement(L.a,{"aria-label":"expand row",size:"small",onClick:function(){return u(!i)}},i?r.a.createElement(uo.a,null):r.a.createElement(so.a,null))),r.a.createElement(Fe.a,null,r.a.createElement(Ft.a,{source:"code",record:m})),r.a.createElement(Fe.a,{component:"th"},r.a.createElement(Wt,{source:"name",record:m})),r.a.createElement(Fe.a,{align:"right"},p),r.a.createElement(Fe.a,{align:"right"},f),r.a.createElement(Fe.a,{align:"right"},r.a.createElement(L.a,{onClick:function(){a&&a(t)}},p===f?r.a.createElement(po.a,{color:"secondary"}):r.a.createElement(fo.a,{color:"primary"})))),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.a.createElement(bo.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(Ce.a,{margin:1},r.a.createElement(A.a,{variant:"h6",gutterBottom:!0,component:"div"},"Details"),r.a.createElement(Ne.a,{size:"small","aria-label":"purchases"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null,"Warehouse"),r.a.createElement(Fe.a,null,"Expiry Date"),r.a.createElement(Fe.a,null,"Quantity"),r.a.createElement(Fe.a,null,"Labels"),r.a.createElement(Fe.a,{align:"right"}))),r.a.createElement(Ae.a,null,d&&d.map((function(e,a){return r.a.createElement(Te.a,{key:"checked-".concat(E,"-").concat(a)},r.a.createElement(Fe.a,null,r.a.createElement(Tt.a,{source:"warehouseId",record:e,reference:"Warehouse",basePath:"/Warehouse"},r.a.createElement(Ft.a,{source:"name"}))),r.a.createElement(Fe.a,null,r.a.createElement(jn.a,{source:"expiryDate",record:e})),r.a.createElement(Fe.a,null,r.a.createElement(At.a,{source:"exactQuantity",record:e})),r.a.createElement(Fe.a,{align:"right"},e.labelFrom," - ",e.labelTo),r.a.createElement(Fe.a,null,r.a.createElement(Be.a,{variant:"outlined",size:"small",onClick:(c=a,function(){n&&n(c,t)}),color:"secondary"},r.a.createElement(Cc.a,null),r.a.createElement(A.a,{variant:"body1"},"Remove"))));var c})))))))))},vo=function(e){var t=e.products,a=e.filterItemId,n=e.onRowClick,c=e.onRemoveChecked,l=Object(k.a)(),i=r.a.useState(25),u=Object(o.a)(i,2),s=u[0],m=u[1],d=r.a.useState(0),p=Object(o.a)(d,2),E=p[0],f=p[1],b=a?[t.find((function(e){return e.id===a}))]:t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml.a,{component:Re.a},r.a.createElement(Ne.a,{"aria-label":"simple table"},r.a.createElement(ke.a,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,null),r.a.createElement(Fe.a,null,l("product.code")),r.a.createElement(Fe.a,null,l("product.name")),r.a.createElement(Fe.a,{align:"right"},l("product.quantity")),r.a.createElement(Fe.a,{align:"right"},l("shipping.quantityCheck")),r.a.createElement(Fe.a,{align:"right"},l("shipping.status")))),r.a.createElement(Ae.a,null,b.slice(E*s,E*s+s).map((function(e){return r.a.createElement(go,{row:e,key:e.id,onRowClick:n,onRemoveChecked:c})}))))),r.a.createElement(wc.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:s,page:E,onChangePage:function(e,t){f(t)},onChangeRowsPerPage:function(e){m(parseInt(e.target.value,10)),f(0)}}))};var Oo=function(e){var t=e.formData,a=Object(k.a)(),n=t.purchaseOrder.products;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{variant:"h6",gutterBottom:!0},a("menu.item.shipping")),r.a.createElement(vo,{products:n}))};var yo=function(e){var t=e.input,a=e.backendData;console.log("backend Data: ",a),console.log("input: ",t);var n=[];a.forEach((function(e,a){var r=e.labelFrom,c=e.labelTo;n[a]={labelFrom:!1,labelTo:!1},t.labelFrom>c&&(n[a].labelFrom=!0),t.labelTo>c&&(n[a].labelTo=!0),console.log({labelFrom:r,labelTo:c}),console.log(n[a])}));var r=n.find((function(e){var t=e.labelFrom,a=e.labelTo;return!0===t&&!0===a}));return console.log("res: --",r),void 0==r};function So(){var e=Object(Pe.a)(["\n  query queryShippingItems {\n    shippingItems {\n      labelFrom\n      labelTo\n    }\n  }\n"]);return So=function(){return e},e}var jo=we()(So()),Do=function(e){var t=e.formData,a=e.setFormData,c=Object(Gt.a)(),l=Object(n.useState)(""),i=l.defaultLabel,u=(l.setDefaultLabel,t.purchaseOrder),s=u.products,m=Object(Ie.b)(jo),d=(m.loading,m.data),p=Object(n.useState)([]),E=Object(o.a)(p,2),f=E[0],b=E[1];Object(n.useEffect)((function(){console.log("call useUffect: ",d),d&&(b(d.shippingItems),console.log("fetching data.....",d.shippingItems),console.log("inside",f))}),[d]);var h=s.map((function(e){return{id:e.id,name:e.product.code+" - "+e.product.nameChi}}));return r.a.createElement(Hn.b,{onSubmit:function(e,n){var r=s.find((function(t){return t.id===e.itemId}));if(r){r.checked||(r.checked=[]);var l=e.labelFrom?ra(e.labelFrom,parseInt(e.exactQuantity,10)-1):"",o=yo({input:{labelFrom:e.labelFrom,labelTo:l},backendData:f});console.log("checking",o),r.checked.push(Object(ze.a)({},e,{labelTo:l})),a(Object(ze.a)({},t,{purchaseOrder:Object(ze.a)({},u,{products:s})})),setTimeout((function(){return n.reset({warehouseId:e.warehouseId,expiryDate:e.expiryDate,labelFrom:e.labelFrom?ra(l):""})}))}else c("Please select product first","error")},render:function(e){var n=e.handleSubmit,c=e.values,l=e.form,o=e.submitting,m=e.pristine,d=c.quantity,p=c.labelFrom;d&&p&&console.log(d,p);var E=function(e){l.change("itemId",e.id)},f=function(e,n){s.find((function(e){return e.id===n.id})).checked.splice(e,1),a(Object(ze.a)({},t,{purchaseOrder:Object(ze.a)({},u,{products:s})}))};return r.a.createElement("form",{onSubmit:n},r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,style:{flexGrow:1}},r.a.createElement(zr.a,{source:"itemId",fullWidth:!0,choices:h,validate:Object(un.c)()})),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Nn.a,{label:"Warehouse",source:"warehouseId",reference:"Warehouse",filterToQuery:function(){return{type:"NORMAL"}}},r.a.createElement(kn.a,{optionText:"name",validate:Object(un.c)()}))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Tn.a,{source:"expiryDate",validate:Object(un.c)()})),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Xr.a,{source:"exactQuantity",label:"Quantity",validate:Object(un.c)()})),r.a.createElement(Yt.a,{item:!0},r.a.createElement(xt.a,{source:"labelFrom",defaultValue:i})),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Xt.a,null,(function(e){var t=e.formData,a=(Object(x.a)(e,["formData"]),t.exactQuantity),n=t.labelFrom;if(a&&n)return r.a.createElement(A.a,{variant:"body1"},ra(n,parseInt(a-1,10)))}))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(Be.a,{type:"submit",color:"primary",variant:"contained",disabled:o},r.a.createElement(Pr.a,null),"Add Record"),r.a.createElement(Be.a,{type:"button",onClick:l.reset,disabled:o||m},"Reset"))),r.a.createElement(Xt.a,null,(function(e){var t=e.formData;Object(x.a)(e,["formData"]);return r.a.createElement(vo,{products:s,filterItemId:t.itemId,onRowClick:E,onRemoveChecked:f})})))}})};var Co=function(e){var t=e.formData,a=e.setFormData;return e.setCheckSuccess,r.a.createElement(Ce.a,{p:1},r.a.createElement(Do,{setFormData:a,formData:t}))};function Po(){var e=Object(Pe.a)(["\n  mutation createShipping($data: ShippingCreateInput!) {\n    createShipping(data: $data) {\n      id\n      code\n    }\n  }\n"]);return Po=function(){return e},e}var Io=be()((function(e){return{layout:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),marginBottom:e.spacing(3),padding:e.spacing(2)},stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),xo=we()(Po()),wo=function(){var e=Object(j.e)(),t=Object(k.a)(),a=Io(),c=Object(de.g)(),l=Object(Gt.a)(),i=Object(Ie.a)(xo),u=Object(o.a)(i,1)[0],s=Object(n.useState)(0),m=Object(o.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)(!1),f=Object(o.a)(E,2),b=(f[0],f[1]),h=r.a.useState(!1),g=Object(o.a)(h,2),v=g[0],O=g[1],y=Object(n.useState)({purchaseOrder:null,checkedProducts:{},totalPrice:0}),S=Object(o.a)(y,2),D=S[0],C=S[1];e(Ht([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/create",label:"Create New"}]));var P=[t("shipping.selectPurchaseOrder"),t("shipping.quantityCheck"),t("shipping.review")],I=function(){O(!0)},x=function(e){return function(){e?(O(!1),p(d+1)):O(!1)}};return r.a.createElement("main",{className:a.layout},r.a.createElement(Re.a,{className:a.paper},r.a.createElement(_e.a,{activeStep:d,className:a.stepper},P.map((function(e){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Ke.a,null,e))}))),r.a.createElement(Gc.a,{open:v,onClose:x,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qc.a,{id:"alert-dialog-title"},"Warning!!"),r.a.createElement(Jc.a,null,r.a.createElement(oo.a,{id:"alert-dialog-description"},"Some product's quantity not match! Continue?")),r.a.createElement(Xc.a,null,r.a.createElement(Be.a,{onClick:x(!1),color:"primary"},"No"),r.a.createElement(Be.a,{onClick:x(!0),color:"primary",autoFocus:!0},"Yes"))),r.a.createElement(r.a.Fragment,null,0===d&&r.a.createElement(io,{formData:D,setFormData:C}),1===d&&r.a.createElement(Co,{setCheckSuccess:b,formData:D,setFormData:C}),2===d&&r.a.createElement(Oo,{formData:D}),r.a.createElement("div",{className:a.buttons},d>0&&r.a.createElement(Be.a,{onClick:function(){p(d-1)},color:"primary"},t("common.prev")),d<2&&r.a.createElement(Be.a,{onClick:function(){1!==d||function(){var e,t=D.purchaseOrder.products,a=Object(lo.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;if((parseInt(n.quantity,10)||0)!==(n.checked?n.checked.reduce((function(e,t){return e+=parseInt(t.exactQuantity,10)}),0):0))return!1}}catch(r){a.e(r)}finally{a.f()}return!0}()?p(d+1):I()},color:"primary"},t("common.next")),2===d&&r.a.createElement(Be.a,{onClick:function(){var e=D.purchaseOrder,t=D.totalPrice;u({variables:{data:{code:"SP-".concat(e.code),purchaseOrderId:e.id,deliveryAt:Dt()().toISOString(),totalPrice:t,products:{create:e.products.reduce((function(e,t){var a=t.checked;if(!a||0===a.length)return e;var n=parseInt(t.quantity,10)||0,r=a.map((function(e){return{productId:t.product.id,warehouseId:e.warehouseId,labelFrom:e.labelFrom,labelTo:e.labelTo,expiryDate:"-"===e.expiryDate?null:e.expiryDate,expectedQuantity:n,quantity:parseInt(e.exactQuantity,10)||0,price:t.price,totalPrice:n*t.price}}));return[].concat(Object(Ee.a)(e),Object(Ee.a)(r))}),[])}}}}).then((function(){c.push("/Shipping")})).catch((function(e){l("Error: ".concat(e.message),"warning")}))},color:"primary"},t("common.confirm"))))))},No=function(e){var t=Object(j.e)();return r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:9},r.a.createElement(A.a,{variant:"h6"},"Shipping no.\xa0"),r.a.createElement(pn.a,Object.assign({title:"Purchase Order Details",actions:r.a.createElement(r.a.Fragment,null)},e),(function(e){var a=e.record?e.record.code:"",n=e.record?e.record.id:"";return t(Ht([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/".concat(n,"/show"),label:"Details: ".concat(a)}])),r.a.createElement(En.a,e,r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"code",label:"Shipping No."}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Total Price"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Delivery Date"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(jn.a,{source:"deliveryAt"})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Purchase Order"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Purchase Order",reference:"PurchaseOrder",source:"purchaseOrder.id",link:"show"},r.a.createElement(Ft.a,{source:"code",label:"Purchase Order No."})),r.a.createElement(Tt.a,{label:"Purchase Order",reference:"PurchaseOrder",source:"purchaseOrder.id",link:"show"},r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}})))))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:12,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Items"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Un.a,{label:"Items",reference:"ShippingItem",source:"productsIds"},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"#",source:"product.id",reference:"Product"},r.a.createElement(Ft.a,{source:"code",label:"Product No."})),r.a.createElement(Tt.a,{label:"Product Name",source:"product.id",reference:"Product"},r.a.createElement(Wt,{source:"name"})),r.a.createElement(Ft.a,{source:"labelFrom"}),r.a.createElement(Ft.a,{source:"labelTo"}),r.a.createElement(jn.a,{source:"expiryDate"}),r.a.createElement(At.a,{source:"price",options:{style:"currency",currency:"HKD"}}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(At.a,{source:"totalPrice",options:{style:"currency",currency:"HKD"}}))))))))},ko=function(e){var t=Object(j.e)();return console.log("Edit props",e),r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard"},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Shipping No."}),r.a.createElement(Tn.a,{source:"expectedDeliveryAt"}),r.a.createElement(kn.a,{source:"state",choices:[{id:"DRAFT",name:"DRAFT"},{id:"APPROVED",name:"APPROVED"},{id:"CONFIRMED",name:"CONFIRMED"}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([{url:"/Shipping",label:"Shipping"},{url:"/Shipping/".concat(a.id),label:"Edit: ".concat(a.code)}])),null}))))},To=function(e){return Object(j.e)()(Ht([{url:"/Shipping",label:"Shipping"}])),r.a.createElement(Nt.a,Object.assign({},e,{filterDefaultValues:{state_not:"DELETE"},sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code",label:"Shipping No."}),r.a.createElement(jn.a,{source:"deliveryAt"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(dn.a,null)))},Fo=a(1359),Ao=a(1349),Ro=a(1372),Wo=a(1350),Mo=a(1347),Lo=a(1348),qo=function(e){var t=Object(j.e)(),a=Object(k.a)(),n=Object(de.g)();return r.a.createElement(Yt.a,{container:!0,spacing:2},r.a.createElement(Yt.a,{item:!0,xs:6},r.a.createElement(A.a,{variant:"h6"},"Basic Information\xa0",r.a.createElement(Be.a,{color:"primary",size:"small",onClick:function(){var t=e.basePath,a=e.id;n.push("".concat(t,"/").concat(a,"/edit"))}},r.a.createElement(Dr.a,null),"\xa0",a("common.edit"))),r.a.createElement(pn.a,Object.assign({title:"Product Details",actions:r.a.createElement(r.a.Fragment,null)},e),(function(e){var a=e.record?e.record.code:"",n=e.record?e.record.id:"";return t(Ht([{url:"/Product",label:"Product"},{url:"/Product/".concat(n,"/show"),label:"Details: ".concat(a)}])),r.a.createElement(En.a,e,r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"code",label:"Product No."}),r.a.createElement(Ft.a,{source:"nameEn"}),r.a.createElement(Ft.a,{source:"nameChi"}),r.a.createElement(Ft.a,{source:"discount"}),r.a.createElement(Ft.a,{source:"shortDescription"}),r.a.createElement(Ft.a,{source:"longDescription"}),r.a.createElement(Ft.a,{source:"sku"}),r.a.createElement(Ft.a,{source:"upc"}),r.a.createElement(Ft.a,{source:"minOrderQuantity"}),r.a.createElement(Ft.a,{source:"minStockLevel"}),r.a.createElement(jn.a,{source:"onlineDate"}),r.a.createElement(jn.a,{source:"offlineDate"}),r.a.createElement(Un.a,{label:"Categories",reference:"ProductCategory",source:"categoriesIds"},r.a.createElement(Mo.a,null,r.a.createElement(Lo.a,{source:"nameChi"})))))}))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Cost"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"cost",addLabel:!1,options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Wholesales Prices"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"wholeSalePrice1",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"wholeSalePrice2",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"wholeSalePrice3",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"wholeSalePrice4",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"wholeSalePrice5",options:{style:"currency",currency:"HKD"}})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Retails Prices"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(At.a,{source:"retailPrice1",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"retailPrice2",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"retailPrice3",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"retailPrice4",options:{style:"currency",currency:"HKD"}}),r.a.createElement(At.a,{source:"retailPrice5",options:{style:"currency",currency:"HKD"}}))))),r.a.createElement(Yt.a,{item:!0,container:!0,xs:3,direction:"column",spacing:2},r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Total Stock"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"quantity",addLabel:!1})))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Warehouse Summary"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Un.a,{reference:"WarehouseSummary",source:"warehouseSummariesIds"},r.a.createElement(kt.a,null,r.a.createElement(Tt.a,{label:"Warehouse",source:"warehouse.id",reference:"Warehouse"},r.a.createElement(Ft.a,{source:"name"})),r.a.createElement(Ft.a,{source:"quantity"})))))),r.a.createElement(Yt.a,{item:!0},r.a.createElement(A.a,{variant:"h6"},"Expiry Date Summary"),r.a.createElement(En.b,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(fn.a,null,r.a.createElement(Un.a,{reference:"ExpiryDateSummary",source:"expiryDateSummariesIds"},r.a.createElement(kt.a,null,r.a.createElement(jn.a,{source:"expiryDate"}),r.a.createElement(Ft.a,{source:"quantity"}))))))))},Yo=function(){return"/Product"},Bo={url:"/Product",label:"Product"},_o=function(e){return Object(j.e)()(Ht([Bo,{url:"/Product/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Yo},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Product No."}),r.a.createElement(xt.a,{source:"brandEn",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"brandChi",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(Xr.a,{source:"package",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"discount"}),r.a.createElement(xt.a,{source:"weight",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"shortDescription"}),r.a.createElement(xt.a,{source:"longDescription"}),r.a.createElement(Fo.a,{source:"images",accept:"image/*",multiple:!0},r.a.createElement(Ao.a,{source:"src",title:"title"})),r.a.createElement(xt.a,{source:"sku"}),r.a.createElement(xt.a,{source:"upc",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"cost",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice1",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice2",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice3",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice4",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice5",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"retailPrice1",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"retailPrice2",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"retailPrice3",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"retailPrice4",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"retailPrice5",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"minOrderQuantity",defaultValue:10}),r.a.createElement(Xr.a,{source:"minStockLevel",defaultValue:0}),r.a.createElement(Tn.a,{source:"onlineDate"}),r.a.createElement(Tn.a,{source:"offlineDate"})))},Ho=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Yo},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Product No."}),r.a.createElement(xt.a,{source:"brandEn",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"brandChi",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)(),fullWidth:!0}),r.a.createElement(Xr.a,{source:"package",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"discount"}),r.a.createElement(xt.a,{source:"weight",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"shortDescription"}),r.a.createElement(xt.a,{source:"longDescription"}),r.a.createElement(Fo.a,{source:"images",accept:"image/*",multiple:!0},r.a.createElement(Ao.a,{source:"src",title:"title"})),r.a.createElement(xt.a,{source:"sku"}),r.a.createElement(xt.a,{source:"upc"}),r.a.createElement(Xr.a,{source:"cost",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice1",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice2",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice3",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice4",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"wholeSalePrice5",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"minOrderQuantity"}),r.a.createElement(Xr.a,{source:"minStockLevel"}),r.a.createElement(Tn.a,{source:"onlineDate"}),r.a.createElement(Tn.a,{source:"offlineDate"}),r.a.createElement(Ro.a,{label:"Category",source:"categoriesIds",reference:"ProductCategory"},r.a.createElement(Wo.a,{optionText:"nameEn"})),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([Bo,{url:"/Product/".concat(a.id),label:"Edit: ".concat(a.code)}])),null}))))},Uo=function(e){return Object(j.e)()(Ht([Bo])),r.a.createElement(Nt.a,e,r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code",label:"Product No."}),r.a.createElement(Wt,{source:"name"}),r.a.createElement(Un.a,{label:"Categories",reference:"ProductCategory",source:"categoriesIds"},r.a.createElement(Mo.a,null,r.a.createElement(Lo.a,{source:"nameChi"}))),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},Vo=function(){return"/Customer"},Ko={url:"/Customer",label:"Customer"},$o=function(e){return Object(j.e)()(Ht([Ko,{url:"/Customer/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Vo},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Customer No."}),r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"mobile",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"email",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"district"}),r.a.createElement(xt.a,{source:"billingAddress"}),r.a.createElement(xt.a,{source:"salesman"}),r.a.createElement(xt.a,{source:"website"}),r.a.createElement(xt.a,{source:"remark",multiline:!0}),r.a.createElement(Nn.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},r.a.createElement(kn.a,{optionText:"name",validate:Object(un.c)()})),r.a.createElement(kn.a,{source:"wholesalePlan",validate:Object(un.c)(),choices:[{id:1,name:"Plan 1"},{id:2,name:"Plan 2"},{id:3,name:"Plan 3"},{id:4,name:"Plan 4"},{id:5,name:"Plan 5"}]}),r.a.createElement(kn.a,{source:"paymentMethod",validate:Object(un.c)(),choices:[{id:"credit",name:"Credit"},{id:"debit",name:"Debit"},{id:"c.o.d",name:"C.O.D"}]})))},zo=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Vo},r.a.createElement(xt.a,{source:"code",validate:Object(un.c)(),label:"Customer No."}),r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"mobile"}),r.a.createElement(xt.a,{source:"email",validate:Object(un.b)()}),r.a.createElement(xt.a,{source:"district"}),r.a.createElement(xt.a,{source:"billingAddress"}),r.a.createElement(xt.a,{source:"salesman"}),r.a.createElement(xt.a,{source:"website"}),r.a.createElement(xt.a,{source:"remark",multiline:!0}),r.a.createElement(Nn.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},r.a.createElement(kn.a,{optionText:"name",validate:Object(un.c)()})),r.a.createElement(kn.a,{source:"wholesalePlan",validate:Object(un.c)(),choices:[{id:1,name:"Plan 1"},{id:2,name:"Plan 2"},{id:3,name:"Plan 3"},{id:4,name:"Plan 4"},{id:5,name:"Plan 5"}]}),r.a.createElement(kn.a,{source:"paymentMethod",validate:Object(un.c)(),choices:[{id:"CREDIT",name:"Credit"},{id:"DEBIT",name:"Debit"},{id:"COD",name:"C.O.D"}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([Ko,{url:"/Customer/".concat(a.id),label:"Edit: ".concat(a.nameEn)}])),null}))))};var Go=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){console.log("controllerProps: ",a);var n=a.record?a.record.nameEn:"",c=a.record?a.record.id:"";return t(Ht([Ko,{url:"/Customer/".concat(c,"/show"),label:"Details: ".concat(n)}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"code"}),r.a.createElement(Ft.a,{source:"nameEn"}),r.a.createElement(Ft.a,{source:"nameChi"}),r.a.createElement(Ft.a,{source:"wholesalePlan"}),r.a.createElement(Ft.a,{source:"mobile"}),r.a.createElement(Sn.a,{source:"email"}),r.a.createElement(Ft.a,{source:"district"}),r.a.createElement(Ft.a,{source:"billingAddress"}),r.a.createElement(Ft.a,{source:"salesman"}),r.a.createElement(Ft.a,{source:"website"}),r.a.createElement(Ft.a,{source:"remark"}),r.a.createElement(Tt.a,{label:"Group",source:"group.id",reference:"CustomerGroup"},r.a.createElement(Ft.a,{source:"name"})),r.a.createElement(Ft.a,{source:"paymentMethod"}),r.a.createElement(Un.a,{label:"Shops",reference:"CustomerShop",source:"shopsIds"},r.a.createElement(Mo.a,null,r.a.createElement(Tt.a,{source:"id",reference:"CustomerShop",link:function(e,t){return"/CustomerShop/".concat(e.id,"/show")}},r.a.createElement(Ft.a,{source:"nameChi"})))),r.a.createElement(Un.a,{label:"Customer Coupons",reference:"CustomerCoupon",source:"couponsIds",filter:{state_not_in:"EMPTY"}},r.a.createElement(kt.a,null,r.a.createElement(Ft.a,{source:"code"}),r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Ft.a,{source:"discount"}),r.a.createElement(Ft.a,{source:"state"}),r.a.createElement(Ft.a,{source:"quantity"}),r.a.createElement(Ft.a,{source:"type"}))),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"})))}))},Qo=function(e){return Object(j.e)()(Ht([Ko])),r.a.createElement(Nt.a,Object.assign({},e,{sort:{field:"createdAt",order:"DESC"}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"code"}),r.a.createElement(Wt,{source:"name"}),r.a.createElement(Tt.a,{label:"Group",source:"group.id",reference:"CustomerGroup",link:"show"},r.a.createElement(Ft.a,{source:"name"})),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},Jo=a(1351),Xo=function(){return"/User"},Zo={url:"/User",label:"User"},ei=function(e){var t=Object(j.e)(),a=Object(Ct.a)(),n=(a.loaded,a.permissions),c=JSON.parse(localStorage.getItem("group"));return t(Ht([Zo,{url:"/User/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Xo},r.a.createElement(xt.a,{source:"name"}),r.a.createElement(Jo.a,{source:"password"}),r.a.createElement(Nn.a,{label:"Company Group",source:"group.id",reference:"UserGroup",filter:"superadmin"===n?{}:{id:c.id}},r.a.createElement(kn.a,{source:"name"})),r.a.createElement(kn.a,{source:"permission",choices:"superadmin"===n?[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"},{id:"SUPERADMIN",name:"SUPERADMIN"}]:[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"}]})))},ti=function(e){var t=Object(j.e)(),a=JSON.parse(localStorage.getItem("group")),n=Object(Ct.a)(),c=(n.loaded,n.permissions);return t(Ht([Zo,{url:"/User/edit",label:"User Edit"}])),r.a.createElement(mn.a,e,"admin"===c||"superadmin"===c?r.a.createElement(Jt.a,{variant:"standard",redirect:Xo},r.a.createElement(xt.a,{source:"name"}),"superadmin"===c?r.a.createElement(Jo.a,{source:"password"}):null,r.a.createElement(Nn.a,{label:"Company Group",source:"group.id",reference:"UserGroup",filter:"superadmin"===c?{}:{id:a.id}},r.a.createElement(kn.a,{source:"name"})),r.a.createElement(kn.a,{source:"permission",choices:"superadmin"===c?[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"},{id:"SUPERADMIN",name:"SUPERADMIN"}]:[{id:"ADMIN",name:"ADMIN"},{id:"ACCOUNT",name:"ACCOUNT"},{id:"SALES",name:"SALES"},{id:"INVENTORY",name:"INVENTORY"}]})):r.a.createElement("h1",null,"No Permission"))},ai=function(e){var t=Object(j.e)(),a=Object(Ct.a)(),n=(a.loaded,a.permissions);return r.a.createElement(pn.a,e,(function(a){var c=a.record?a.record.id:"";return t(Ht([Zo,{url:"/User/".concat(c,"/show"),label:"Details"}])),r.a.createElement(En.a,Object.assign({},e,a,{hasEdit:"superadmin"===n||"admin"===n}),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Ft.a,{source:"permission"}),"superadmin"===n?r.a.createElement(Ft.a,{source:"password"}):null,r.a.createElement(Tt.a,{label:"company Group",source:"group.id",reference:"UserGroup",link:"show"},r.a.createElement(Ft.a,{source:"name"}))))}))},ni=function(e){var t=Object(j.e)(),a=Object(Ct.a)(),n=(a.loaded,a.permissions),c=JSON.parse(localStorage.getItem("group"));return console.log("group",c),console.log("permissions",n),t(Ht([Zo])),r.a.createElement(Nt.a,Object.assign({},e,{hasCreate:"admin"===n||"superadmin"===n,sort:{field:"createdAt",order:"DESC"},filterDefaultValues:"superadmin"===n?{}:{permission_not:"SUPERADMIN",group:{id:c.id}}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(Tt.a,{label:"company group",source:"group.id",reference:"UserGroup",link:"show"},r.a.createElement(Lo.a,{source:"name"})),r.a.createElement(Ft.a,{source:"permission"}),"admin"===n||"superadmin"===n?r.a.createElement(wt.a,null):null,"superadmin"===n?r.a.createElement(dn.a,null):null))},ri=function(){return"/UserGroup"},ci={url:"/UserGroup",label:"UserGroup"},li=function(e){return Object(j.e)()(Ht([ci,{url:"/UserGroup/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:ri},r.a.createElement(xt.a,{source:"name"})))},oi=function(e){var t=Object(j.e)(),a=Object(Ct.a)();a.loaded,a.permissions;return t(Ht([ci,{url:"/UserGroup/edit",label:"UserGroup Edit"}])),r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:ri},r.a.createElement(xt.a,{source:"name"})))},ii=function(e){var t=Object(j.e)(),a=Object(Ct.a)(),n=(a.loaded,a.permissions);return r.a.createElement(pn.a,e,(function(a){var c=a.record?a.record.id:"";return t(Ht([ci,{url:"/UserGroup/".concat(c,"/show"),label:"Details"}])),r.a.createElement(En.a,Object.assign({},e,a,{hasEdit:"admin"===n||"superadmin"===n}),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"name"})))}))},ui=function(e){var t=Object(j.e)(),a=Object(Ct.a)(),n=(a.loaded,a.permissions),c=JSON.parse(localStorage.getItem("group"));return console.log("group",c.id),console.log("permissions",n),t(Ht([ci])),r.a.createElement(Nt.a,Object.assign({},e,{hasCreate:"superadmin"===n,sort:{field:"name",order:"DESC"},filterDefaultValues:"superadmin"===n?null:{id:c.id}}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"name"}),"admin"===n||"superadmin"===n?r.a.createElement(wt.a,null):null,"superadmin"===n?r.a.createElement(dn.a,null):null))},si=function(){return"/CustomerGroup"},mi={url:"/CustomerGroup",label:"CustomerGroup"},di=function(e){return Object(j.e)()(Ht([mi,{url:"/CustomerGroup/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:si},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()})))},pi=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:si},r.a.createElement(xt.a,{source:"name",validate:Object(un.c)()}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([mi,{url:"/CustomerGroup/".concat(a.id),label:"Edit: ".concat(a.name)}])),null}))))},Ei=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.name:"",c=a.record?a.record.id:"";return t(Ht([mi,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(n)}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"name"})))}))},fi=function(e){return Object(j.e)()(Ht([mi])),r.a.createElement(Nt.a,e,r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"name"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},bi=a(1382);function hi(){var e=Object(Pe.a)(["\n  query customers($where: CustomerWhereInput) {\n    customers(where: $where) {\n      id\n    }\n  }\n"]);return hi=function(){return e},e}var gi=function(){return"/CustomerShop"},vi={url:"/CustomerShop",label:"CustomerShop"},Oi=function(e){return"".concat(e.code," ").concat(e.nameChi)},yi=we()(hi()),Si=function(e){var t=Object(Ie.b)(yi,{}),a=(t.loading,t.data);return console.log("data",a&&a),Object(j.e)()(Ht([vi,{url:"/CustomerShop/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:gi},r.a.createElement(Nn.a,{label:"Customer",source:"customer.id",reference:"Customer",perPage:a&&a.customers.length},r.a.createElement(kn.a,{optionText:Oi,validate:Object(un.c)()})),r.a.createElement(xt.a,{label:"Shop No.",source:"code",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameEn"}),r.a.createElement(xt.a,{source:"phone"}),r.a.createElement(xt.a,{source:"deliverAddress",validate:Object(un.c)()}),r.a.createElement(bi.a,{source:"deliveryDay",choices:[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}]})))},ji=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard"},r.a.createElement(xt.a,{source:"nameChi"}),r.a.createElement(xt.a,{source:"nameEn"}),r.a.createElement(xt.a,{source:"phone"}),r.a.createElement(xt.a,{source:"deliveryAddress"}),r.a.createElement(bi.a,{source:"deliveryDay",choices:[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}]}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([vi,{url:"/CustomerShop/".concat(a.id),label:"Edit: ".concat(a.name)}])),null}))))};var Di=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.id:"";return t(Ht([vi,{url:"/CustomerShop/".concat(n,"/show"),label:"Details"}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Tt.a,{label:"Customer",source:"customer.id",reference:"Customer",link:function(e,t){return"/Customer/".concat(e.customer.id,"/show")}},r.a.createElement(Wt,{source:"name"})),r.a.createElement(Ft.a,{label:"Shop No.",source:"code"}),r.a.createElement(Ft.a,{source:"nameChi"}),r.a.createElement(Ft.a,{source:"nameEn"}),r.a.createElement(Ft.a,{source:"phone"}),r.a.createElement(Ft.a,{source:"deliverAddress"}),r.a.createElement(Rt.a,{label:"Delivery Day",source:"deliveryDay",render:function(e){return e.deliveryDay.map((function(t,a){return"".concat(function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(t)).concat(a===e.deliveryDay.length-1?".":",")}))}})))}))},Ci=function(e){return Object(j.e)()(Ht([vi])),r.a.createElement(Nt.a,Object.assign({},e,{title:"Customer Shop"}),r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{label:"Shop No.",source:"code"}),r.a.createElement(Ft.a,{source:"nameChi"}),r.a.createElement(Ft.a,{source:"deliverAddress"}),r.a.createElement(jn.a,{source:"createdAt"}),r.a.createElement(jn.a,{source:"updatedAt"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},Pi=function(){return"/ProductCategory"},Ii={url:"/ProductCategory",label:"Product Category"},xi=function(e){return Object(j.e)()(Ht([Ii,{url:"/ProductCategory/create",label:"Create New"}])),r.a.createElement(on.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Pi},r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"detail",multiline:!0})))},wi=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:Pi},r.a.createElement(xt.a,{source:"nameEn",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"nameChi",validate:Object(un.c)()}),r.a.createElement(xt.a,{source:"detail",multiline:!0}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ht([Ii,{url:"/ProductCategory/".concat(a.id),label:"Edit: ".concat(a.nameEn)}])),null}))))},Ni=function(e){var t=Object(j.e)();return r.a.createElement(pn.a,e,(function(a){var n=a.record?a.record.nameEn:"",c=a.record?a.record.id:"";return t(Ht([Ii,{url:"/CustomerGroup/".concat(c,"/show"),label:"Details: ".concat(n)}])),r.a.createElement(En.a,Object.assign({},e,a),r.a.createElement(fn.a,null,r.a.createElement(Ft.a,{source:"nameEn"}),r.a.createElement(Ft.a,{source:"nameChi"})))}))},ki=function(e){return Object(j.e)()(Ht([Ii])),r.a.createElement(Nt.a,e,r.a.createElement(kt.a,{rowClick:"show"},r.a.createElement(Ft.a,{source:"nameEn"}),r.a.createElement(Ft.a,{source:"nameChi"}),r.a.createElement(wt.a,null),r.a.createElement(dn.a,null)))},Ti=a(439),Fi=a(438),Ai=a(784),Ri=a.n(Ai),Wi={softwareName:"Ambrossoft Supplier Management System",menu:{item:{home:"Dashboard",replenish:"Replenish",sale:"Sale",settings:"Settings",reports:"Reports",supplier:"Supplier",purchaseOrder:"Purchase Order",shipment:"Shipment",deliveryNote:"Delivery Note",warehouse:"Warehouse",inventory:"Inventory",salesOrder:"Sales Order",invoice:"Invoice",customer:"Customer",customerGroup:"Customer Group",customerShop:"Customer Shop",user:"User",userGroup:"UserGroup",product:"Product",productCategory:"Product Category",salesShipping:"Sales Shipping",receivePayment:"Receive Payment",monthly:"Monthly",quarterly:"Quarterly",annual:"Annual",warehousing:"Warehousing",labelling:"Labelling",shipping:"Shipping",packing:"Packing",stockCheck:"Stock Check",stockTransfer:"Stock Transfer",stockDispose:"Stock Dispose",noNeedThisProduct:"You don't need this item"}},dashboard:{supplier:"Supplier",purchaseOrder:"Purchase Order",shipment:"Shipment",delivery:"Delivery",warehouse:"Warehouse",inventory:"Inventory",salesOrder:"Sales Order",invoice:"Invoice",customer:"Customer",customerGroup:"Customer Group",product:"Product",productCategory:"Product Category",salesShipping:"Sales Shipping",receivePayment:"Receive Payment"},product:{code:"Product No.",product:"Product",cost:"Cost",price:"Price",quantity:"Quantity",expiryDate:"Expiry Date",label:"Label",name:"Name",warehouse:"Warehouse",wholeSalePrice:"Whole Sale Price",minOrderQuantity:"Min. Order Qty.",expiredIn6Months:"Expired In 6 Months"},supplier:{supplier:"Supplier",replenish:"Replenish Now!"},purchaseOrder:{selectProducts:"Select Products",purchaseOrder:"Purchase Order",code:"Purchase Order No.",createPurchaseOrder:"Create Purchase Order",editPurchaseOrder:"Edit Purchase Order",title:"Purchase Order",drafts:"Drafts",waitingShipment:"Waiting Shipment",completed:"Completed",basicInfo:"Basic Info",products:"Products",productCode:"Product Code",productName:"Product Name",expectedDeliveryAt:"Expected Delivery Date",supplier:"Supplier",state:"Status",review:"Review",purchaseOrderDetails:"Purchase Order Details",totalPrice:"Total Price"},salesOrder:{selectProducts:"Select Products",salesOrder:"Sales Order",code:"Sales Order No.",contactPerson:"Contact Person",createSalesOrder:"Create Sales Order",editSalesOrder:"Edit Sales Order",title:"Sales Order",drafts:"Drafts",waitingShipment:"Waiting Shipment",completed:"Completed",basicInfo:"Basic Info",products:"Products",productCode:"Product Code",productName:"Product Name",expectedDeliveryAt:"Delivery Date",supplier:"Supplier",state:"Status",review:"Review",salesOrderDetails:"Sales Order Details",customer:"Customer",totalPrice:"Total Price"},shipping:{warehousing:"Warehousing",productList:"Product List",shipment:"Shipment",shippingDelivery:"Shipping Delivery",warehouse:"Warehouse",needToUpdatePO:"Quantity not match?",clickHere:"Update Purchase Order",products:"Products",labelling:"Labelling",unlabelledItem:"Unlabelled Item",labelFrom:"Label From",labelTo:"Label To",selectPurchaseOrder:"Select Purchase Order",quantityCheck:"Quantity Check",review:"Review",selectWarehouse:"Select Warehouse",status:"Status",allTheFollowing:"Update items?",changeAll:"This and following items",changeThisOnly:"This item only"},shipment:{waitingShipment:"Waiting Shipment",completed:"Completed"},invoice:{newOrders:"New Orders",completed:"Completed Orders",selectSalesOrder:"Select Sales Order",shippingDetails:"Shipping Details",review:"Review",shipmentDate:"Shipment Date",state:"Status",code:"Invoice No.",totalPrice:"Total Price",contactPerson:"Contact Person",salesOrder:"Sales Order",invoice:"Invoice",invoiceDetails:"Invoice Details",customer:"Customer"},inventory:{inventory:"Inventory",stockTransfer:"Stock Transfer",stockDispose:"Stock Dispose",stock:"Stock",warehouse:"Warehouse",trash:"Trash",productItem:"Product Item",brand:"Brand",countryOfOrigin:"Country of origin",listView:"List View",heatMapView:"Heat Map View"},delivery:{newOrders:"New Orders",completed:"Completed Orders"},deliveryNote:{selectInvoice:"Select Invoice",quantity:"Quantity",quantityCheck:"Quantity Check",quantityNeed:"Quantity Needed",packingBox:"Packing Box",deliveryDate:"Delivery Date",products:"Products",review:"Review",labelNo:"Label #"},receivePayment:{newOrders:"New Orders",completed:"Completed Orders",selectInvoice:"Select Invoice",quantity:"Quantity",quantityCheck:"Quantity Check",packingBox:"Packing Box",review:"Review",labelNo:"Label #"},customer:{customer:"Customer",salesSummary:"Sales Summary",mobile:"Mobile",tel:"Tel.",shippingAddress:"Shipping Address",billingAddress:"Billing Address"},readMore:"Read More",resources:{PurchaseOrder:{fields:{products:"Products"}}},common:{addNew:"Add New",create:"Add New",list:"List",approved:"Approved",new:"New",date:"Date",draft:"Draft",edit:"Edit",confirm:"Confirm",confirmed:"Confirmed",deleted:"Deleted",status:"Status",save:"Save",cancel:"Cancel",assign:"Assign",from:"From",to:"To",transfer:"Transfer",search:"Search",filter:"Filter",groupBy:"Group By",next:"Next",prev:"Prev",information:"Information",pending:"Pending",sent:"Sent",acked:"Acked",shipped:"Shipped",arrived:"Arrived",received:"Received",packed:"Packed",delivered:"Delivered",paid:"Paid",print:"Print",salesman:"Salesman",delete:"Delete"},pageNotFound:"Page Not Found!"},Mi=Object(Ti.a)((function(e){return"en"===e?Object(ze.a)({},Fi.a,{},Wi):"zh-TW"===e?a.e(7).then(a.bind(null,1385)).then((function(e){return Object(ze.a)({},Ri.a,{},e.default)})):void 0}),"en"),Li=function(e){var t=Object(Ln.a)("PurchaseOrderItem"),a=Object(o.a)(t,1)[0],c=Object(de.g)(),l=function(){return c.go(-1)},i=Object(Gt.a)(),u=Object(Hn.f)(),s=Object(n.useCallback)((function(){if(u.valid){var e=u.values,t=e.product,n=Object(x.a)(e,["product"]);a({payload:{data:Object(ze.a)({},n,{productId:t.id})}},{onSuccess:function(e){e.data;i("ra.notification.created","info",{smart_count:1}),l()}})}}),[u.valid,u.values,a,i,l]);return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:s}))},qi=function(e){return r.a.createElement(_n.a,e,r.a.createElement(Li,{label:"common.save",submitOnEnter:!1,variant:"text"}))};function Yi(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1];Object(j.e)()(Ut({url:"/PurchaseOrderItem/create",label:"Add New Purchase Order Item"}));var i=function(e){return"".concat(e.record.code," ").concat(e.record.nameChi)};return r.a.createElement(on.a,e,r.a.createElement(Jt.a,{toolbar:r.a.createElement(qi,null),variant:"standard"},r.a.createElement(Nn.a,{label:"Purchase Order",source:"purchaseOrder.id",reference:"PurchaseOrder"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),r.a.createElement(Nn.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},r.a.createElement(zr.a,{optionText:r.a.createElement(i,null),label:"Purchase Order No.",inputText:function(e){return function(){return l(e),"".concat(e.code," ").concat(e.nameChi)}},matchSuggestion:function(e,t){return!0},options:{style:{width:500}}})),c&&r.a.createElement(Xt.a,null,(function(e){var t=e.formData;return Object(x.a)(e,["formData"]),r.a.createElement(Yt.a,{container:!0,direction:"column",style:{width:280}},r.a.createElement(Xr.a,{source:"quantity",initialsValue:0}),r.a.createElement(Xr.a,{source:"price",initialValue:t.price}))}))))}var Bi=function(e){var t=Object(j.e)(),a=Object(de.g)();return r.a.createElement(mn.a,Object.assign({actions:r.a.createElement(r.a.Fragment,null)},e),r.a.createElement(Jt.a,{variant:"standard",redirect:function(){return a.go(-1)}},r.a.createElement(Nn.a,{label:"Purchase Order",source:"purchaseOrder.id",reference:"PurchaseOrder"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),r.a.createElement(Nn.a,{label:"Product",source:"product.id",reference:"Product"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Purchase Order No."})),r.a.createElement(Xr.a,{source:"quantity",initialValue:"quantity"}),r.a.createElement(Xr.a,{source:"price",initialValue:"cost"}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ut({url:"/PurchaseOrderItem/".concat(a.id),label:"Edit"})),null}))))},_i=(a(1373),a(1352),function(){return"/Shipping"}),Hi=function(e){return Object(j.e)()(Ut({url:"/PurchaseOrderItem/".concat(e.id),label:"Edit Shipping Item"})),r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",redirect:_i},r.a.createElement(Xr.a,{source:"quantity"})))};function Ui(){var e=Object(Pe.a)(["\n  mutation updateSalesOrderItem(\n    $data: SalesOrderItemUpdateInput!\n    $where: SalesOrderItemWhereUniqueInput!\n  ) {\n    updateSalesOrderItem(data: $data, where: $where) {\n      id\n    }\n  }\n"]);return Ui=function(){return e},e}var Vi=function(e){var t=Object(Ln.a)("SalesOrderItem"),a=Object(o.a)(t,1)[0],c=Object(de.g)(),l=function(){return c.go(-1)},i=Object(Gt.a)(),u=Object(Hn.f)();console.log("formState",u);var s=Object(n.useCallback)((function(){if(u.valid){var e=u.values,t=e.product,n=Object(x.a)(e,["product"]),r=parseInt(n.quantity,10),c=parseFloat(n.price);delete n.customer,console.log("product: ",t),a({payload:{data:Object(ze.a)({},n,{productId:t.id,discount:t.discount,totalPrice:r*c})}},{onSuccess:function(e){e.data;i("ra.notification.created","info",{smart_count:1}),l()}})}}),[u.valid,u.values,a,i,l]);return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:s}))},Ki=function(e){return r.a.createElement(_n.a,e,r.a.createElement(Vi,{label:"common.save",submitOnEnter:!1,variant:"text"}))},$i=function(e){return r.a.createElement("span",null,e.record.code," ",e.record.nameChi)};function zi(e){var t=Object(de.h)().state.record.customer.wholesalePlan,a=Object(k.a)(),c=Object(n.useState)(),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(n.useState)(t),m=Object(o.a)(s,2),d=m[0],p=m[1],E=i?[i.wholeSalePrice1,i.wholeSalePrice2,i.wholeSalePrice3,i.wholeSalePrice4,i.wholeSalePrice5]:[];if(i&&i.discount&&E.length>0)if(i.discount.includes("%")){var f=1-parseFloat(i.discount)/100;console.log(f),E=E.map((function(e){return e*f})),console.log("wholeSalePriceList:",E)}else if(i.discount.includes("HKD")){var b=parseFloat(i.discount.replace("HKD",""));E=E.map((function(e){return e-b}))}Object(j.e)()(Ut({url:"/SalesOrderItem/create",label:"Add New Sales Order Item"}));return r.a.createElement(on.a,e,r.a.createElement(Jt.a,{toolbar:r.a.createElement(Ki,null),variant:"standard"},r.a.createElement(Nn.a,{label:"Sales Order",source:"salesOrder.id",reference:"SalesOrder"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),r.a.createElement(Nn.a,{filterToQuery:function(e){return{code_contains:e}},label:"Product",source:"product.id",reference:"Product"},r.a.createElement(zr.a,{optionText:r.a.createElement($i,null),label:"Sales Order No.",inputText:function(e){return function(){return u(e),console.log("product",i),e.code}},matchSuggestion:function(e,t){return!0}})),r.a.createElement(Xr.a,{source:"quantity"}),r.a.createElement(Xt.a,null,(function(e){var t=e.formData;return t.price=E[d-1],console.log("formproduct: ",t.product),i&&(t.product.discount=i.discount),r.a.createElement(Yt.a,{direction:"column",container:!0,spacing:3},r.a.createElement(Yt.a,{item:!0,xs:6},i&&r.a.createElement(Ge.a,{label:"price",type:"number",defaultValue:E[d-1],onChange:function(e){var a=e.target.value;t.price=a},value:t.price})),r.a.createElement(Yt.a,{item:!0,xs:6},i&&function(e){return r.a.createElement(Zc.a,null,E.map((function(t,n){return r.a.createElement(Be.a,{onClick:function(){p(n+1),e.price=t,console.log(t)},color:d==n+1?"secondary":void 0,variant:"contained"},a("product.wholeSalePrice"),n+1)})))}(t)))}))))}var Gi=we()(Ui()),Qi=function(e){var t=Object(de.g)(),a=Object(Ie.a)(Gi),n=Object(o.a)(a,1)[0],c=Object(Gt.a)(),l=Object(Hn.f)(),i=l.values,u=i.wholeSalePrice,s=(i.salesOrder,i.price),m=i.quantity,d=i.id;return r.a.createElement(Yn.a,Object.assign({},e,{handleSubmitWithRedirect:function(){console.log("formState: ",l.values),n({variables:{data:{price:s,quantity:m,discount:"HKD".concat(u-s),subPrice:u},where:{id:d}}}).then((function(e){c("Edit Success"),t.go(-1)}))},disabled:!u}))},Ji=function(e){return r.a.createElement(_n.a,e,r.a.createElement(Qi,{label:"common.save",submitOnEnter:!1,variant:"text"}))},Xi=function(e){var t=Object(j.e)();return r.a.createElement(mn.a,e,r.a.createElement(Jt.a,{variant:"standard",toolbar:r.a.createElement(Ji,null)},r.a.createElement(Nn.a,{label:"Sales Order",source:"salesOrder.id",reference:"SalesOrder"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),r.a.createElement(Nn.a,{label:"Product",source:"product.id",reference:"Product"},r.a.createElement(kn.a,{disabled:!0,optionText:"code",label:"Sales Order No."})),r.a.createElement(Xr.a,{source:"quantity"}),r.a.createElement(Xr.a,{source:"wholeSalePrice",validate:Object(un.c)()}),r.a.createElement(Xr.a,{source:"price",inputText:Xr.a}),r.a.createElement(Xt.a,null,(function(e){var a=e.formData;return t(Ut({url:"/SalesOrderItem/".concat(a.id),label:"Edit"})),r.a.createElement("h2",null,"Discount Amount(HKD): ",a.wholeSalePrice-a.price)}))))},Zi=a(109),eu=Object(s.a)({palette:{primary:{main:"#f16112"}},sidebar:{width:"100%",closedWidth:"100%"}}),tu=Object(Zi.a)(),au=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){a||nn().then((function(e){c((function(){return e}))})).catch((function(e){console.error(e)}))}),[a,c]),a?r.a.createElement(u.ApolloProvider,{client:an},r.a.createElement(i.a,{client:an},r.a.createElement(m.a,{utils:d.a},r.a.createElement(E.a,{theme:eu,i18nProvider:Mi,authProvider:ln,title:"Supplier Management System",dashboard:b.a,catchAll:g,layout:ye,customRoutes:Pa,dataProvider:a,history:tu,customReducers:{breadcrumb:Kt}},r.a.createElement(f.a,{name:"Warehouse",list:On,edit:vn,create:gn,show:yn}),r.a.createElement(f.a,{name:"Supplier",list:wn,edit:In,create:Pn,show:xn}),r.a.createElement(f.a,{name:"ReceivePayment",list:Mn,create:Rn,show:Wn}),r.a.createElement(f.a,{name:"DeliveryNote",list:$r,edit:Vr,create:Sr,show:qr}),r.a.createElement(f.a,{name:"DeliveryItem",edit:Jr,create:nc}),r.a.createElement(f.a,{name:"InventoryItem"}),r.a.createElement(f.a,{name:"ExpiryDateSummary"}),r.a.createElement(f.a,{name:"WarehouseSummary"}),r.a.createElement(f.a,{name:"Invoice",list:Dc,edit:Sc,create:fc,show:vc}),r.a.createElement(f.a,{name:"SalesOrder",list:kl,edit:xl,create:Ol,show:jl}),r.a.createElement(f.a,{name:"SalesOrderItem",edit:Xi,create:zi}),r.a.createElement(f.a,{name:"PurchaseOrder",list:co,edit:ro,create:ao,show:no}),r.a.createElement(f.a,{name:"PurchaseOrderItem",edit:Bi,create:Yi}),r.a.createElement(f.a,{name:"Shipping",list:To,edit:ko,create:wo,show:No}),r.a.createElement(f.a,{name:"ShippingItem",edit:Hi}),r.a.createElement(f.a,{name:"Product",list:Uo,edit:Ho,create:_o,show:qo}),r.a.createElement(f.a,{name:"ProductCategory",list:ki,edit:wi,create:xi,show:Ni}),r.a.createElement(f.a,{name:"Customer",list:Qo,edit:zo,create:$o,show:Go}),r.a.createElement(f.a,{name:"CustomerGroup",list:fi,edit:pi,create:di,show:Ei}),r.a.createElement(f.a,{name:"CustomerShop",list:Ci,edit:ji,create:Si,show:Di}),r.a.createElement(f.a,{name:"User",list:ni,edit:ti,create:ei,show:ai}),r.a.createElement(f.a,{name:"UserGroup",list:ui,edit:oi,create:li,show:ii}),r.a.createElement(f.a,{name:"CustomerCoupon"}))))):r.a.createElement(p.a,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(au,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},139:function(e,t,a){!function(e,t){for(var a in t)e[a]=t[a]}(t,function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=32)}([function(e,t){e.exports=a(0)},function(e,t){e.exports=a(25)},function(e,t){e.exports=a(141)},function(e,t){e.exports=a(194)},function(e,t){e.exports=a(1044)},function(e,t){e.exports=a(38)},function(e,t){e.exports=a(142)},function(e,t){e.exports=a(128)},function(e,t){e.exports=a(1064)},function(e,t){e.exports=a(1065)},function(e,t){e.exports=a(1066)},function(e,t){e.exports=a(177)},function(e,t){e.exports=a(1067)},function(e,t){e.exports=a(1068)},function(e,t){e.exports=a(1069)},function(e,t){e.exports=a(1070)},function(e,t){e.exports=a(1071)},function(e,t){e.exports=a(1072)},function(e,t){e.exports=a(1073)},function(e,t){e.exports=a(1074)},function(e,t){e.exports=a(72)},function(e,t){e.exports=a(46)},function(e,t){e.exports=a(656)},function(e,t){e.exports=a(655)},function(e,t){e.exports=a(1075)},function(e,t){e.exports=a(654)},function(e,t){e.exports=a(657)},function(e,t){e.exports=a(1076)},function(e,t){e.exports=a(1077)},function(e,t){e.exports=a(658)},function(e,t){e.exports=a(1078)},function(e,t){e.exports=a(1079)},function(e,t,a){e.exports=a(33)},function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a.r(t);var r=a(0),c=a.n(r),l=a(1),o=a(2),i=a.n(o),u=a(3),s=a.n(u),m=Object(l.withStyles)({horizontal:{top:25},vertical:{padding:0,marginLeft:25,width:1},line:{height:1,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(s.a),d=Object(l.makeStyles)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},padLeft:{marginLeft:10},adjustHeight:{height:32},margin:{margin:e.spacing(2)},minimize:{paddingTop:e.spacing(2),paddingBottom:0}}}));function p(e){var t=e.children,a=e.vertical,r=e.open,l=n(e,["children","vertical","open"]),o=d(),u=c.a.Children.map(t,(function(e){return c.a.cloneElement(e,{iconOnly:!r})}));return c.a.createElement("div",{className:o.root},c.a.createElement(i.a,Object.assign({alternativeLabel:!a,nonLinear:!0,orientation:a?"vertical":"horizontal",connector:c.a.createElement(m,null),className:r?o.minimize:null},l),u))}p.defaultProps={vertical:!1,open:!0};var E=p,f=a(4),b=a.n(f),h=a(5),g=a.n(h),v=a(6),O=a.n(v),y=a(7),S=a.n(y),j=a(8),D=a.n(j),C=a(9),P=a.n(C),I=a(10),x=a.n(I),w=a(11),N=a.n(w),k=a(12),T=a.n(k),F=a(13),A=a.n(F),R=a(14),W=a.n(R),M=a(15),L=a.n(M),q=a(16),Y=a.n(q),B=a(17),_=a.n(B),H={Supplier:A.a,PurchaseOrder:P.a,Shipping:x.a,Inventory:N.a,SalesOrder:W.a,Invoice:T.a,DeliveryNote:Y.a,Customer:D.a,ReceivePayment:L.a,Report:_.a},U=a(18),V=a.n(U),K=["Supplier","PurchaseOrder","Shipping","Inventory","SalesOrder","Invoice","DeliveryNote","Customer","ReceivePayment","Report"],$={SUPPLIER:"Supplier",PURCHASE_ORDER:"Purchase Order",SHIPPING:"Shipping",INVENTORY:"Inventory",SALES_ORDER:"Sales Order",INVOICE:"Invoice",DELIVERY_NOTE:"Delivery Note",CUSTOMER:"Customer",RECEIVE_PAYMENT:"Receive Payment",REPORT:"Report"},z={full:[$.SUPPLIER,$.PURCHASE_ORDER,$.SHIPPING,$.INVENTORY,$.SALES_ORDER,$.INVOICE,$.DELIVERY_NOTE,$.CUSTOMER,$.RECEIVE_PAYMENT,$.REPORT],purchase:[$.SUPPLIER,$.PURCHASE_ORDER,$.SHIPPING,$.INVENTORY],sales:[$.SALES_ORDER,$.INVOICE,$.DELIVERY_NOTE,$.CUSTOMER,$.RECEIVE_PAYMENT],locations:[$.SUPPLIER,$.INVENTORY,$.CUSTOMER]},G={PURCHASE:"purchase",SALES:"sales",FULL:"full"},Q=a(19),J=a.n(Q),X=a(20),Z=a.n(X),ee=a(21),te=a(22),ae=a.n(te),ne=a(23),re=a.n(ne),ce=a(24),le=a.n(ce),oe=a(25),ie=a.n(oe),ue=a(26),se=a.n(ue),me=a(27),de=a.n(me),pe=a(28),Ee=a.n(pe),fe=a(29),be=a.n(fe),he=a(30),ge=a.n(he),ve=a(31),Oe=a.n(ve),ye=[ae.a[400],re.a[300],le.a[300],ie.a[300],se.a[500],de.a[700],Ee.a[400],be.a[600],ge.a[900],Oe.a[300]],Se=K.reduce((function(e,t,a){return e[t]=ye[a],e}),{}),je=Object(ee.makeStyles)((function(e){return{icon:{zIndex:1,color:"#fff",display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",padding:6},bigButton:{width:48,height:48},smallButton:{width:32,height:32,marginTop:8,marginBottom:8},bigIcon:{fontSize:24},smallIcon:{fontSize:16},active:{borderWidth:2,borderStyle:"solid",borderColor:e.palette.common.black}}})),De=K.map((function(e){return Se[e]})),Ce=function(e){var t=e.active,a=e.label,n=e.onClick,r=je(),l=z.full.indexOf(a),o=[c.a.createElement(H.Supplier,{className:r.bigIcon}),c.a.createElement(H.PurchaseOrder,{className:r.smallIcon}),c.a.createElement(H.Shipping,{className:r.smallIcon}),c.a.createElement(H.Inventory,{className:r.bigIcon}),c.a.createElement(H.SalesOrder,{className:r.smallIcon}),c.a.createElement(H.Invoice,{className:r.smallIcon}),c.a.createElement(H.DeliveryNote,{className:r.smallIcon}),c.a.createElement(H.Customer,{className:r.bigIcon}),c.a.createElement(H.ReceivePayment,{className:r.smallIcon}),c.a.createElement(H.Report,{className:r.smallIcon})];return c.a.createElement(Z.a,{"aria-label":a,className:J()(r.icon,z.locations.includes(a)?r.bigButton:r.smallButton,t&&r.active),style:{backgroundColor:De[l]},onClick:n},o[l])},Pe=g()((function(e){return{padLeft:{marginLeft:10},adjustHeight:{height:32}}}));function Ie(e){var t=e.vertical,a=e.iconOnly,r=e.active,l=e.disabled,o=e.type,i=e.label,u=e.onClick,s=n(e,["vertical","iconOnly","active","disabled","type","label","onClick"]),m=Pe(),d=(H[o]||V.a,i||$[b()(o).toUpperCase()]);return c.a.createElement(O.a,Object.assign({onClick:u,active:r,disabled:l,className:t&&m.padLeft},s),c.a.createElement(S.a,{StepIconComponent:Ce,StepIconProps:{label:d,iconOnly:a},className:t&&m.adjustHeight},!a&&d))}Ie.Supplier=function(e){return c.a.createElement(Ie,Object.assign({type:"Supplier"},e))},Ie.PurchaseOrder=function(e){return c.a.createElement(Ie,Object.assign({type:"PurchaseOrder"},e))},Ie.Shipping=function(e){return c.a.createElement(Ie,Object.assign({type:"Shipping"},e))},Ie.Inventory=function(e){return c.a.createElement(Ie,Object.assign({type:"Inventory"},e))},Ie.SalesOrder=function(e){return c.a.createElement(Ie,Object.assign({type:"SalesOrder"},e))},Ie.Invoice=function(e){return c.a.createElement(Ie,Object.assign({type:"Invoice"},e))},Ie.DeliveryNote=function(e){return c.a.createElement(Ie,Object.assign({type:"DeliveryNote"},e))},Ie.Customer=function(e){return c.a.createElement(Ie,Object.assign({type:"Customer"},e))},Ie.ReceivePayment=function(e){return c.a.createElement(Ie,Object.assign({type:"ReceivePayment"},e))},Ie.Report=function(e){return c.a.createElement(Ie,Object.assign({type:"Report"},e))};var xe=Ie;a.d(t,"Workflow",(function(){return E})),a.d(t,"WorkflowType",(function(){return G})),a.d(t,"WorkflowItem",(function(){return xe})),a.d(t,"WorkflowIcons",(function(){return H})),a.d(t,"WorkflowColors",(function(){return Se})),t.default=E}]))},716:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var n=a(11),r=a(34),c=a(0),l=a.n(c),o=a(541),i=a(1243),u=a(538),s=a(796),m=a(797),d=a(798),p=a(799),E=a(800),f=a(801),b=a(802),h=a(803),g=Object(u.WidthProvider)(u.Responsive);var v=function(t){var a={};if(e.localStorage)try{a=JSON.parse(e.localStorage.getItem("rgl-8"))||{}}catch(n){}return a[t]}("layouts")||{};function O(){var t=Object(o.a)(),a=t.loaded,u=t.permissions,O=Object(c.useState)(v),y=Object(n.a)(O,2),S=y[0],j=y[1];if(!a)return l.a.createElement(i.a,null);var D=[function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"profitChart","data-grid":{w:8,h:10,x:0,y:0,minW:4,minH:10}},l.a.createElement(s.a,null))}(),function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"profitNumSum","data-grid":{w:4,h:10,x:8,y:0,minW:2,minH:10}},l.a.createElement(m.a,null))}(),function(){if(["admin"].includes(u))return l.a.createElement("div",{key:"purchasingForecast","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(d.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderChart","data-grid":{w:8,h:10,x:0,y:0,minW:4,minH:10}},l.a.createElement(p.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderNumSum","data-grid":{w:4,h:10,x:8,y:0,minW:2,minH:10}},l.a.createElement(E.a,null))}(),function(){if(["admin","account","sales"].includes(u))return l.a.createElement("div",{key:"salesOrderRecent","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(f.a,null))}(),function(){if(["admin","account"].includes(u))return l.a.createElement("div",{key:"purchaseOrderRecent","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(b.a,null))}(),function(){if(["admin","inventory"].includes(u))return l.a.createElement("div",{key:"deliveryNoteWaiting","data-grid":{w:12,h:10,x:0,y:10,minW:4,minH:10}},l.a.createElement(h.a,null))}()].filter(Boolean);return l.a.createElement(g,{className:"layout",layouts:S,cols:{lg:12,md:12,sm:6,xs:4,xxs:2},rowHeight:30,onLayoutChange:function(t,a){var n,c;n="layouts",c=a,e.localStorage&&e.localStorage.setItem("rgl-8",JSON.stringify(Object(r.a)({},n,c))),j(a)}},D)}}).call(this,a(93))},776:function(e,t,a){e.exports=a.p+"static/media/template.8b755b7f.csv"},796:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(51),o=a(126),i=a(102);function u(e,t){return{time:e,amount:t}}var s=[u("00:00",0),u("03:00",300),u("06:00",600),u("09:00",800),u("12:00",1500),u("15:00",2e3),u("18:00",2400),u("21:00",2400),u("24:00",void 0)];function m(){var e=Object(l.a)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,null,"Profit"),c.a.createElement(o.d,null,c.a.createElement(o.c,{data:s,margin:{top:16,right:16,bottom:0,left:24}},c.a.createElement(o.e,{dataKey:"time",stroke:e.palette.text.secondary}),c.a.createElement(o.f,{stroke:e.palette.text.secondary},c.a.createElement(o.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Sales ($)")),c.a.createElement(o.b,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1}))))}var d=a(38),p=a.n(d)()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=p();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(m,null))}},797:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(83),m=a(102);function d(e){e.preventDefault()}var p=Object(u.a)({depositContext:{flex:1}});function E(){var e=p();return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,"Profit (Jan, 2020)"),c.a.createElement(s.a,{component:"p",variant:"h4"},"$3,024.00"),c.a.createElement(s.a,{color:"textSecondary",className:e.depositContext},"on 15 January, 2020"),c.a.createElement("div",null,c.a.createElement(i.a,{color:"primary",href:"#",onClick:d},"View balance")))}var f=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=f();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(E,null))}},798:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(1290),m=a(1294),d=a(1293),p=a(1291),E=a(1292),f=a(102);function b(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var h=[b(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),b(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),b(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),b(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),b(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,"Purchasing Forecast"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,h.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=y();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(O,null))}},799:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(51),o=a(126),i=a(102);function u(e,t){return{time:e,amount:t}}var s=[u("00:00",0),u("03:00",300),u("06:00",600),u("09:00",800),u("12:00",1500),u("15:00",2e3),u("18:00",2400),u("21:00",2400),u("24:00",void 0)];function m(){var e=Object(l.a)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,null,"Sales Order"),c.a.createElement(o.d,null,c.a.createElement(o.c,{data:s,margin:{top:16,right:16,bottom:0,left:24}},c.a.createElement(o.e,{dataKey:"time",stroke:e.palette.text.secondary}),c.a.createElement(o.f,{stroke:e.palette.text.secondary},c.a.createElement(o.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Sales ($)")),c.a.createElement(o.b,{type:"monotone",dataKey:"amount",stroke:e.palette.primary.main,dot:!1}))))}var d=a(38),p=a.n(d)()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=p();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(m,null))}},800:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(83),m=a(102);function d(e){e.preventDefault()}var p=Object(u.a)({depositContext:{flex:1}});function E(){var e=p();return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,"Total Sales"),c.a.createElement(s.a,{component:"p",variant:"h4"},"$3,024.00"),c.a.createElement(s.a,{color:"textSecondary",className:e.depositContext},"on 15 March, 2019"),c.a.createElement("div",null,c.a.createElement(i.a,{color:"primary",href:"#",onClick:d},"View balance")))}var f=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=f();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(E,null))}},801:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(1290),m=a(1294),d=a(1293),p=a(1291),E=a(1292),f=a(102);function b(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var h=[b(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),b(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),b(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),b(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),b(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,"Sales Orders"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,h.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=y();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(O,null))}},802:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(1290),m=a(1294),d=a(1293),p=a(1291),E=a(1292),f=a(102);function b(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var h=[b(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),b(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),b(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),b(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),b(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,"Purchase Orders"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,h.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=y();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(O,null))}},803:function(e,t,a){"use strict";var n=a(231),r=a(0),c=a.n(r),l=a(38),o=a.n(l),i=a(1289),u=a(77),s=a(1290),m=a(1294),d=a(1293),p=a(1291),E=a(1292),f=a(102);function b(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var h=[b(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),b(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),b(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),b(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),b(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function g(e){e.preventDefault()}var v=Object(u.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function O(){var e=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,"Delivery Notes"),c.a.createElement(s.a,{size:"small"},c.a.createElement(p.a,null,c.a.createElement(E.a,null,c.a.createElement(d.a,null,"Date"),c.a.createElement(d.a,null,"Name"),c.a.createElement(d.a,null,"Ship To"),c.a.createElement(d.a,null,"Payment Method"),c.a.createElement(d.a,{align:"right"},"Sale Amount"))),c.a.createElement(m.a,null,h.map((function(e){return c.a.createElement(E.a,{key:e.id},c.a.createElement(d.a,null,e.date),c.a.createElement(d.a,null,e.name),c.a.createElement(d.a,null,e.shipTo),c.a.createElement(d.a,null,e.paymentMethod),c.a.createElement(d.a,{align:"right"},e.amount))})))),c.a.createElement("div",{className:e.seeMore},c.a.createElement(i.a,{color:"primary",href:"#",onClick:g},"See more orders")))}var y=o()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"hidden",flexDirection:"column",height:"calc(100% - 32px)"}}}));t.a=function(){var e=y();return c.a.createElement(n.a,{className:e.paper},c.a.createElement(O,null))}},854:function(e,t,a){e.exports=a(1237)},859:function(e,t,a){}},[[854,1,2]]]);
//# sourceMappingURL=main.9394f4c6.chunk.js.map